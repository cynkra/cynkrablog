<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>cynkra blog</title>
<link>https://blog.cynkra.com/</link>
<atom:link href="https://blog.cynkra.com/index.xml" rel="self" type="application/rss+xml"/>
<description>By the cynkra team</description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Mon, 21 Oct 2024 00:00:00 GMT</lastBuildDate>
<item>
  <title>seasonal 1.10: R-interface to X-13ARIMA-SEATS</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2024-10-21-seasonal-1.10/</link>
  <description><![CDATA[ <p>We are happy to announce that the latest <a href="https://cran.r-project.org/package=seasonal">CRAN version</a> of <em>seasonal</em> fixes several bugs and makes it easier to read specialized output from X-13ARIMA-SEATS. See <a href="https://github.com/christophsax/seasonal/blob/main/NEWS.md#110">here</a> for a complete list of changes. In addition, the accompanying <em>seasonalview</em> package has been <a href="https://cran.r-project.org/package=seasonalview">updated</a> and finally gets rid of some annoying warning messages.</p>
<section id="what-is-seasonal-adjustment" class="level2"><h2 class="anchored" data-anchor-id="what-is-seasonal-adjustment">What is seasonal adjustment?</h2>
<p>Time series data often display recurring seasonal patterns throughout the year. For instance, unemployment rates in the United States typically rise from January to March and again in June and July. By applying seasonal adjustment, analysts can identify and remove these predictable annual patterns, allowing for clearer interpretation of fundamental changes in the data. The R package <em>seasonal</em> provides a powerful and user-friendly way to perform this task in R, leveraging the X-13ARIMA-SEATS procedure developed by the <a href="https://www.census.gov/data/software/x13as.X-13ARIMA-SEATS.html">U.S. Census Bureau</a>.</p>
</section><section id="getting-started-in-r" class="level2"><h2 class="anchored" data-anchor-id="getting-started-in-r">Getting started in R</h2>
<p>To get started, use the <code>seas</code> function on any time series:</p>
<div class="cell">
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="http://www.seasonal.website">seasonal</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">AirPassengers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
seas(x = AirPassengers)

Coefficients:
                    Estimate Std. Error z value Pr(&gt;|z|)    
Weekday           -0.0029497  0.0005232  -5.638 1.72e-08 ***
Easter[1]          0.0177674  0.0071580   2.482   0.0131 *  
AO1951.May         0.1001558  0.0204387   4.900 9.57e-07 ***
MA-Nonseasonal-01  0.1156204  0.0858588   1.347   0.1781    
MA-Seasonal-12     0.4973600  0.0774677   6.420 1.36e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

SEATS adj.  ARIMA: (0 1 1)(0 1 1)  Obs.: 144  Transform: log
AICc: 947.3, BIC: 963.9  QS (no seasonality in final):    0  
Box-Ljung (no autocorr.): 26.65   Shapiro (normality): 0.9908  </code></pre>
</div>
</div>
<p>By default, <code>seas</code> calls the automatic procedures of X-13ARIMA-SEATS to perform a seasonal adjustment that works well in most circumstances.</p>
<p>To extract the final series, use the <code><a href="https://rdrr.io/pkg/seasonal/man/final.html">final()</a></code> function:</p>
<div class="cell">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/final.html">final</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>  </span></code></pre></div>
</div>
<p>To plot the results, use the <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> function:</p>
<div class="cell">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>  </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-10-21-seasonal-1.10/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="input-and-output" class="level2"><h2 class="anchored" data-anchor-id="input-and-output">Input and output</h2>
<p>In <em>seasonal</em>, it is possible to use the complete syntax of X-13ARIMA-SEATS. The X-13ARIMA-SEATS syntax uses <em>specs</em> and <em>arguments</em>, with each spec optionally containing some arguments. For example, in order to set the ‘variables’ argument of the ‘regression’ spec equal to <code>td</code> and <code>ao1999.jan</code>, the input to <code>seas</code> can be specified like this:</p>
<div class="cell">
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">AirPassengers</span>, regression.variables <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"td"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ao1955.jan"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p><em>seasonal</em> has a flexible mechanism to read data from X-13ARIMA-SEATS. With the <code>series</code> function, it is possible to extract any output that can be generated by X-13ARIMA-SEATS. For example, the following command returns the forecasts of the ARIMA model as a time series:</p>
<div class="cell">
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">AirPassengers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/series.html">series</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"forecast.forecasts"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
</section><section id="graphical-user-interface" class="level2"><h2 class="anchored" data-anchor-id="graphical-user-interface">Graphical user interface</h2>
<p>The <em>seasonalview</em> package provides a graphical user interface to explore the results of the seasonal adjustment. Use the <code><a href="https://rdrr.io/pkg/seasonal/man/view.html">view()</a></code> function to open it:</p>
<div class="cell">
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/view.html">view</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-10-21-seasonal-1.10/seasonalview.png" class="img-fluid figure-img"></p>
<figcaption>Seasonalview GUI</figcaption></figure>
</div>
<p>This interface allows for interactive exploration and adjustment of seasonal models, making it easier to fine-tune your seasonal adjustments and visualize the results.</p>
</section><section id="more-information" class="level2"><h2 class="anchored" data-anchor-id="more-information">More information</h2>
<p>For a more detailed introduction, check our <a href="https://doi.org/10.18637/jss.v087.i11">article in the <em>Journal of Statistical Software</em></a> or visit <a href="http://www.seasonal.website">the package website</a>. The package website also allows you to upload your own data and explore the results interactively.</p>
<p>You can report bugs, ask questions, or contribute to the development on our <a href="https://github.com/christophsax/seasonal">GitHub repository</a>. Thanks for using <em>seasonal</em>!</p>


</section> ]]></description>
  <category>R</category>
  <category>time-series</category>
  <guid>https://blog.cynkra.com/posts/2024-10-21-seasonal-1.10/</guid>
  <pubDate>Mon, 21 Oct 2024 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2024-10-21-seasonal-1.10/seasonalview.png" medium="image" type="image/png" height="100" width="144"/>
</item>
<item>
  <title>Introducing blockr: a no-code dashboard builder for R</title>
  <dc:creator>David Granjon</dc:creator>
  <link>https://blog.cynkra.com/posts/2024-09-16-blockr/</link>
  <description><![CDATA[ <div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://avatars.githubusercontent.com/u/145758851?s=400&amp;u=1545a34095e8e84f5cb2b292b1e900df59ba7239&amp;v=4.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:25.0%"></p>
</figure>
</div>
<p>Since 2023, <a href="https://www.bms.com/">BristolMyersSquibb</a>, the Y <a href="https://the-y-company.com/">company</a> and <a href="https://cynkra.com">cynkra</a> have teamed up to develop a novel <strong>no-code</strong> solution for R.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr">blockr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'blockr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:graphics':

    layout</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pracma</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
<section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>blockr is an R package designed to democratize <strong>data analysis</strong> by providing a <strong>flexible</strong>, <strong>intuitive</strong>, and <strong>code-free</strong> approach to building data pipelines. It has 2 main user targets:</p>
<ol type="1">
<li>On the one hand, it empowers <strong>non technical</strong> users to create insightful data workflows using <strong>pre-built</strong> blocks that can be easily connected, all without writing a single line of code.</li>
<li>On the other hand, it provides developers with a set of tools to seamlessly create new blocks, thereby enhancing the entire framework and fostering <strong>collaboration</strong> within organizations teams.</li>
</ol>
<p>blockr is data <strong>agnostic</strong>, meaning it can work with any kind of dataset, that is pharmaceutical data or sport analytics data. It builds on top of <a href="https://shiny.posit.co/">shiny</a> to ensure real time feedback to any data change. Finally, it allows to export code to create <strong>reproducible</strong> data analysis.</p>
</section><section id="getting-started" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<section id="as-a-simple-user" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="as-a-simple-user">As a simple user</h3>
<p>As a simple user, you’re not expected to write any single line of code to use blockr. You can use the below kitchen sink to get started. This example is based on the palmer penguins data and running a single stack with 3 blocks: the first block to select the data, another one to create the plot and then add the points to it.</p>
<p>blockr has a its own <strong>validation</strong> system. For instance, using the below example, you can try to press return on the first block select box (penguins is the selected default). You’ll notice an immediate feedback message. A global message is displayed in the block upper middle part: “1 error(s) found in this block”. You get more detailed mesages next to the faulty input(s): “selected value(s) not among provided choices”. You can repeat the same experience with the last plot layer block, by emptying the color and shape select inputs. Error messages can accumulate.</p>
<p>You can dynamically add blocks to a current <strong>stack</strong>, that gathers a set of related blocks. You can think a stack as a data analysis <strong>recipe</strong> as in cooking, where blocks are instructions. To add a new block, you can click on the <code>+</code> icon on the stack top right corner. This opens a sidebar on the left side, where one may search for blocks that are compatible with the current state of the pipeline. With an empty stack, only entry point blocks are suggested, so you can import data. Then, after clicking on the block, the suggestion list changes so you can, for instance, filter data or select only a subset of columns, and much more.</p>
<div class="column-page">
<pre class="shinylive-r" data-engine="r"><code>#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
webr::install("blockr", repos = c("https://bristolmyerssquibb.github.io/webr-repos", "https://repo.r-wasm.org"))

library(blockr)
library(palmerpenguins)
library(ggplot2)

new_ggplot_block &lt;- function(col_x = character(), col_y = character(), ...) {

  data_cols &lt;- function(data) colnames(data)

  new_block(
    fields = list(
      x = new_select_field(col_x, data_cols, type = "name"),
      y = new_select_field(col_y, data_cols, type = "name")
    ),
    expr = quote(
      ggplot(mapping = aes(x = .(x), y = .(y)))
    ),
    class = c("ggplot_block", "plot_block"),
    ...
  )
}

new_geompoint_block &lt;- function(color = character(), shape = character(), ...) {

  data_cols &lt;- function(data) colnames(data$data)

  new_block(
    fields = list(
      color = new_select_field(color, data_cols, type = "name"),
      shape = new_select_field(shape, data_cols, type = "name")
    ),
    expr = quote(
      geom_point(aes(color = .(color), shape = .(shape)), size = 2)
    ),
    class = c("geompoint_block", "plot_layer_block", "plot_block"),
    ...
  )
}

stack &lt;- new_stack(
  data_block = new_dataset_block("penguins", "palmerpenguins"),
  plot_block = new_ggplot_block("flipper_length_mm", "body_mass_g"),
  layer_block = new_geompoint_block("species", "species")
)
serve_stack(stack)</code></pre>
</div>
<section id="toward-more-complex-analysis" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="toward-more-complex-analysis">Toward more complex analysis</h4>
<p>Let’s consider this <a href="https://www.kaggle.com/datasets/heesoo37/120-years-of-olympic-history-athletes-and-results?select=athlete_events.csv">dataset</a>, which contains 120 years of olympics athletes data until Rio in 2016. In the below kitchen sink, we first add an upload block:</p>
<ol type="1">
<li>Download the <a href="https://www.kaggle.com/datasets/heesoo37/120-years-of-olympic-history-athletes-and-results?select=athlete_events.csv">dataset</a> file locally.</li>
<li>CLick on <code>Add stack</code>.</li>
<li>Click on the stack <code>+</code> button and search for <code>browser</code>, then select the <code>new_filesbrowser_block</code>.</li>
<li>Uncollapse the stack by click on the top right arrow icon. This makes the upload block file input visible.</li>
<li>Click on <code>File select</code> and select the downloaded file at step 1 (<code>athlete_events.csv</code>).</li>
<li>As we obtain a csv file, we must parse it with a <code>new_csv_block</code>. Repeat step 3 to add the <code>new_csv_block</code>. The table is <code>271116</code> rows and <code>15</code> columns.</li>
<li>Add a <code>new_filter_block</code> and select <code>Sex</code> as column and then <code>F</code> in the values input. We leave the comparison to <code>==</code> and click on the <code>Run</code> button. Notice we now have 74522 rows.</li>
<li>Add a <code>new_mutate_block</code> with the following expression: <code>birth_year = Year - Age</code> (this gives us an approximate birth year). Click on submit.</li>
</ol>
<p>From now on, we leave the first stack as is and will reuse it in other stacks. We want to display the average height distribution for female athletes. Let’s do it below.</p>
<ol start="9" type="1">
<li>Create a new stack by clicking on <code>Add stack</code>.</li>
<li>Add it a <code>new_result_block</code>. This allows to import the data from the first stack (and potentially any stack from the dashboard). If you don’t see any data, select another stack name from the dropdown menu.</li>
<li>Add a <code>new_ggplot_block</code>, leave <code>x</code> as default function and select <code>Height</code> as variable in the columns input.</li>
<li>Add a <code>new_geomhistogram_block</code>. Now we have our distribution plot.</li>
</ol>
<p>Alternatively, you could remove the 2 plot blocks and add a <code>new_summarize_block</code> using <code>mean</code> as function and <code>Height</code> as column (result: 168 cm).</p>
<p>In the following, we create a look-up table to be able to retrieve the athlete names based on their <code>ID</code>.</p>
<ol start="13" type="1">
<li>Create a new stack.</li>
<li>Add a result block to import data from the very first stack.</li>
<li>Add a <code>new_select_block</code> and only select <code>ID</code>, <code>Name</code>, <code>birth_year</code>, <code>Team</code> and <code>Sport</code> as columns.</li>
</ol>
<p>Our goal is now to find which athlete did 2 or more different sports.</p>
<ol start="16" type="1">
<li>Create a new stack.</li>
<li>Add a result block to import data from the very first stack.</li>
<li>Add a <code>new_filter_block</code> , select <code>Medal</code> as column, <code>!=</code> as comparison operator and leave the value empty. Click on run, which will only get athletes with medals.</li>
<li>Add a <code>new_group_by_block</code>, grouping by <code>ID</code> (as some athletes have the same name).</li>
<li>Add a <code>new_summarize_block</code> by choising the function <code>n_distinct</code> applied on the <code>Sport</code> columns.</li>
<li>Add a <code>new_filter_block</code> , select <code>N_DISTINCT</code> as column, <code>&gt;=</code> as comparison operator and set the value to 2. Click on run. This gives us the athletes that are doing 2 sports or more.</li>
<li>Add a <code>new_join_block</code>. Select <code>left_join</code> as join function, select the third stack (lookup table) as join table and <code>ID</code> as column.</li>
<li>Add a <code>new_arrange_block</code> for the <code>birth_year</code> column.</li>
</ol>
<p>As a conclusion, Hjrdis Viktoria Tpel (1904) was the first recorded athlete to compete in 2 different sports, swimming and diving for Sweden. Lauryn Chenet Williams (1984) is the latest for US with Athletics and Bobsleigh. It’s actually quite amazing to see people competing in two quite unrelated sports like swimming and handbain the case of Roswitha Krause.</p>
<div class="column-screen-inset">
<pre class="shinylive-r" data-engine="r"><code>#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
webr::install("blockr", repos = c("https://bristolmyerssquibb.github.io/webr-repos", "https://repo.r-wasm.org"))
webr::install("blockr.ggplot2", repos = c("https://bristolmyerssquibb.github.io/webr-repos", "https://repo.r-wasm.org"))

library(blockr)
library(blockr.ggplot2)

options(shiny.maxRequestSize = 100*1024^2)
do.call(set_workspace, args = list(title = "My workspace"))
serve_workspace(clear = FALSE)</code></pre>
</div>
<p>As an end-user, you are not supposed to write code. As such, if you think anything is missing, you can open an issue <a href="https://github.com/BristolMyersSquibb/blockr/issues">here</a>, or ask any developer you are working with to create new blocks. This leads us to the second part of this blog post … How to use blockr as a developers?</p>
</section></section><section id="as-a-developer" class="level3"><h3 class="anchored" data-anchor-id="as-a-developer">As a developer</h3>
<p>How to install it:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pak</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://pak.r-lib.org/reference/pak.html">pak</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BristolMyersSquibb/blockr"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>blockr can’t provide any single data manipulation or visualization block. That’s the reason why we made it easily <strong>extensible</strong>. You can get an introduction to blockr for developers <a href="https://bristolmyerssquibb.github.io/blockr/articles/blockr.html#blockr-for-developers">here</a>.</p>
<p>In the following, we create an ordinary differential equations solver block using the pracma package. We choose the Lorenz <a href="https://en.wikipedia.org/wiki/Lorenz_system">attractor</a>. With R, equations may be written as:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lorenz</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">t</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parms</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parms</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>,</span>
<span>    Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parms</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">parms</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>where <code>t</code> is the time, <code>y</code> a vector of solutions and <code>params</code> the various parameters. If you are familiar with <a href="https://cran.r-project.org/web/packages/deSolve/index.html">deSolve</a>, equations are defined with similar functions. For this blog post, we selected pracma as deSolve does not run in shinylive, so you could not see the embedded demonstration.</p>
</section><section id="add-interactivity-with-the-fields" class="level3"><h3 class="anchored" data-anchor-id="add-interactivity-with-the-fields">Add interactivity with the <strong>fields</strong>
</h3>
<p>We want to add interactivity on the 3 different parameters. Hence, we create our new block function with 3 <strong>fields</strong> inside a list. Since the expected values are numbers, we leverage the <code>new_numeric_field</code>. Parameters are only explicitly shown for the first field:</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">new_ode_block</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">...</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fields</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, max <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># TBD</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ...</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>As you may imagine, these fields are subsequently translated into shiny inputs, that is <code>numericInput</code> in our example. If you face a situation where you need to implement a custom field, not included in blockr, you can read this <a href="https://bristolmyerssquibb.github.io/blockr/articles/new-field.html">vignette</a>.</p>
</section><section id="create-the-block-expression" class="level3"><h3 class="anchored" data-anchor-id="create-the-block-expression">Create the block expression</h3>
<p>As next step, we <strong>instantiate</strong> our block with the <code>new_block</code> blockr <strong>constructor</strong>:</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">new_block</span>(</span>
<span id="cb10-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fields =</span> fields,</span>
<span id="cb10-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quote</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>EXPR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>),</span>
<span id="cb10-4">  ...,</span>
<span id="cb10-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">class =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>CLASSES<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>,</span>
<span id="cb10-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">submit =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb10-7">)</span></code></pre></div>
<p>A block is composed of fields, a quoted <strong>expression</strong> which involved fields (to delay the evaluation), somes <strong>classes</strong> which control the block behavior, and extra parameters passed with <code>...</code>. Finally, <code>submit</code> allows to delay the block evaluation by requiring the user to click on a submit button (FALSE by default). This prevents from triggering unwanted intensive computations.</p>
<p>In our example, the expression calls the <code>ode45</code> function. Notice the usage of <code>substitute</code> to inject the <code>lorenz</code> function within the expression. This is necessary since <code>lorenz</code> is defined outside of the expression, and using <code>quote</code> would fail. Fields are invoked with <code>.(field_name)</code>, a rather strange notation, required by <code>bquote</code> to process the expression. It is not mandory to understand this technical underlying detail, but this standard must be respected. You may also notice that some parameters like the initial conditions <code>y0</code> or time values are hardcoded. We leave the reader to transform them into fields, as an exercise:</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/new_block.html">new_block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  fields <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fields</span>,</span>
<span>  expr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/substitute.html">substitute</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/pracma/man/ode.html">ode45</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fun</span>,</span>
<span>        y0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        t0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>        tfinal <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span>        parms <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">a</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">b</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">c</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>fun <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lorenz</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># TBD</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</section><section id="add-the-right-classes" class="level3"><h3 class="anchored" data-anchor-id="add-the-right-classes">Add the right classes</h3>
<p>We give our block 2 classes, namely <code>ode_block</code> and <code>data_block</code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">new_ode_block</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">...</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fields</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/numeric_field.html">new_numeric_field</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">28</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/new_block.html">new_block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    fields <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fields</span>,</span>
<span>    expr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/substitute.html">substitute</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/pracma/man/ode.html">ode45</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fun</span>,</span>
<span>          y0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>X <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, Y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, Z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          t0 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>          tfinal <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span>          parms <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">a</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">b</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">c</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>fun <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lorenz</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">...</span>,</span>
<span>    class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ode_block"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_block"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</details>
</div>
<p>As explained earlier, they are required to control the block behavior, as blockr is build with <a href="https://adv-r.hadley.nz/s3.html">S3</a>. For instance, <code>data_block</code> have a specific <strong>evaluation</strong> method, to calculate the expression:</p>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">evaluate_block.data_block</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">x</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">...</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/stopifnot.html">stopifnot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/dots.html">...length</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0L</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/generate_code.html">generate_code</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">x</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/environment.html">new.env</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>where <code>generate_code</code> processes the block code. <strong>Data</strong> blocks are considered as entry point blocks, as opposed to <strong>transformation</strong> blocks, that operate on data. Therefore, you may easily understand that the evaluation method for a transform block requires to pass the data from the previous block with <code>%&gt;%</code>:</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">evaluate_block.block</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">x</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">...</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/stopifnot.html">stopifnot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/dots.html">...length</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0L</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/substitute.html">substitute</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">expr</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>expr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/generate_code.html">generate_code</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">x</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>If you want to build a plot block and plot layers blocks, you would have to design a specific evaluate method, that accounts for the <code>+</code> operator required by ggplot2. To learn more about how to create a plot block, you can read this <a href="https://bristolmyerssquibb.github.io/blockr/articles/plot-block.html">article</a>.</p>
</section><section id="demo" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="demo">Demo</h3>
<div class="column-screen-inset">
<pre class="shinylive-r" data-engine="r"><code>#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer, editor]
#| column: screen-inset-shaded
#| viewerHeight: 800
webr::install("blockr", repos = c("https://bristolmyerssquibb.github.io/webr-repos", "https://repo.r-wasm.org"))
webr::install("blockr.ggplot2", repos = c("https://bristolmyerssquibb.github.io/webr-repos", "https://repo.r-wasm.org"))

library(blockr)
library(pracma)
library(blockr.ggplot2)

lorenz &lt;- function(t, y, parms) {
  c(
    X = parms[1] * y[1] + y[2] * y[3],
    Y = parms[2] * (y[2] - y[3]),
    Z = -y[1] * y[2] + parms[3] * y[2] - y[3]
  )
}

new_ode_block &lt;- function(...) {
  fields &lt;- list(
    a = new_numeric_field(-8 / 3, -10, 20),
    b = new_numeric_field(-10, -50, 100),
    c = new_numeric_field(28, 1, 100)
  )

  new_block(
    fields = fields,
    expr = substitute(
      as.data.frame(
        ode45(
          fun,
          y0 = c(X = 1, Y = 1, Z = 1),
          t0 = 0,
          tfinal = 100,
          parms = c(.(a), .(b), .(c))
        )
      ),
      list(fun = lorenz)
    ),
    ...,
    class = c("ode_block", "data_block")
  )
}

stack &lt;- new_stack(
  new_ode_block,
  new_ggplot_block(
    func = c("x", "y"),
    default_columns = c("y.1", "y.2")
  ),
  new_geompoint_block
)
serve_stack(stack)</code></pre>
</div>
</section><section id="packaging-new-blocks-the-registry" class="level3"><h3 class="anchored" data-anchor-id="packaging-new-blocks-the-registry">Packaging new blocks: the registry</h3>
<p>In the above example, we define the block on the fly. However, an other outstanding feature of blockr is the <strong>registry</strong>, which you can see as a blocks <strong>supermarket</strong>. From the R side, the registry is an <strong>environment</strong> that can be extended by developers who bring their own blocks packages:</p>
<div class="cell" data-mermaid-theme="default" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"></figure><p></p>
<div>
<svg aria-roledescription="flowchart-v2" viewbox="-7.5 -8 953.9765625 685" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="672" id="mermaid-figure-1" height="480"><style>#mermaid-figure-1{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-figure-1 .error-icon{fill:#552222;}#mermaid-figure-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-figure-1 .edge-thickness-normal{stroke-width:2px;}#mermaid-figure-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-figure-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-figure-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-figure-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-figure-1 .marker{fill:#333333;stroke:#333333;}#mermaid-figure-1 .marker.cross{stroke:#333333;}#mermaid-figure-1 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-figure-1 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-figure-1 .cluster-label text{fill:#333;}#mermaid-figure-1 .cluster-label span,#mermaid-figure-1 p{color:#333;}#mermaid-figure-1 .label text,#mermaid-figure-1 span,#mermaid-figure-1 p{fill:#333;color:#333;}#mermaid-figure-1 .node rect,#mermaid-figure-1 .node circle,#mermaid-figure-1 .node ellipse,#mermaid-figure-1 .node polygon,#mermaid-figure-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-figure-1 .flowchart-label text{text-anchor:middle;}#mermaid-figure-1 .node .label{text-align:center;}#mermaid-figure-1 .node.clickable{cursor:pointer;}#mermaid-figure-1 .arrowheadPath{fill:#333333;}#mermaid-figure-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-figure-1 .flowchart-link{stroke:#333333;fill:none;}#mermaid-figure-1 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-figure-1 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-figure-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-figure-1 .cluster text{fill:#333;}#mermaid-figure-1 .cluster span,#mermaid-figure-1 p{color:#333;}#mermaid-figure-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-figure-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-figure-1 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="10" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerheight="12" markerwidth="12" markerunits="userSpaceOnUse" refy="5" refx="0" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="11" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5" refx="-1" viewbox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="12" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerheight="11" markerwidth="11" markerunits="userSpaceOnUse" refy="5.2" refx="-1" viewbox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-blockr_custom LE-registry" id="L-blockr_custom-registry-0" d="M324.3125,334.5L332.92578125,334.5C341.5390625,334.5,358.765625,334.5,375.9921875,334.5C393.21875,334.5,410.4453125,334.5,419.05859375,334.5L427.671875,334.5"></path></g><g class="edgeLabels"><g transform="translate(375.9921875, 334.5)" class="edgeLabel"><g transform="translate(-26.6796875, -9)" class="label"><foreignobject height="18" width="53.359375"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">register</span>
</div>
</foreignobject></g></g></g><g class="nodes"><g transform="translate(420.171875, -8)" class="root"><g class="clusters"><g id="registry" class="cluster default flowchart-label"><rect height="669" width="510.3046875" y="8" x="8" ry="0" rx="0" style=""></rect><g transform="translate(233.80859375, 8)" class="cluster-label"><foreignobject height="18" width="58.6875"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Registry</span>
</div>
</foreignobject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-crossEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-filter_reg LE-trash" id="L-filter_reg-trash-0" d="M437.125,66L437.125,71.66666666666667C437.125,77.33333333333333,437.125,88.66666666666667,437.125,140.41666666666666C437.125,192.16666666666666,437.125,284.3333333333333,437.125,330.4166666666667L437.125,376.5"></path></g><g class="edgeLabels"><g transform="translate(437.125, 100)" class="edgeLabel"><g transform="translate(-35.578125, -9)" class="label"><foreignobject height="18" width="71.15625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="edgeLabel">unregister</span>
</div>
</foreignobject></g></g></g><g class="nodes"><g transform="translate(35.5, 126)" class="root"><g class="clusters"><g id="select_reg" class="cluster default flowchart-label"><rect height="518" width="333.5625" y="8" x="8" ry="0" rx="0" style=""></rect><g transform="translate(131.6484375, 8)" class="cluster-label"><foreignobject height="18" width="86.265625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Select block</span>
</div>
</foreignobject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(174.78125, 59.5)" id="flowchart-reg_name-28" class="node default default flowchart-label"><rect height="33" width="150.171875" y="-16.5" x="-75.0859375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-67.5859375, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="135.171875"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Name: select block</span>
</div>
</foreignobject></g></g><g transform="translate(174.78125, 142.5)" id="flowchart-reg_descr-29" class="node default default flowchart-label"><rect height="33" width="279.125" y="-16.5" x="-139.5625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-132.0625, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="264.125"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Description: select columns in a table</span>
</div>
</foreignobject></g></g><g transform="translate(174.78125, 225.5)" id="flowchart-reg_classes-30" class="node default default flowchart-label"><rect height="33" width="283.5625" y="-16.5" x="-141.78125" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-134.28125, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="268.5625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Classes: select_block, tranform_block</span>
</div>
</foreignobject></g></g><g transform="translate(174.78125, 308.5)" id="flowchart-reg_input-31" class="node default default flowchart-label"><rect height="33" width="135.96875" y="-16.5" x="-67.984375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-60.484375, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="120.96875"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Input: data.frame</span>
</div>
</foreignobject></g></g><g transform="translate(174.78125, 391.5)" id="flowchart-reg_output-32" class="node default default flowchart-label"><rect height="33" width="148.40625" y="-16.5" x="-74.203125" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-66.703125, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="133.40625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Output: data.frame</span>
</div>
</foreignobject></g></g><g transform="translate(174.78125, 474.5)" id="flowchart-reg_package-33" class="node default default flowchart-label"><rect height="33" width="128.84375" y="-16.5" x="-64.421875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-56.921875, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="113.84375"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Package: blockr</span>
</div>
</foreignobject></g></g></g></g><g transform="translate(437.125, 49.5)" id="flowchart-filter_reg-34" class="node default default flowchart-label"><rect height="33" width="92.359375" y="-16.5" x="-46.1796875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-38.6796875, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="77.359375"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">Filter block</span>
</div>
</foreignobject></g></g><g transform="translate(437.125, 393)" id="flowchart-trash-35" class="node default default flowchart-label"><rect height="33" width="21.125" y="-16.5" x="-10.5625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-3.0625, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="6.125"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">‘<i class="fa fa-trash"></i>’</span>
</div>
</foreignobject></g></g></g></g><g transform="translate(-7.5, 285)" class="root"><g class="clusters"><g id="blockr_custom" class="cluster default flowchart-label"><rect height="83" width="324.3125" y="8" x="8" ry="0" rx="0" style=""></rect><g transform="translate(96.7734375, 8)" class="cluster-label"><foreignobject height="18" width="146.765625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">your_block_package</span>
</div>
</foreignobject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(94.078125, 49.5)" id="flowchart-new_block1-24" class="node default default flowchart-label"><rect height="33" width="102.15625" y="-16.5" x="-51.078125" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-43.578125, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="87.15625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">New block 1</span>
</div>
</foreignobject></g></g><g transform="translate(246.234375, 49.5)" id="flowchart-new_block2-25" class="node default default flowchart-label"><rect height="33" width="102.15625" y="-16.5" x="-51.078125" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-43.578125, -9)" style="" class="label"><rect></rect><foreignobject height="18" width="87.15625"><div style="display: inline-block; white-space: nowrap;" data-xmlns="http://www.w3.org/1999/xhtml">
<span class="nodeLabel">New block 2</span>
</div>
</foreignobject></g></g></g></g></g></g></g></svg>
</div>
<p></p>
</div>
</div>
</div>
<p>To get an overview of all available blocks within the blockr core package, we call <code>get_registry</code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/get_registry.html">get_registry</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>                 ctor                                  description  category
1       arrange_block                              Arrange columns transform
2           csv_block                           Read a csv dataset    parser
3       dataset_block              Choose a dataset from a package      data
4  filesbrowser_block       Select files on the server file system      data
5        filter_block                       filter rows in a table transform
6      group_by_block                             Group by columns transform
7          head_block               Select n first rows of dataset transform
8          join_block                              Join 2 datasets transform
9          json_block                          Read a json dataset    parser
10       mutate_block                                 Mutate block transform
11          rds_block                           Read a rds dataset    parser
12       result_block Shows result of another stack as data source      data
13       select_block                    select columns in a table transform
14    summarize_block                        summarize data groups transform
15       upload_block                   Upload files from location      data
16          xpt_block                           Read a xpt dataset    parser
                                            classes      input     output
1             arrange_block, transform_block, block data.frame data.frame
2   csv_block, parser_block, transform_block, block     string data.frame
3                  dataset_block, data_block, block       &lt;NA&gt; data.frame
4             filesbrowser_block, data_block, block       &lt;NA&gt;     string
5              filter_block, transform_block, block data.frame data.frame
6            group_by_block, transform_block, block data.frame data.frame
7                head_block, transform_block, block data.frame data.frame
8                join_block, transform_block, block data.frame data.frame
9  json_block, parser_block, transform_block, block     string data.frame
10             mutate_block, transform_block, block data.frame data.frame
11  rds_block, parser_block, transform_block, block     string data.frame
12                  result_block, data_block, block       &lt;NA&gt; data.frame
13             select_block, transform_block, block data.frame data.frame
14          summarize_block, transform_block, block data.frame data.frame
15                  upload_block, data_block, block       &lt;NA&gt;     string
16  xpt_block, parser_block, transform_block, block     string data.frame
   package
1   blockr
2   blockr
3   blockr
4   blockr
5   blockr
6   blockr
7   blockr
8   blockr
9   blockr
10  blockr
11  blockr
12  blockr
13  blockr
14  blockr
15  blockr
16  blockr</code></pre>
</div>
</div>
<p>This function returns a dataframe containing information about blocks such as their constructors, like <code>new_ode_block</code>, the description, the category (data, transform, plot … this is user defined), classes, accepted input, returned output and package.</p>
<p>To register a block we call <code>register_block</code> (or <code>register_blocks</code> for multiple blocks):</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">register_my_blocks</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/available_blocks.html">register_block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    constructor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">new_ode_block</span>,</span>
<span>    name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ode block"</span>,</span>
<span>    description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Computed the Lorent attractor solutions"</span>,</span>
<span>    classes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ode_block"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_block"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    input <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA_character_</span>,</span>
<span>    output <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data.frame"</span>,</span>
<span>    package <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;YOUR_PACKAGE&gt;"</span>,</span>
<span>    category <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># You can register any other blocks here ...</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</details>
</div>
<p>where <code>&lt;YOUR_PACKAGE&gt;</code> must be replaced by your real package name.</p>
<p>Within a <code>zzz.R</code> script, you can ensure to register any block when the package loads with a <strong>hook</strong>:</p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">.onLoad</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">libname</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">pkgname</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register_my_blocks</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>After the registration, you can check whether the registry is updated, by looking at the ode block:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register_my_blocks</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">reg</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://bristolmyerssquibb.github.io/blockr/reference/get_registry.html">get_registry</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">reg</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">reg</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">package</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;YOUR_PACKAGE&gt;"</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>        ctor                             description category
11 ode_block Computed the Lorent attractor solutions     data
                        classes input     output        package
11 ode_block, data_block, block  &lt;NA&gt; data.frame &lt;YOUR_PACKAGE&gt;</code></pre>
</div>
</div>


</section></section> ]]></description>
  <category>R</category>
  <guid>https://blog.cynkra.com/posts/2024-09-16-blockr/</guid>
  <pubDate>Mon, 16 Sep 2024 00:00:00 GMT</pubDate>
  <media:content url="https://avatars.githubusercontent.com/u/145758851?s=400&amp;u=1545a34095e8e84f5cb2b292b1e900df59ba7239&amp;v=4" medium="image"/>
</item>
<item>
  <title>2024 road and para-cycling road world championships: preliminaRy analysis</title>
  <dc:creator>David Granjon</dc:creator>
  <link>https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/</link>
  <description><![CDATA[ <div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/logo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:25.0%"></p>
</figure>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/leaflet/">leaflet</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://www.rayshader.com">rayshader</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ggrgl</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/ddsjoberg/gtsummary">gtsummary</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/dmurdoch/rgl">rgl</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>rgl.useNULL <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setupKnitr</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>autoprint <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
<p>From Sept 21 to Sept 29, Zurich will welcome the 2024 road and para-cycling road world <a href="https://zurich2024.com/en/">championships</a>. To mark the occasion, my friends and I went to do the 2 first loops (“only” 140km, 1700m elevation) of the Elite Mens circuit that will start from <a href="https://zurich2024.com/en/rennstrecken/winterthur-zurich/">Winterthur</a> on Sept 29. 273km and 4470m of pure pleasure! I am not sure whether riders will have time to enjoy the view. At least I hope they have a better weather than us.</p>
<section id="circuit-overview" class="level2"><h2 class="anchored" data-anchor-id="circuit-overview">Circuit overview</h2>
<section id="get-the-gpx-file" class="level3"><h3 class="anchored" data-anchor-id="get-the-gpx-file">Get the GPX file</h3>
<p>The road circuit is available as <strong>GPX</strong> <a href="https://zurich2024.com/wp-content/uploads/2024/08/GPX-22-Winterthur-Zurich-1.gpx">format</a>, which can be imported by any route planner like Komoot or Strava … or with R :).</p>
<p>There are various way to read such format in R, as shown in this other <a href="https://www.appsilon.com/post/r-gpx-files">article</a>. For this blog post, we leverage the <code>gpx</code> <a href="https://www.rdocumentation.org/packages/tmaptools/versions/2.0/topics/read_GPX">package</a>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GPX-22-Winterthur-Zurich-1.gpx"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ routes   :List of 1
  ..$ :'data.frame':    10687 obs. of  5 variables:
  .. ..$ Elevation : num [1:10687] 438 438 438 438 438 ...
  .. ..$ Time      : POSIXct[1:10687], format: "2023-11-03 06:08:27" "2023-11-03 06:08:29" ...
  .. ..$ Latitude  : num [1:10687] 47.5 47.5 47.5 47.5 47.5 ...
  .. ..$ Longitude : num [1:10687] 8.72 8.72 8.72 8.72 8.72 ...
  .. ..$ extensions: logi [1:10687] NA NA NA NA NA NA ...
 $ tracks   :List of 1
  ..$ :'data.frame':    0 obs. of  4 variables:
  .. ..$ Elevation: logi(0) 
  .. ..$ Time     : logi(0) 
  .. ..$ Latitude : logi(0) 
  .. ..$ Longitude: logi(0) 
 $ waypoints:'data.frame':  9 obs. of  6 variables:
  ..$ Elevation  : num [1:9] 464 411 411 411 411 ...
  ..$ Time       : POSIXct[1:9], format: NA NA ...
  ..$ Latitude   : num [1:9] 47.5 47.4 47.4 47.4 47.4 ...
  ..$ Longitude  : num [1:9] 8.76 8.55 8.55 8.55 8.55 ...
  ..$ Name       : chr [1:9] "km 0" "Info" "Info" "Info" ...
  ..$ Description: chr [1:9] NA NA NA NA ...</code></pre>
</div>
</div>
<p>We obtain a list containing 3 dataframes, namely <code>routes</code>, <code>tracks</code> and <code>waypoints</code>.</p>
</section><section id="visualize-the-route" class="level3"><h3 class="anchored" data-anchor-id="visualize-the-route">Visualize the route</h3>
<p>In the following, we can visualize these data on an <strong>interactive map</strong>. To do so, I chose the <code>leaflet</code> package. First, we pass the data to <code>leaflet()</code>, then we select a <strong>map provider</strong> with <code>addTiles()</code>. I like to use the a rather light one as I want the user to focus on the route trace and not on any single mountain or village. Therefore, I went for the <code>CartoDB.Positron</code> tiles, which you can test <a href="https://leaflet-extras.github.io/leaflet-providers/preview/">here</a>. The trace is injected with <code>addPolylines</code>, passing the <code>Latitude</code> and <code>Longitude</code> columns of our dataset, as well as few styling parameters such as color, line weight and opacity.</p>
<p>Then, we add the starting point and end point of the race available in <code>zch_gpx$waypoints</code>. Note that since the last loop goes 7 times around the finish line, the GPS coordinates are duplicated so we only extract <code>zch_gpx$waypoints[1, ]</code> and <code>zch_gpx$waypoints[2, ]</code>. Those data are given to the <code>addCircleMarkers()</code> function, which allows to pass extra information like popups or labels. Finally, I wanted to highlight the 4 most significant climbs of this tour:</p>
<pre><code>- Buch am Irchel: 4.83km at 4.2%.
- Kyburg: 1.28km at 10.3%.
- Binz: 3.7km at 4.4%.
- Witikon: 2.63km at 5.3%.</code></pre>
<p>I first had to locate the exact coordinates of each climb (the marker is put at the top). That’s the reason why you can see a few JavaScript lines at the end of the script. This is a helper passed to <code><a href="https://rdrr.io/pkg/htmlwidgets/man/onRender.html">htmlwidgets::onRender()</a></code>, which allowed me to click on the map and get the coordinates in an alert window.</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> el<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> data) {</span>
<span id="cb5-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> map <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">this</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-3">    map<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'click'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(e) {</span>
<span id="cb5-4">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> coord <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> e<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">latlng</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-5">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> coord<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-6">        <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">var</span> lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> coord<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lng</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-7">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">alert</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'You clicked the map at latitude: '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">' and       longitude: '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> lng)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-8">    })<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb5-9">}</span></code></pre></div>
<p>I then copied the results and passed them to <code>addMarkers()</code>. I faced some challenges while trying to get the markers render well when zooming in and out. Be careful to fix the X and Y anchors and specify the size of the icon you use:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">icon</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    iconUrl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.vanuatubeachbar.com/wp-content/uploadleaflet-maps-marker-icons/mountains.png"</span>,</span>
<span>    iconWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span>    iconHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span>    iconAnchorX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>    iconAnchorY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>The above setting ensures that at any level of zoom, the icon stays on the trace.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addTiles</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        urlTemplate <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"</span>,</span>
<span>        attribution <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors &amp;copy; &lt;a href="https://carto.com/attributions"&gt;CARTO&lt;/a&gt;'</span>,</span>
<span>        options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tileOptions</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            subdomains <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"abcd"</span>,</span>
<span>            maxZoom <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addPolylines</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#000000"</span>, opacity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">waypoints</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>, lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#3eaf15"</span>, opacity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, radius <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Start of race"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addCircleMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">waypoints</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>, lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e73939"</span>, opacity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, weight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, radius <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"End of race"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.64389380440116</span>,</span>
<span>        lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">47.5413932128899</span>,</span>
<span>        icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            iconUrl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png"</span>,</span>
<span>            iconWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span>            iconHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span>            iconAnchorX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>            iconAnchorY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Buch am Irchel: 4.83km at 4.2% **"</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.743660245090725</span>,</span>
<span>        lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">47.45665840019784</span>,</span>
<span>        icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            iconUrl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png"</span>,</span>
<span>            iconWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span>            iconHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span>            iconAnchorX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>            iconAnchorY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Kyburg: 1.28km at 10.3% ****"</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.624014738015832</span>,</span>
<span>        lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">47.351512429613024</span>,</span>
<span>        icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            iconUrl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png"</span>,</span>
<span>            iconWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span>            iconHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span>            iconAnchorX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>            iconAnchorY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Maur-Binz: 3.7km at 4.4% **"</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        lng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.607488349080088</span>,</span>
<span>        lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">47.36219723777833</span>,</span>
<span>        icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            iconUrl <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png"</span>,</span>
<span>            iconWidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span>            iconHeight <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span>            iconAnchorX <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>            iconAnchorY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ZurichbergStrasse/Witikon: 2.63km at 5.3% **"</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">htmlwidgets</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/htmlwidgets/man/onRender.html">onRender</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"function(x, el, data) {</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        var map = this;</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        map.on('click', function(e) {</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        var coord = e.latlng;</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        var lat = coord.lat;</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        var lng = coord.lng;</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        console.log('You clicked the map at latitude: ' + lat + ' and       longitude: ' + lng);</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        });</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">      }"</span>  </span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-60f723b3a636572c3262" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-60f723b3a636572c3262">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",null,null,{"minZoom":0,"maxZoom":20,"tileSize":256,"subdomains":"abcd","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap<\/a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO<\/a>"}]},{"method":"addPolylines","args":[[[[{"lng":[8.71875,8.718903299999999,8.719056699999999,8.71921,8.71937,8.719530000000001,8.71969,8.7198533,8.7200167,8.720179999999999,8.72024,8.72057,8.7209,8.721209999999999,8.72152,8.72189,8.72226,8.722635,8.72301,8.72336,8.723710000000001,8.723850000000001,8.724069999999999,8.72433,8.724539999999999,8.72485,8.725160000000001,8.72547,8.72578,8.72601,8.726385000000001,8.726760000000001,8.727130000000001,8.727499999999999,8.7277,8.72794,8.72837,8.7288,8.729229999999999,8.7296633,8.730096700000001,8.73053,8.73071,8.731109999999999,8.73151,8.731909999999999,8.73207,8.732189999999999,8.73246,8.73273,8.733000000000001,8.73312,8.733129999999999,8.73301,8.73307,8.73306,8.73316,8.73326,8.733364999999999,8.733470000000001,8.733495,8.73352,8.7339067,8.734293299999999,8.734680000000001,8.73507,8.73546,8.735849999999999,8.736236699999999,8.7366233,8.73701,8.737399999999999,8.73779,8.73818,8.7385267,8.7388733,8.73922,8.739570000000001,8.73992,8.740270000000001,8.7406167,8.740963300000001,8.74131,8.74165,8.741989999999999,8.742290000000001,8.74259,8.74306,8.74349,8.7437833,8.744076700000001,8.74437,8.74466,8.744949999999999,8.745240000000001,8.74545,8.745810000000001,8.746259999999999,8.746560000000001,8.74686,8.747195,8.747529999999999,8.747949999999999,8.748415,8.74888,8.749185000000001,8.74949,8.749795000000001,8.7501,8.750444999999999,8.75079,8.751083299999999,8.7513767,8.751670000000001,8.7519633,8.7522567,8.752549999999999,8.7528433,8.753136700000001,8.75343,8.75372,8.754009999999999,8.754300000000001,8.754619999999999,8.75494,8.755089999999999,8.7553333,8.755576700000001,8.75582,8.75606,8.7563,8.756539999999999,8.756819999999999,8.757153300000001,8.757486699999999,8.757820000000001,8.758096699999999,8.758373300000001,8.758649999999999,8.75895,8.75928,8.759425,8.75957,8.759684999999999,8.7598,8.75986,8.759880000000001,8.7599,8.759925000000001,8.75995,8.759969999999999,8.75999,8.759790000000001,8.759270000000001,8.759080000000001,8.758620000000001,8.758365,8.75811,8.757960000000001,8.757910000000001,8.7578833,8.7578567,8.75783,8.757803300000001,8.757776700000001,8.75775,8.7577233,8.7576967,8.757669999999999,8.757636700000001,8.7576033,8.757569999999999,8.7575333,8.757496700000001,8.75746,8.7574267,8.7573933,8.75736,8.757365,8.75737,8.75741,8.75745,8.757490000000001,8.757529999999999,8.757569999999999,8.75761,8.75765,8.75769,8.75773,8.757776700000001,8.7578233,8.75787,8.757916700000001,8.7579633,8.758010000000001,8.758056699999999,8.7581033,8.758150000000001,8.758150000000001,8.758236699999999,8.758323300000001,8.75841,8.7584933,8.758576700000001,8.758660000000001,8.75872,8.75873,8.75874,8.758733299999999,8.7587267,8.75872,8.75868,8.758570000000001,8.75844,8.75831,8.75816,8.758010000000001,8.75784,8.757669999999999,8.75751,8.75714,8.756905,8.75667,8.756343299999999,8.7560167,8.75569,8.755363300000001,8.7550367,8.754709999999999,8.754383300000001,8.7540567,8.753729999999999,8.7534033,8.753076699999999,8.752750000000001,8.7524233,8.752096699999999,8.75177,8.7515,8.75123,8.750959999999999,8.750769999999999,8.750435,8.7501,8.749745000000001,8.74939,8.749034999999999,8.74868,8.74835,8.74802,8.74769,8.74737,8.74705,8.746729999999999,8.7464133,8.746096700000001,8.74578,8.745426699999999,8.7450733,8.744719999999999,8.74432,8.743919999999999,8.743525,8.743130000000001,8.742735,8.74234,8.742065,8.74179,8.74132,8.74105,8.740780000000001,8.740410000000001,8.7401733,8.739936699999999,8.739699999999999,8.739466699999999,8.7392333,8.739000000000001,8.738709999999999,8.73842,8.738065000000001,8.73771,8.73751,8.736940000000001,8.736499999999999,8.736123299999999,8.7357467,8.73537,8.7349967,8.734623300000001,8.734249999999999,8.734109999999999,8.733930000000001,8.73367,8.73352,8.73305,8.732710000000001,8.73237,8.73203,8.73169,8.731350000000001,8.731009999999999,8.73067,8.73033,8.729990000000001,8.72993,8.729839999999999,8.72977,8.729760000000001,8.729369999999999,8.72898,8.72846,8.7281067,8.7277533,8.727399999999999,8.727046700000001,8.726693300000001,8.72634,8.7259867,8.7256333,8.72528,8.725210000000001,8.724880000000001,8.724729999999999,8.724275,8.72382,8.723364999999999,8.722910000000001,8.722455,8.722,8.721634999999999,8.721270000000001,8.72092,8.72054,8.72016,8.719793299999999,8.7194267,8.719060000000001,8.7186933,8.7183267,8.71796,8.717593300000001,8.717226699999999,8.71686,8.71663,8.71646,8.716189999999999,8.71583,8.715479999999999,8.71513,8.714779999999999,8.71443,8.714079999999999,8.71373,8.71353,8.71322,8.712910000000001,8.7126,8.712125,8.711650000000001,8.711175000000001,8.710699999999999,8.710395,8.710089999999999,8.709759999999999,8.709680000000001,8.709619999999999,8.70965,8.709680000000001,8.70973,8.70978,8.70983,8.70987,8.709910000000001,8.709949999999999,8.7099867,8.7100233,8.71006,8.710096699999999,8.710133300000001,8.71017,8.710206700000001,8.7102433,8.710279999999999,8.71031,8.71034,8.710369999999999,8.71036,8.710319999999999,8.7102833,8.710246700000001,8.71021,8.710173299999999,8.7101367,8.710100000000001,8.7100633,8.7100267,8.709989999999999,8.7099533,8.709916700000001,8.70988,8.70998,8.710000000000001,8.70998,8.709949999999999,8.70983,8.709793299999999,8.7097567,8.709720000000001,8.709686700000001,8.709653299999999,8.709619999999999,8.709519999999999,8.709440000000001,8.70931,8.70905,8.70879,8.70865,8.70851,8.708449999999999,8.70843,8.708449999999999,8.70853,8.708640000000001,8.708930000000001,8.70922,8.709515,8.709809999999999,8.71001,8.709849999999999,8.709775,8.7097,8.709580000000001,8.709463299999999,8.709346699999999,8.70923,8.7091133,8.7089967,8.708880000000001,8.70872,8.708629999999999,8.708545000000001,8.708460000000001,8.70838,8.708299999999999,8.708225000000001,8.70815,8.708069999999999,8.707990000000001,8.707990000000001,8.70815,8.708310000000001,8.708455000000001,8.708600000000001,8.708740000000001,8.708880000000001,8.709009999999999,8.709070000000001,8.70913,8.70919,8.7092533,8.7093167,8.709379999999999,8.70941,8.709440000000001,8.70941,8.70932,8.70917,8.709020000000001,8.708869999999999,8.708780000000001,8.708745,8.70871,8.70867,8.708629999999999,8.70862,8.70861,8.7087,8.70886,8.709059999999999,8.70926,8.70946,8.70966,8.709865000000001,8.71007,8.71021,8.71035,8.71049,8.7106333,8.7107767,8.71092,8.711136700000001,8.711353300000001,8.71157,8.71167,8.711706700000001,8.7117433,8.711779999999999,8.711880000000001,8.712109999999999,8.712339999999999,8.712569999999999,8.712759999999999,8.712949999999999,8.713139999999999,8.713329999999999,8.713509999999999,8.71367,8.71335,8.712815000000001,8.71228,8.711745000000001,8.711209999999999,8.7108533,8.7104967,8.710140000000001,8.709705,8.70927,8.708835000000001,8.708399999999999,8.70792,8.707503300000001,8.7070867,8.706670000000001,8.706250000000001,8.705830000000001,8.705410000000001,8.7050067,8.7046033,8.7042,8.7037967,8.7033933,8.70299,8.70261,8.70223,8.70185,8.70147,8.701090000000001,8.700710000000001,8.70031,8.699909999999999,8.69951,8.699109999999999,8.69871,8.698309999999999,8.6979133,8.6975167,8.69712,8.69683,8.696569999999999,8.696289999999999,8.695869999999999,8.695449999999999,8.695130000000001,8.69481,8.694509999999999,8.694140000000001,8.693770000000001,8.69333,8.69289,8.692449999999999,8.692119999999999,8.691789999999999,8.691459999999999,8.691129999999999,8.6907967,8.690463299999999,8.69013,8.689763299999999,8.6893967,8.689030000000001,8.68876,8.68859,8.688330000000001,8.68812,8.68798,8.687939999999999,8.68792,8.68797,8.68806,8.68815,8.68825,8.68849,8.688280000000001,8.688179999999999,8.688079999999999,8.688015,8.687950000000001,8.687900000000001,8.687849999999999,8.68783,8.687810000000001,8.687799999999999,8.68779,8.68778,8.687754999999999,8.68773,8.687665000000001,8.6876,8.687530000000001,8.68746,8.687340000000001,8.687225,8.687110000000001,8.686945,8.686780000000001,8.68656,8.68634,8.685985000000001,8.68563,8.685309999999999,8.684990000000001,8.684675,8.68436,8.683949999999999,8.683540000000001,8.68313,8.68272,8.68239,8.6819867,8.6815833,8.681179999999999,8.680875,8.680569999999999,8.680265,8.679959999999999,8.679600000000001,8.67924,8.67872,8.678430000000001,8.678140000000001,8.6777,8.67723,8.676855,8.67648,8.67619,8.67595,8.67571,8.67543,8.67515,8.674855000000001,8.67456,8.67427,8.67398,8.67375,8.67352,8.67329,8.67306,8.672829999999999,8.672599999999999,8.672370000000001,8.672140000000001,8.67191,8.67159,8.67127,8.670820000000001,8.670360000000001,8.67,8.66954,8.66921,8.66887,8.668530000000001,8.668189999999999,8.66785,8.66751,8.66717,8.666829999999999,8.66649,8.66615,8.66581,8.665469999999999,8.66513,8.664709999999999,8.664289999999999,8.664005,8.66372,8.663325,8.662929999999999,8.66253,8.662129999999999,8.661804999999999,8.661479999999999,8.661149999999999,8.660819999999999,8.66042,8.660064999999999,8.65971,8.65925,8.659079999999999,8.658726700000001,8.658373299999999,8.65802,8.657663299999999,8.657306699999999,8.65695,8.656593300000001,8.656236699999999,8.65588,8.655545,8.65521,8.654714999999999,8.65422,8.653700000000001,8.653180000000001,8.652760000000001,8.652340000000001,8.65192,8.65152,8.65127,8.65108,8.65077,8.65014,8.649900000000001,8.64969,8.64926,8.64898,8.6487,8.648323299999999,8.6479467,8.64757,8.647220000000001,8.646725,8.646229999999999,8.645735,8.645239999999999,8.644745,8.64425,8.64382,8.64339,8.64296,8.642526699999999,8.642093300000001,8.64166,8.641226700000001,8.6407933,8.640359999999999,8.6399267,8.6394933,8.639060000000001,8.638629999999999,8.638199999999999,8.63777,8.637336700000001,8.6369033,8.636469999999999,8.6360367,8.6356033,8.63517,8.634736699999999,8.634303299999999,8.63387,8.633436700000001,8.6330033,8.632569999999999,8.63214,8.63171,8.63128,8.630846699999999,8.630413300000001,8.62998,8.629546700000001,8.6291133,8.628679999999999,8.6282467,8.6278133,8.62738,8.62688,8.626379999999999,8.62622,8.625999999999999,8.625674999999999,8.625349999999999,8.62505,8.6247033,8.6243567,8.62401,8.623799999999999,8.623699999999999,8.623620000000001,8.623514999999999,8.62341,8.62332,8.62321,8.622999999999999,8.622870000000001,8.62251,8.62215,8.621665,8.621180000000001,8.620695,8.62021,8.619859999999999,8.619450000000001,8.61904,8.61863,8.618220000000001,8.61781,8.6174,8.616989999999999,8.616580000000001,8.61617,8.61576,8.615349999999999,8.614940000000001,8.61453,8.61412,8.613709999999999,8.6132867,8.612863300000001,8.612439999999999,8.612064999999999,8.611689999999999,8.611319999999999,8.610950000000001,8.610525000000001,8.610099999999999,8.60965,8.609310000000001,8.60887,8.60872,8.60848,8.60802,8.60769,8.607329999999999,8.60697,8.6065667,8.6061633,8.60576,8.60529,8.6049533,8.604616699999999,8.604279999999999,8.603943299999999,8.6036067,8.60327,8.60304,8.60285,8.602510000000001,8.60263,8.602795,8.602959999999999,8.60304,8.60309,8.60308,8.60304,8.60291,8.602779999999999,8.602589999999999,8.60234,8.60209,8.601839999999999,8.601654999999999,8.601470000000001,8.601285000000001,8.601100000000001,8.600849999999999,8.600653299999999,8.600456700000001,8.60026,8.600066699999999,8.5998733,8.599679999999999,8.599489999999999,8.59925,8.599015,8.59878,8.598560000000001,8.598459999999999,8.598369999999999,8.598296700000001,8.598223300000001,8.59815,8.59811,8.59812,8.5981767,8.5982333,8.59829,8.5983467,8.598403299999999,8.598459999999999,8.59853,8.59867,8.59877,8.59887,8.59897,8.5990567,8.5991433,8.59923,8.599303300000001,8.599376700000001,8.599449999999999,8.59953,8.59962,8.599769999999999,8.59998,8.60027,8.60055,8.60083,8.60111,8.60139,8.601739999999999,8.601900000000001,8.60209,8.602225000000001,8.602359999999999,8.602494999999999,8.60263,8.602765,8.6029,8.603003299999999,8.6031067,8.603210000000001,8.603260000000001,8.6032967,8.603333299999999,8.60337,8.60341,8.60345,8.603565,8.603680000000001,8.603825000000001,8.60397,8.60412,8.60427,8.60446,8.604649999999999,8.604799999999999,8.604950000000001,8.6051,8.605180000000001,8.6052,8.60506,8.60505,8.605130000000001,8.605359999999999,8.60552,8.606070000000001,8.606400000000001,8.6066,8.606920000000001,8.607100000000001,8.607430000000001,8.607783299999999,8.608136699999999,8.60849,8.6088433,8.6091967,8.60955,8.609819999999999,8.61009,8.6104667,8.610843300000001,8.611219999999999,8.611615,8.61201,8.612399999999999,8.61279,8.61295,8.613239999999999,8.61337,8.613429999999999,8.61342,8.6133667,8.6133133,8.61326,8.613206699999999,8.6131533,8.613099999999999,8.6130467,8.612993299999999,8.61294,8.612959999999999,8.613,8.613060000000001,8.61327,8.61342,8.613580000000001,8.61378,8.614055,8.614330000000001,8.614604999999999,8.614879999999999,8.615180000000001,8.61548,8.61571,8.6160333,8.616356700000001,8.616680000000001,8.617050000000001,8.617335000000001,8.617620000000001,8.617905,8.61819,8.61828,8.61835,8.61839,8.61842,8.61844,8.618460000000001,8.61848,8.61853,8.6186475,8.618765,8.6188825,8.619,8.619094,8.619187999999999,8.619282,8.619376000000001,8.61947,8.6195875,8.619705,8.6198225,8.61994,8.62002,8.620150000000001,8.620485,8.62082,8.62115,8.62148,8.621740000000001,8.62172,8.621740000000001,8.62196,8.62238,8.622669999999999,8.622960000000001,8.6233267,8.623693299999999,8.62406,8.62443,8.6248,8.625170000000001,8.62566,8.625995,8.626329999999999,8.6266867,8.6270433,8.6274,8.62773,8.627890000000001,8.628,8.628209999999999,8.62839,8.62866,8.62893,8.629205000000001,8.629479999999999,8.629753300000001,8.6300267,8.6303,8.630576700000001,8.6308533,8.631130000000001,8.631500000000001,8.632,8.63233,8.6327,8.63307,8.63344,8.63381,8.634180000000001,8.634550000000001,8.6349167,8.635283299999999,8.63565,8.635994999999999,8.636340000000001,8.636659999999999,8.636979999999999,8.6373,8.6376233,8.637946700000001,8.63827,8.63869,8.639150000000001,8.639514999999999,8.63988,8.640245,8.640610000000001,8.640930000000001,8.641249999999999,8.64157,8.64189,8.642239999999999,8.6426,8.64296,8.643196700000001,8.6434333,8.64367,8.6439167,8.644163300000001,8.644410000000001,8.644780000000001,8.645149999999999,8.645519999999999,8.64589,8.64626,8.64663,8.646750000000001,8.646839999999999,8.64692,8.646929999999999,8.646879999999999,8.64681,8.646545,8.646280000000001,8.64622,8.646190000000001,8.6462,8.6463,8.646380000000001,8.646509999999999,8.646750000000001,8.647349999999999,8.647715,8.64808,8.64869,8.64892,8.64916,8.64944,8.65011,8.65047,8.650869999999999,8.65123,8.651755,8.652279999999999,8.652810000000001,8.65334,8.653865,8.654389999999999,8.6548,8.655189999999999,8.65559,8.656045000000001,8.656499999999999,8.656955,8.65741,8.65765,8.657870000000001,8.65808,8.658495,8.658910000000001,8.659303299999999,8.6596967,8.66009,8.660483299999999,8.660876699999999,8.66127,8.6616,8.66183,8.661989999999999,8.66221,8.662459999999999,8.66255,8.662655000000001,8.66276,8.66286,8.663035000000001,8.663209999999999,8.663320000000001,8.663565,8.66381,8.66418,8.66442,8.66466,8.664899999999999,8.665139999999999,8.665380000000001,8.665620000000001,8.665570000000001,8.665559999999999,8.66559,8.665699999999999,8.665789999999999,8.665975,8.66616,8.66634,8.66652,8.666700000000001,8.66695,8.667285,8.667619999999999,8.667835,8.668049999999999,8.668240000000001,8.66827,8.66827,8.6683,8.668415,8.668530000000001,8.66865,8.66877,8.668810000000001,8.668799999999999,8.66879,8.66878,8.66877,8.668743299999999,8.668716699999999,8.66869,8.6686633,8.6686367,8.668609999999999,8.668670000000001,8.6688367,8.6690033,8.669169999999999,8.6693333,8.6694967,8.66966,8.6698267,8.6699933,8.670159999999999,8.670316700000001,8.670473299999999,8.670629999999999,8.6707833,8.6709367,8.67109,8.67127,8.67145,8.671625000000001,8.671799999999999,8.67205,8.672359999999999,8.67281,8.67313,8.67346,8.67379,8.6741467,8.6745033,8.674860000000001,8.675190000000001,8.67576,8.676209999999999,8.67642,8.67661,8.676959999999999,8.677350000000001,8.6775667,8.6777833,8.678000000000001,8.678179999999999,8.67845,8.67872,8.67877,8.67876,8.6791,8.67944,8.679774999999999,8.680110000000001,8.680529999999999,8.680770000000001,8.681229999999999,8.681319999999999,8.681575,8.68183,8.68215,8.68235,8.68256,8.68257,8.68261,8.68268,8.68286,8.68296,8.6832633,8.6835667,8.683870000000001,8.684173299999999,8.684476699999999,8.68478,8.685083300000001,8.6853867,8.685689999999999,8.6859933,8.6862967,8.6866,8.686903300000001,8.687206700000001,8.68751,8.687810000000001,8.68811,8.688409999999999,8.688665,8.68892,8.689260000000001,8.6896,8.68994,8.69028,8.69064,8.691000000000001,8.69136,8.69172,8.69204,8.69251,8.69285,8.693199999999999,8.69355,8.693899999999999,8.694269999999999,8.6946067,8.6949433,8.69528,8.6956133,8.6959467,8.69628,8.696613299999999,8.6969467,8.697279999999999,8.6974,8.6977767,8.6981533,8.69853,8.699,8.69941,8.699695,8.69998,8.700313299999999,8.7006467,8.700979999999999,8.701359999999999,8.701739999999999,8.702120000000001,8.702496699999999,8.7028733,8.703250000000001,8.70363,8.70401,8.70439,8.70477,8.70515,8.70553,8.7059067,8.706283300000001,8.706659999999999,8.707039999999999,8.707420000000001,8.707800000000001,8.70818,8.70856,8.70894,8.70932,8.7097,8.71008,8.710380000000001,8.71068,8.710979999999999,8.711360000000001,8.711740000000001,8.712120000000001,8.7124367,8.712753299999999,8.71307,8.7133833,8.7136967,8.71401,8.714326700000001,8.714643300000001,8.71496,8.71529,8.715619999999999,8.715949999999999,8.716279999999999,8.716545,8.716810000000001,8.717129999999999,8.717449999999999,8.71777,8.71809,8.71841,8.718730000000001,8.719049999999999,8.71937,8.71969,8.71955,8.7194333,8.7193167,8.719200000000001,8.71908,8.718959999999999,8.71884,8.71869,8.718540000000001,8.718389999999999,8.71824,8.7182,8.718220000000001,8.71833,8.7184767,8.718623300000001,8.718769999999999,8.718916699999999,8.7190633,8.71921,8.719373300000001,8.719536700000001,8.7197,8.719860000000001,8.72002,8.720179999999999,8.72024,8.719915,8.71959,8.7192167,8.7188433,8.71847,8.7180967,8.717723299999999,8.71735,8.717129999999999,8.71669,8.7164033,8.716116700000001,8.71583,8.715540000000001,8.715249999999999,8.71496,8.71467,8.71438,8.714090000000001,8.7138033,8.7135167,8.713229999999999,8.71294,8.71265,8.71236,8.7120733,8.711786699999999,8.711499999999999,8.711209999999999,8.71092,8.71063,8.710945000000001,8.711259999999999,8.711575,8.71189,8.712205000000001,8.71252,8.712859999999999,8.713200000000001,8.71354,8.71388,8.714219999999999,8.714560000000001,8.71489,8.71522,8.715450000000001,8.715680000000001,8.71594,8.716200000000001,8.716555,8.71691,8.717195,8.71748,8.717599999999999,8.71773,8.71799,8.718249999999999,8.7185267,8.718803299999999,8.71908,8.719356700000001,8.7196333,8.71991,8.7201833,8.7204567,8.72073,8.720969999999999,8.721259999999999,8.721565,8.721869999999999,8.722235,8.7226,8.72292,8.723265,8.723610000000001,8.7239,8.72419,8.724600000000001,8.725009999999999,8.725339999999999,8.725669999999999,8.726039999999999,8.72641,8.72678,8.727153299999999,8.7275267,8.7279,8.72827,8.72864,8.729010000000001,8.729200000000001,8.72953,8.72986,8.73019,8.73052,8.730840000000001,8.73123,8.731490000000001,8.731680000000001,8.732055000000001,8.732430000000001,8.732810000000001,8.73319,8.73357,8.73395,8.73413,8.73457,8.73466,8.734966699999999,8.735273299999999,8.735580000000001,8.7358867,8.7361933,8.736499999999999,8.736649999999999,8.737005,8.737360000000001,8.737695,8.73803,8.738455,8.73888,8.739305,8.73973,8.740155,8.74058,8.740869999999999,8.741110000000001,8.741350000000001,8.741619999999999,8.74189,8.742155,8.742419999999999,8.742743300000001,8.7430667,8.74339,8.7437167,8.7440433,8.74437,8.7446933,8.745016700000001,8.745340000000001,8.745666699999999,8.7459933,8.746320000000001,8.746646699999999,8.746973300000001,8.747299999999999,8.747623300000001,8.7479467,8.74827,8.748519999999999,8.74877,8.749096700000001,8.7494233,8.749750000000001,8.750076699999999,8.7504033,8.750730000000001,8.751056699999999,8.751383300000001,8.751709999999999,8.7520367,8.752363300000001,8.752689999999999,8.7530167,8.753343299999999,8.75367,8.7539967,8.754323299999999,8.75465,8.7549767,8.7553033,8.75563,8.7559567,8.7562833,8.75661,8.756936700000001,8.7572633,8.75759,8.757916700000001,8.7582433,8.758570000000001,8.758834999999999,8.7591,8.759365000000001,8.75963,8.75989,8.760149999999999,8.7604133,8.760676699999999,8.76094,8.761200000000001,8.76146,8.76172,8.761850000000001,8.761979999999999,8.7621067,8.7622333,8.762359999999999,8.7624867,8.7626133,8.762740000000001,8.762980000000001,8.763159999999999,8.763339999999999,8.76352,8.76375,8.76398,8.76421,8.76444,8.764635,8.76483,8.7650633,8.7652967,8.76553,8.765750000000001,8.765969999999999,8.76619,8.76643,8.766489999999999,8.766540000000001,8.76656,8.76657,8.766579999999999,8.766590000000001,8.766579999999999,8.76657,8.76656,8.766523299999999,8.7664867,8.766450000000001,8.7664133,8.7663767,8.76634,8.766303300000001,8.766266699999999,8.76623,8.766193299999999,8.7661567,8.766120000000001,8.76606,8.766,8.765940000000001,8.765879999999999,8.765790000000001,8.765700000000001,8.765555000000001,8.765409999999999,8.765264999999999,8.76512,8.76502,8.76488,8.76464,8.76441,8.76416,8.76383,8.763439999999999,8.76305,8.76266,8.762269999999999,8.761875,8.761480000000001,8.761195000000001,8.760910000000001,8.760619999999999,8.76033,8.76013,8.75996,8.75986,8.7598,8.759790000000001,8.759460000000001,8.759130000000001,8.758900000000001,8.758570000000001,8.758240000000001,8.757860000000001,8.757479999999999,8.757099999999999,8.75672,8.75634,8.75596,8.755649999999999,8.75543,8.7552,8.754899999999999,8.75445,8.75395,8.753729999999999,8.75343,8.7531,8.75262,8.752219999999999,8.75206,8.751835,8.751609999999999,8.751385000000001,8.75116,8.75094,8.750845,8.75075,8.7506533,8.750556700000001,8.75046,8.7503633,8.750266699999999,8.750170000000001,8.7500733,8.749976699999999,8.749879999999999,8.749775,8.74967,8.74952,8.749253299999999,8.7489867,8.74872,8.7484567,8.748193300000001,8.74793,8.747663299999999,8.747396699999999,8.74713,8.746919999999999,8.7468,8.74666,8.746560000000001,8.74654,8.74644,8.74633,8.7460425,8.745755000000001,8.7454675,8.74518,8.744994999999999,8.744809999999999,8.74469,8.74452,8.74428,8.743980000000001,8.743679999999999,8.743376700000001,8.743073300000001,8.74277,8.74248,8.7422533,8.7420267,8.7418,8.7416167,8.741433300000001,8.741250000000001,8.741015000000001,8.740780000000001,8.740589999999999,8.74053,8.740460000000001,8.74044,8.740460000000001,8.740629999999999,8.7408,8.74091,8.741020000000001,8.741045,8.741070000000001,8.74103,8.740919999999999,8.74075,8.740565,8.74038,8.74024,8.73996,8.73983,8.73978,8.73978,8.73981,8.739990000000001,8.740145,8.7403,8.74042,8.740463999999999,8.74051,8.7407,8.74085,8.741149999999999,8.74145,8.741630000000001,8.741809999999999,8.74198,8.742050000000001,8.74207,8.74207,8.74207,8.742100000000001,8.74221,8.74249,8.74263,8.74278,8.7428867,8.7429933,8.7431,8.74315,8.74316,8.74314,8.743169999999999,8.74334,8.74342,8.743499999999999,8.74356,8.743690000000001,8.74367,8.74362,8.743505000000001,8.74339,8.743345,8.7433,8.743297500000001,8.743295,8.743292500000001,8.74329,8.743304999999999,8.743320000000001,8.743335,8.74335,8.7433367,8.7433233,8.743309999999999,8.7432967,8.7432833,8.743270000000001,8.74325,8.743230000000001,8.743209999999999,8.7431933,8.743176699999999,8.74316,8.7431433,8.743126699999999,8.74311,8.743085000000001,8.74306,8.743040000000001,8.74302,8.74297,8.74283,8.742699999999999,8.74255,8.742369999999999,8.74216,8.74202,8.741736700000001,8.7414533,8.74117,8.74098,8.74086,8.74081,8.740780000000001,8.74075,8.74072,8.740690000000001,8.74071,8.740740000000001,8.7408267,8.740913300000001,8.741,8.74103,8.741009999999999,8.7409433,8.740876699999999,8.74081,8.740740000000001,8.74067,8.740600000000001,8.74051,8.74042,8.740304999999999,8.74019,8.739979999999999,8.739800000000001,8.73958,8.739269999999999,8.738960000000001,8.73865,8.738340000000001,8.73814,8.73785,8.737665,8.73748,8.737299999999999,8.73715,8.7370467,8.7369433,8.736840000000001,8.736739999999999,8.73664,8.73654,8.736385,8.736230000000001,8.73593,8.735889999999999,8.73582,8.735860000000001,8.736090000000001,8.736319999999999,8.736359999999999,8.7363,8.73624,8.736179999999999,8.73612,8.73606,8.736000000000001,8.735943300000001,8.7358867,8.73583,8.73583,8.735900000000001,8.736050000000001,8.7363,8.73658,8.73673,8.737069999999999,8.737410000000001,8.73794,8.73822,8.73846,8.738894999999999,8.739330000000001,8.73958,8.73986,8.74014,8.74042,8.74052,8.74056,8.74058,8.74057,8.74048,8.74039,8.7403,8.740209999999999,8.740119999999999,8.740030000000001,8.7399433,8.739856700000001,8.73977,8.73968,8.73959,8.7395,8.73949,8.739520000000001,8.73958,8.73967,8.739879999999999,8.740345,8.74081,8.74127,8.74173,8.741910000000001,8.742050000000001,8.7422,8.74235,8.74255,8.74273,8.74306,8.74339,8.74353,8.743650000000001,8.74348,8.7433,8.74306,8.74282,8.742575,8.742330000000001,8.74222,8.7422,8.74222,8.742305,8.74239,8.742475000000001,8.742559999999999,8.742604999999999,8.742649999999999,8.742694999999999,8.74274,8.74272,8.74263,8.742405,8.742179999999999,8.741960000000001,8.74174,8.74152,8.741300000000001,8.741020000000001,8.7407833,8.740546699999999,8.740309999999999,8.740073300000001,8.7398367,8.739599999999999,8.73936,8.73912,8.73888,8.73873,8.738619999999999,8.73851,8.738405,8.738300000000001,8.738135,8.737970000000001,8.737819999999999,8.737629999999999,8.737439999999999,8.737235,8.737030000000001,8.7368033,8.736576700000001,8.73635,8.73612,8.735889999999999,8.735659999999999,8.73541,8.73516,8.73508,8.73504,8.73504,8.73504,8.73504,8.73504,8.735010000000001,8.73495,8.734819999999999,8.734690000000001,8.73456,8.73443,8.734360000000001,8.73428,8.73413,8.733969999999999,8.73349,8.73301,8.73269,8.73236,8.7319867,8.731613299999999,8.73124,8.7308667,8.730493299999999,8.730119999999999,8.729749999999999,8.729380000000001,8.729010000000001,8.72842,8.727919999999999,8.72742,8.726955,8.72649,8.726419999999999,8.726205,8.725989999999999,8.726039999999999,8.726050000000001,8.72603,8.72594,8.725849999999999,8.72578,8.7258,8.725709999999999,8.72551,8.725210000000001,8.724935,8.72466,8.72447,8.72428,8.72401,8.723739999999999,8.723470000000001,8.7232033,8.7229367,8.722670000000001,8.7224033,8.7221367,8.721869999999999,8.721583300000001,8.7212967,8.72101,8.720689999999999,8.720459999999999,8.720313300000001,8.7201667,8.72002,8.7198733,8.719726700000001,8.719580000000001,8.719436699999999,8.7192933,8.719150000000001,8.718999999999999,8.71885,8.7187,8.71855,8.718406699999999,8.7182633,8.718120000000001,8.717973300000001,8.7178267,8.71768,8.7175367,8.717393299999999,8.71725,8.7171033,8.716956700000001,8.716810000000001,8.7167025,8.716595,8.716487499999999,8.716379999999999,8.71627,8.71616,8.716049999999999,8.71594,8.71589,8.7159,8.7159475,8.715994999999999,8.7160425,8.716089999999999,8.7161533,8.7162167,8.716279999999999,8.716346700000001,8.716413299999999,8.716480000000001,8.7165433,8.7166067,8.716670000000001,8.7167367,8.7168033,8.71687,8.716933300000001,8.716996699999999,8.71706,8.717079999999999,8.717079999999999,8.71701,8.716939999999999,8.71687,8.716794999999999,8.71672,8.716659999999999,8.71663,8.71665,8.716710000000001,8.71686,8.717029999999999,8.7171767,8.7173233,8.71747,8.7176133,8.717756700000001,8.7179,8.71809,8.71834,8.71857,8.718780000000001,8.719049999999999,8.718830000000001,8.71861,8.71851,8.71842,8.718400000000001,8.71847,8.71828,8.7181,8.71787,8.71762,8.71749,8.71706,8.71663,8.716205,8.715780000000001,8.715393300000001,8.7150067,8.71462,8.7142333,8.7138467,8.71346,8.71299,8.712636699999999,8.712283299999999,8.711930000000001,8.711404999999999,8.71088,8.710330000000001,8.71006,8.709860000000001,8.70965,8.709569999999999,8.709479999999999,8.709440000000001,8.70936,8.70922,8.708765,8.708310000000001,8.707855,8.7074,8.706983299999999,8.7065667,8.706149999999999,8.705736699999999,8.7053233,8.70491,8.704493299999999,8.7040767,8.703659999999999,8.703246699999999,8.7028333,8.70242,8.7020067,8.701593300000001,8.701180000000001,8.700699999999999,8.70036,8.70002,8.699680000000001,8.699339999999999,8.699,8.69866,8.698320000000001,8.697979999999999,8.69764,8.6973,8.696960000000001,8.696619999999999,8.696389999999999,8.69627,8.69598,8.695595000000001,8.695209999999999,8.69483,8.69445,8.69421,8.69402,8.6936,8.69318,8.692869999999999,8.69232,8.691929999999999,8.691575,8.69122,8.690875,8.690530000000001,8.690116700000001,8.6897033,8.68929,8.68919,8.68906,8.688739999999999,8.688610000000001,8.688219999999999,8.68783,8.68744,8.687049999999999,8.68666,8.68627,8.685896700000001,8.6855233,8.68515,8.6847767,8.6844033,8.68403,8.68366,8.68329,8.682919999999999,8.68277,8.682510000000001,8.682460000000001,8.68235,8.68224,8.68221,8.68206,8.68168,8.6813,8.68092,8.680770000000001,8.6803867,8.680003299999999,8.67962,8.679236700000001,8.6788533,8.678470000000001,8.678123299999999,8.677776700000001,8.677429999999999,8.67732,8.677049999999999,8.676959999999999,8.6769,8.676830000000001,8.67679,8.676769999999999,8.676450000000001,8.6761,8.67578,8.6755233,8.6752667,8.67501,8.674753300000001,8.674496700000001,8.674239999999999,8.673995,8.67375,8.67343,8.673109999999999,8.67272,8.672420000000001,8.672330000000001,8.67221,8.67212,8.67212,8.671749999999999,8.671469999999999,8.671099999999999,8.670730000000001,8.670360000000001,8.66999,8.669625,8.66926,8.668894999999999,8.668530000000001,8.6685,8.66841,8.6683,8.66826,8.667755,8.667249999999999,8.666765,8.66628,8.665934999999999,8.66559,8.66513,8.6648,8.664400000000001,8.6640467,8.6636933,8.66334,8.66324,8.663180000000001,8.663130000000001,8.662979999999999,8.66283,8.662599999999999,8.662273300000001,8.6619467,8.661619999999999,8.661199999999999,8.661049999999999,8.660640000000001,8.66029,8.660035000000001,8.65978,8.659459999999999,8.659129999999999,8.658875,8.658620000000001,8.65854,8.658440000000001,8.658340000000001,8.658289999999999,8.657970000000001,8.65765,8.65733,8.656855,8.65638,8.656040000000001,8.6557,8.65541,8.65512,8.6547,8.654405000000001,8.654109999999999,8.653790000000001,8.65347,8.65315,8.652749999999999,8.65235,8.65217,8.652060000000001,8.65197,8.651960000000001,8.65197,8.65198,8.651993300000001,8.652006699999999,8.65202,8.65199,8.65193,8.651770000000001,8.651630000000001,8.65127,8.650779999999999,8.650354999999999,8.649929999999999,8.6495467,8.6491633,8.64878,8.64833,8.64805,8.64781,8.64751,8.6473,8.64705,8.646800000000001,8.64662,8.646369999999999,8.646223300000001,8.6460767,8.64593,8.6457867,8.6456433,8.6455,8.645333300000001,8.645166700000001,8.645,8.6448333,8.6446667,8.644500000000001,8.64442,8.644360000000001,8.64429,8.644270000000001,8.644270000000001,8.64434,8.644130000000001,8.6438767,8.6436233,8.643370000000001,8.6431167,8.6428633,8.642609999999999,8.64237,8.64213,8.64189,8.64165,8.641550000000001,8.641439999999999,8.641389999999999,8.64134,8.641360000000001,8.64142,8.641249999999999,8.641080000000001,8.64086,8.640639999999999,8.640420000000001,8.64067,8.640919999999999,8.641165000000001,8.64141,8.641719999999999,8.64203,8.642265,8.6425,8.64223,8.641959999999999,8.64181,8.642379999999999,8.64289,8.64312,8.64343,8.64368,8.643929999999999,8.64419,8.644600000000001,8.645049999999999,8.64556,8.64601,8.64635,8.64663,8.646850000000001,8.646929999999999,8.647019999999999,8.64711,8.64728,8.647525,8.64777,8.6479333,8.6480967,8.648260000000001,8.648434999999999,8.64861,8.64884,8.64907,8.6493,8.6495333,8.649766700000001,8.65,8.6502333,8.650466700000001,8.650700000000001,8.6509333,8.651166699999999,8.651400000000001,8.651630000000001,8.651859999999999,8.652089999999999,8.65239,8.652620000000001,8.65278,8.652939999999999,8.653085000000001,8.653230000000001,8.653370000000001,8.653510000000001,8.65367,8.65394,8.6541567,8.6543733,8.654590000000001,8.654803299999999,8.655016699999999,8.65523,8.655446700000001,8.655663300000001,8.65588,8.6560933,8.6563067,8.65652,8.6567367,8.6569533,8.657170000000001,8.657383299999999,8.657596699999999,8.65781,8.6580233,8.6582367,8.65845,8.658645,8.65884,8.659000000000001,8.65916,8.659319999999999,8.65948,8.659643300000001,8.659806700000001,8.65997,8.6601333,8.6602967,8.66046,8.660623299999999,8.660786699999999,8.66095,8.6611233,8.661296699999999,8.66147,8.66164,8.661809999999999,8.66198,8.6621533,8.662326699999999,8.6625,8.66267,8.662839999999999,8.66301,8.6631833,8.6633567,8.66353,8.6637033,8.663876699999999,8.66405,8.66422,8.664389999999999,8.66456,8.6647333,8.6649067,8.66508,8.66531,8.665525000000001,8.66574,8.665990000000001,8.66624,8.66649,8.666740000000001,8.66689,8.667120000000001,8.667255000000001,8.667389999999999,8.667524999999999,8.66766,8.66785,8.66808,8.66831,8.66854,8.66877,8.66906,8.66935,8.669504999999999,8.66966,8.669309999999999,8.6689825,8.668654999999999,8.6683275,8.667999999999999,8.667579999999999,8.667199999999999,8.667009999999999,8.66682,8.6665475,8.666275000000001,8.666002499999999,8.66573,8.66559,8.66549,8.6654,8.66531,8.66521,8.66502,8.664820000000001,8.66452,8.66422,8.66399,8.66376,8.66353,8.663365000000001,8.6632,8.662995,8.662789999999999,8.66253,8.66235,8.66206,8.66187,8.66165,8.661239999999999,8.661020000000001,8.660880000000001,8.660679999999999,8.66048,8.660215000000001,8.65995,8.659783300000001,8.659616700000001,8.65945,8.6592,8.65902,8.658759999999999,8.658569999999999,8.658386699999999,8.6582033,8.65802,8.657803299999999,8.6575867,8.65737,8.657153299999999,8.656936699999999,8.65672,8.656485,8.65625,8.656079999999999,8.65591,8.65574,8.65544,8.655200000000001,8.654960000000001,8.654719999999999,8.654475,8.65423,8.653975000000001,8.65372,8.653465000000001,8.65321,8.652905000000001,8.6526,8.65239,8.65221,8.651949999999999,8.6518,8.651669999999999,8.651590000000001,8.651595,8.6516,8.651540000000001,8.651490000000001,8.65142,8.651300000000001,8.651199999999999,8.65108,8.65099,8.65075,8.650510000000001,8.650264999999999,8.65002,8.6497767,8.6495333,8.649290000000001,8.64906,8.64883,8.648605,8.64838,8.648210000000001,8.64804,8.64786,8.647656700000001,8.6474533,8.64725,8.647046700000001,8.6468433,8.64664,8.64645,8.64622,8.64593,8.64565,8.64537,8.645,8.644740000000001,8.644405000000001,8.644069999999999,8.64376,8.64345,8.643155,8.642860000000001,8.642519999999999,8.64218,8.64184,8.641500000000001,8.64133,8.640940000000001,8.64049,8.640140000000001,8.639900000000001,8.63974,8.639659999999999,8.63964,8.639670000000001,8.63968,8.63959,8.639363299999999,8.6391367,8.638909999999999,8.6386833,8.638456700000001,8.63823,8.638003299999999,8.6377767,8.637549999999999,8.63734,8.637040000000001,8.636693299999999,8.636346700000001,8.635999999999999,8.6356,8.635149999999999,8.6348067,8.6344633,8.634119999999999,8.633609999999999,8.633100000000001,8.6327567,8.6324133,8.632070000000001,8.631779999999999,8.63162,8.63137,8.631119999999999,8.63087,8.630559999999999,8.63025,8.6302,8.629899999999999,8.6296,8.629289999999999,8.62899,8.62885,8.628679999999999,8.628410000000001,8.628299999999999,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625870000000001,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625645,8.62547,8.625294999999999,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619109999999999,8.618919999999999,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620604999999999,8.62088,8.62111,8.62134,8.62157,8.621796700000001,8.6220233,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.62354,8.6237067,8.6238733,8.624040000000001,8.62424,8.62444,8.624599999999999,8.624845000000001,8.62509,8.625335,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.627000000000001,8.626635,8.62627,8.625904999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.627385,8.627689999999999,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.62576,8.625425,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.617179999999999,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.5923,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591390000000001,8.591165,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581289999999999,8.581060000000001,8.580830000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.57962,8.5795233,8.579426700000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.5702867,8.570073300000001,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56682,8.56673,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562340000000001,8.562110000000001,8.561885,8.56166,8.561446699999999,8.5612333,8.561019999999999,8.5608033,8.5605867,8.560370000000001,8.5601567,8.5599433,8.55973,8.559430000000001,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.55832,8.5580433,8.5577667,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.55447,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.5522767,8.552103300000001,8.55193,8.5517567,8.551583300000001,8.551410000000001,8.55124,8.551069999999999,8.5509,8.5507267,8.550553300000001,8.550380000000001,8.5502067,8.550033300000001,8.549860000000001,8.549686700000001,8.549513299999999,8.549340000000001,8.54917,8.548999999999999,8.548830000000001,8.5486567,8.548483299999999,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.546049999999999,8.545920000000001,8.545785,8.54565,8.54543,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533,8.54514,8.545070000000001,8.54504,8.544930000000001,8.544639999999999,8.544370000000001,8.5443,8.54415,8.54392,8.543530000000001,8.543139999999999,8.54275,8.54236,8.54185,8.541779999999999,8.54172,8.541725,8.541729999999999,8.541746699999999,8.5417633,8.541779999999999,8.5418,8.54182,8.541840000000001,8.54182,8.541779999999999,8.541815,8.54185,8.54185,8.54191,8.542059999999999,8.542505,8.542949999999999,8.543329999999999,8.543340000000001,8.543200000000001,8.54307,8.54302,8.542975,8.54293,8.542885,8.54284,8.542816699999999,8.5427933,8.542770000000001,8.542775000000001,8.54278,8.542785,8.54279,8.542845,8.542899999999999,8.542954999999999,8.543010000000001,8.54304,8.543559999999999,8.54379,8.544145,8.544499999999999,8.544845,8.54519,8.545529999999999,8.545870000000001,8.546044999999999,8.54622,8.5463767,8.5465333,8.54669,8.5468467,8.5470033,8.54716,8.547333999999999,8.547468,8.54753,8.54759,8.547650000000001,8.54771,8.547840000000001,8.547969999999999,8.548120000000001,8.54818,8.54829,8.548389999999999,8.5486,8.54881,8.549020000000001,8.5491733,8.5493267,8.549480000000001,8.549630000000001,8.54978,8.550073299999999,8.5503667,8.550660000000001,8.5509533,8.5512467,8.551539999999999,8.5519,8.55226,8.552625000000001,8.552989999999999,8.55331,8.55363,8.55395,8.554270000000001,8.55471,8.555059999999999,8.555305000000001,8.55555,8.555795,8.556039999999999,8.55631,8.556565000000001,8.55682,8.557074999999999,8.55733,8.557527500000001,8.557725,8.5579225,8.558120000000001,8.55828,8.558439999999999,8.558595,8.55875,8.5589,8.559049999999999,8.559200000000001,8.55939,8.559645,8.559900000000001,8.560359999999999,8.560369,8.56047,8.56072,8.560919999999999,8.561120000000001,8.561325,8.561529999999999,8.561820000000001,8.56195,8.56216,8.562614999999999,8.56307,8.56326,8.563370000000001,8.5634,8.5634,8.56334,8.563136699999999,8.562933299999999,8.56273,8.562670000000001,8.562625000000001,8.562580000000001,8.5626,8.562659999999999,8.56273,8.56282,8.563040000000001,8.563370000000001,8.563700000000001,8.56381,8.56414,8.564209999999999,8.56423,8.564209999999999,8.56419,8.564170000000001,8.56415,8.5642,8.56428,8.56446,8.5646,8.56474,8.564914999999999,8.56509,8.565265,8.565440000000001,8.56559,8.56575,8.565910000000001,8.56607,8.56621,8.56635,8.566369999999999,8.56654,8.56653,8.566744999999999,8.56696,8.567214999999999,8.56747,8.567724999999999,8.56798,8.568256699999999,8.5685333,8.568809999999999,8.56907,8.569330000000001,8.56954,8.569875,8.570209999999999,8.570544999999999,8.570880000000001,8.571165000000001,8.57145,8.571680000000001,8.57208,8.5723725,8.572665000000001,8.572957499999999,8.57325,8.57335,8.573510000000001,8.57361,8.573829999999999,8.57395,8.574070000000001,8.57418,8.57423,8.574225,8.57422,8.57429,8.574396699999999,8.5745033,8.57461,8.57474,8.574859999999999,8.574999999999999,8.57511,8.57522,8.5753,8.57536,8.575445,8.575530000000001,8.575615000000001,8.575699999999999,8.575799999999999,8.575900000000001,8.576000000000001,8.5760925,8.576185000000001,8.5762775,8.576370000000001,8.576639999999999,8.577030000000001,8.5772333,8.5774367,8.577640000000001,8.5778433,8.5780467,8.578250000000001,8.5784775,8.578704999999999,8.578932500000001,8.57916,8.579387499999999,8.579615,8.5798425,8.580069999999999,8.580295,8.58052,8.580745,8.580970000000001,8.581239999999999,8.58151,8.58178,8.582050000000001,8.582264,8.582478,8.582692,8.582905999999999,8.583119999999999,8.583360000000001,8.583634999999999,8.583909999999999,8.584110000000001,8.5843975,8.584685,8.584972499999999,8.58526,8.585547500000001,8.585834999999999,8.5861225,8.586410000000001,8.5866975,8.586985,8.587272499999999,8.58756,8.58797,8.58832,8.588615000000001,8.58891,8.589205,8.589499999999999,8.589795000000001,8.59009,8.590384999999999,8.590680000000001,8.5910533,8.5914267,8.591799999999999,8.592090000000001,8.592309999999999,8.59268,8.59301,8.593389999999999,8.593769999999999,8.594110000000001,8.59445,8.59479,8.595075,8.595359999999999,8.595644999999999,8.595929999999999,8.596299999999999,8.596655,8.597009999999999,8.59747,8.597835,8.5982,8.598565000000001,8.598929999999999,8.599449999999999,8.599826699999999,8.6002033,8.600580000000001,8.600965,8.60135,8.601735,8.602119999999999,8.602510000000001,8.602980000000001,8.60338,8.60378,8.604179999999999,8.60458,8.604905,8.605230000000001,8.605566700000001,8.6059033,8.60624,8.606579999999999,8.606920000000001,8.60726,8.607693299999999,8.6081267,8.608560000000001,8.6088875,8.609215000000001,8.6095425,8.609870000000001,8.6103033,8.6107367,8.61117,8.611606699999999,8.6120433,8.61248,8.61298,8.613479999999999,8.613915,8.61435,8.614789999999999,8.61523,8.615665,8.616099999999999,8.61642,8.6168,8.617100000000001,8.617505,8.61791,8.618169999999999,8.618309999999999,8.61834,8.618410000000001,8.61847,8.618539999999999,8.6187,8.618819999999999,8.619160000000001,8.6195,8.619835,8.62017,8.620559999999999,8.620950000000001,8.62144,8.62161,8.621895,8.62218,8.622465,8.62275,8.62322,8.623525000000001,8.62383,8.62373,8.62373,8.623760000000001,8.62392,8.624079999999999,8.624235000000001,8.62439,8.624739999999999,8.625114999999999,8.625489999999999,8.625864999999999,8.626239999999999,8.6266,8.62696,8.62725,8.62754,8.627829999999999,8.628119999999999,8.628170000000001,8.62823,8.627875,8.627520000000001,8.627205,8.62689,8.62645,8.626110000000001,8.62574,8.62537,8.62515,8.625,8.62482,8.62466,8.62458,8.62457,8.624610000000001,8.62471,8.624935000000001,8.625159999999999,8.62538,8.6256,8.62576,8.625859999999999,8.625959999999999,8.626010000000001,8.62604,8.62607,8.626049999999999,8.62598,8.6259,8.625819999999999,8.625665,8.62551,8.625355000000001,8.6252,8.625120000000001,8.62481,8.62458,8.62424,8.62393,8.62372,8.62336,8.623004999999999,8.62265,8.622294999999999,8.62194,8.621320000000001,8.6209133,8.6205067,8.620100000000001,8.6196967,8.619293300000001,8.61889,8.61844,8.61819,8.617940000000001,8.617683299999999,8.617426699999999,8.61717,8.616899999999999,8.616630000000001,8.61633,8.61603,8.615629999999999,8.61511,8.61525,8.61539,8.615534999999999,8.615679999999999,8.61586,8.616037499999999,8.616215,8.6163925,8.616569999999999,8.6167967,8.6170233,8.61725,8.617476699999999,8.617703300000001,8.617929999999999,8.6181567,8.6183833,8.61861,8.61856,8.618679999999999,8.61881,8.618885000000001,8.61896,8.61909,8.619206699999999,8.6193233,8.619440000000001,8.619630000000001,8.61974,8.61988,8.62006,8.620405,8.620749999999999,8.62105,8.621320000000001,8.62139,8.62139,8.62135,8.621135000000001,8.62092,8.62088,8.62064,8.620414999999999,8.620189999999999,8.619965000000001,8.61974,8.619680000000001,8.619680000000001,8.619730000000001,8.6199767,8.620223299999999,8.620469999999999,8.620509999999999,8.620419999999999,8.62012,8.619820000000001,8.61956,8.619300000000001,8.619075,8.61885,8.61923,8.61961,8.619960000000001,8.620329999999999,8.620520000000001,8.620710000000001,8.6209667,8.6212233,8.62148,8.6217367,8.6219933,8.622249999999999,8.622496699999999,8.6227433,8.62299,8.623239999999999,8.6235,8.62368,8.623860000000001,8.624040000000001,8.62424,8.62444,8.624750000000001,8.62506,8.62532,8.625579999999999,8.625853299999999,8.6261267,8.6264,8.626670000000001,8.626939999999999,8.62721,8.626795,8.626379999999999,8.625959999999999,8.625540000000001,8.62542,8.62567,8.62593,8.626099999999999,8.62622,8.62626,8.626300000000001,8.626139999999999,8.625814999999999,8.625489999999999,8.625249999999999,8.625030000000001,8.62485,8.62482,8.624700000000001,8.624594999999999,8.62449,8.624345,8.6242,8.624115,8.624029999999999,8.62405,8.624079999999999,8.62415,8.62434,8.624470000000001,8.624750000000001,8.62501,8.62527,8.625529999999999,8.62579,8.626049999999999,8.62631,8.6265667,8.6268233,8.627079999999999,8.6274233,8.6277667,8.62811,8.62837,8.6286933,8.629016699999999,8.629339999999999,8.629754999999999,8.63017,8.630599999999999,8.631030000000001,8.631600000000001,8.631690000000001,8.63176,8.63175,8.63172,8.63123,8.631119999999999,8.63069,8.630409999999999,8.630000000000001,8.62973,8.629630000000001,8.6295,8.629350000000001,8.629,8.628830000000001,8.62851,8.628285,8.62806,8.627969999999999,8.627599999999999,8.6273,8.62702,8.62664,8.626440000000001,8.62604,8.625674999999999,8.625310000000001,8.62509,8.62477,8.62445,8.624129999999999,8.623654999999999,8.62318,8.62255,8.622014999999999,8.62148,8.6211267,8.6207733,8.620419999999999,8.61994,8.619820000000001,8.61965,8.619475,8.619300000000001,8.619210000000001,8.6191,8.618919999999999,8.618779999999999,8.6185367,8.618293299999999,8.61805,8.61787,8.61769,8.6175,8.61713,8.61678,8.616455,8.61613,8.61575,8.61537,8.614990000000001,8.614610000000001,8.61439,8.614269999999999,8.614050000000001,8.613519999999999,8.61314,8.612909999999999,8.61275,8.612335,8.61192,8.611459999999999,8.611005,8.61055,8.610390000000001,8.610200000000001,8.609920000000001,8.609640000000001,8.60933,8.609209999999999,8.609059999999999,8.608879999999999,8.608420000000001,8.608309999999999,8.60812,8.607469999999999,8.607229999999999,8.60704,8.6068,8.606439999999999,8.60577,8.605335,8.604900000000001,8.60469,8.60412,8.603949999999999,8.60379,8.603569999999999,8.60331,8.60305,8.602779999999999,8.602510000000001,8.60233,8.60186,8.60158,8.6013,8.60102,8.60074,8.60018,8.599970000000001,8.59967,8.59937,8.599069999999999,8.59883,8.59859,8.59835,8.59811,8.598050000000001,8.59768,8.59731,8.59694,8.59657,8.59624,8.59591,8.595525,8.595140000000001,8.5947133,8.5942867,8.593859999999999,8.593439999999999,8.593019999999999,8.592879999999999,8.59276,8.59271,8.592650000000001,8.592560000000001,8.59247,8.59238,8.59229,8.5922,8.59211,8.5921,8.59212,8.59234,8.592370000000001,8.592309999999999,8.59224,8.592079999999999,8.591889999999999,8.59178,8.59163,8.591284999999999,8.59094,8.590665,8.590389999999999,8.590115000000001,8.589840000000001,8.589565,8.58929,8.58882,8.58835,8.58788,8.58741,8.58719,8.58699,8.586795,8.586600000000001,8.58649,8.586399999999999,8.586259999999999,8.58609,8.58588,8.58567,8.585459999999999,8.585240000000001,8.58517,8.58501,8.584885,8.584759999999999,8.58466,8.584569999999999,8.584535000000001,8.5845,8.58442,8.584479999999999,8.5845,8.584479999999999,8.58442,8.58446,8.584474999999999,8.584490000000001,8.584490000000001,8.58446,8.584365,8.58427,8.5841233,8.583976699999999,8.583830000000001,8.583679999999999,8.58353,8.58338,8.583209999999999,8.58311,8.58301,8.58291,8.58281,8.582710000000001,8.582610000000001,8.58268,8.58272,8.582710000000001,8.582649999999999,8.582560000000001,8.58253,8.5825,8.582470000000001,8.58244,8.582409999999999,8.582380000000001,8.58235,8.582319999999999,8.58229,8.582280000000001,8.582269999999999,8.58229,8.58231,8.5823,8.582129999999999,8.58192,8.581709999999999,8.5815,8.581275,8.581049999999999,8.580825000000001,8.5806,8.580489999999999,8.580493300000001,8.580496699999999,8.580500000000001,8.580450000000001,8.580303300000001,8.5801567,8.58001,8.579890000000001,8.579856700000001,8.579823299999999,8.579789999999999,8.579739999999999,8.579689999999999,8.579599999999999,8.579510000000001,8.579420000000001,8.579330000000001,8.5793,8.57916,8.579005,8.578849999999999,8.578695,8.57854,8.57832,8.57809,8.577859999999999,8.577624999999999,8.577389999999999,8.577249999999999,8.577109999999999,8.576969999999999,8.576815,8.57666,8.576205,8.575749999999999,8.575530000000001,8.575329999999999,8.575139999999999,8.57498,8.57484,8.574630000000001,8.57442,8.574210000000001,8.574,8.57363,8.573259999999999,8.573040000000001,8.57292,8.57283,8.57281,8.572835,8.57286,8.57288,8.572900000000001,8.57288,8.57297,8.572990000000001,8.572934,8.572850000000001,8.572789999999999,8.57249,8.572329999999999,8.571820000000001,8.57133,8.57118,8.571085,8.57099,8.570745000000001,8.570499999999999,8.57028,8.57006,8.56986,8.569660000000001,8.56945,8.569190000000001,8.56893,8.56883,8.568524999999999,8.56822,8.567909999999999,8.567600000000001,8.56729,8.566979999999999,8.56671,8.566459999999999,8.56625,8.565855000000001,8.56546,8.565065000000001,8.56467,8.56428,8.564069999999999,8.563825,8.56358,8.56335,8.56312,8.562943300000001,8.562766699999999,8.56259,8.562569999999999,8.562363299999999,8.562156699999999,8.56195,8.561640000000001,8.5614267,8.5612133,8.561,8.560790000000001,8.56058,8.560370000000001,8.5601567,8.5599433,8.55973,8.55946,8.55932,8.559066700000001,8.558813300000001,8.55856,8.55847,8.558339999999999,8.5580567,8.557773299999999,8.55749,8.55702,8.55654,8.55616,8.555804999999999,8.55545,8.555095,8.554740000000001,8.554589999999999,8.55419,8.553945000000001,8.553699999999999,8.553475000000001,8.55325,8.55301,8.55278,8.552614999999999,8.55245,8.552289999999999,8.55213,8.55195,8.551769999999999,8.551589999999999,8.551406699999999,8.5512233,8.55104,8.550856700000001,8.5506733,8.55049,8.55031,8.550129999999999,8.549950000000001,8.549766699999999,8.5495833,8.5494,8.54922,8.54904,8.548859999999999,8.5486767,8.548493300000001,8.548310000000001,8.548166699999999,8.548023300000001,8.547879999999999,8.547739999999999,8.547599999999999,8.547459999999999,8.5473167,8.547173300000001,8.547029999999999,8.546889999999999,8.546749999999999,8.546609999999999,8.5464667,8.546323299999999,8.54618,8.54604,8.5459,8.54576,8.5456167,8.545473299999999,8.54533],"lat":[47.5008,47.5005567,47.5003133,47.50007,47.4998267,47.4995833,47.49934,47.4990933,47.4988467,47.4986,47.49848,47.49853,47.49858,47.49861,47.49864,47.49867,47.4987,47.49873,47.49876,47.498785,47.49881,47.49881,47.49879,47.49874,47.49868,47.49855,47.49842,47.498285,47.49815,47.49807,47.497975,47.49788,47.49779,47.4977,47.49768,47.49768,47.49772,47.49776,47.4978,47.49784,47.49788,47.49792,47.49791,47.49782,47.49773,47.49764,47.49766,47.4977,47.4978767,47.4980533,47.49823,47.49827,47.49834,47.49857,47.49877,47.49882,47.49905,47.49928,47.49951,47.49974,47.499965,47.50019,47.5002333,47.5002767,47.50032,47.5003633,47.5004067,47.50045,47.50049,47.50053,47.50057,47.5006133,47.5006567,47.5007,47.50074,47.50078,47.50082,47.50086,47.5009,47.50094,47.50098,47.50102,47.50106,47.50107,47.50108,47.50106,47.50104,47.50096,47.50084,47.5007467,47.5006533,47.50056,47.5004667,47.5003733,47.50028,47.5004,47.50062,47.50086,47.50105,47.50124,47.50148,47.50172,47.50187,47.502,47.50213,47.502225,47.50232,47.502415,47.50251,47.502645,47.50278,47.5029167,47.5030533,47.50319,47.5033267,47.5034633,47.5036,47.5037367,47.5038733,47.50401,47.5041433,47.5042767,47.50441,47.50457,47.50473,47.50482,47.5049967,47.5051733,47.50535,47.50553,47.50571,47.50589,47.50603,47.50616,47.50629,47.50642,47.5065533,47.5066867,47.50682,47.50706,47.50736,47.507555,47.50775,47.50796,47.50817,47.5084,47.508705,47.50901,47.50932,47.50963,47.50994,47.51025,47.51027,47.51037,47.51042,47.51062,47.51078,47.51094,47.51116,47.51132,47.5116033,47.5118867,47.51217,47.5124533,47.5127367,47.51302,47.5133033,47.5135867,47.51387,47.5141367,47.5144033,47.51467,47.5149333,47.5151967,47.51546,47.5157233,47.5159867,47.51625,47.516455,47.51666,47.51688,47.5171,47.51732,47.5175367,47.5177533,47.51797,47.51819,47.51841,47.51863,47.51886,47.51909,47.51932,47.5195533,47.5197867,47.52002,47.52025,47.52048,47.52071,47.521,47.5212633,47.5215267,47.52179,47.52202,47.52225,47.52248,47.52278,47.523085,47.52339,47.52365,47.52391,47.52417,47.52449,47.52489,47.52515,47.52541,47.52562,47.52583,47.526005,47.52618,47.52633,47.5266,47.526745,47.52689,47.5270667,47.5272433,47.52742,47.5275967,47.5277733,47.52795,47.5281267,47.5283033,47.52848,47.52866,47.52884,47.52902,47.5291967,47.5293733,47.52955,47.5296933,47.5298367,47.52998,47.53009,47.530285,47.53048,47.530675,47.53087,47.531065,47.53126,47.53143,47.5316,47.53177,47.5319033,47.5320367,47.53217,47.5323033,47.5324367,47.53257,47.5327033,47.5328367,47.53297,47.533095,47.53322,47.533325,47.53343,47.53353,47.53363,47.53371,47.53379,47.53397,47.5341,47.53423,47.53447,47.53464,47.53481,47.53498,47.53515,47.53532,47.53549,47.535665,47.53584,47.535995,47.53615,47.53622,47.53638,47.53647,47.5365067,47.5365433,47.53658,47.5366167,47.5366533,47.53669,47.53673,47.53674,47.53673,47.53671,47.53668,47.5366233,47.5365667,47.53651,47.5364567,47.5364033,47.53635,47.5362933,47.5362367,47.53618,47.53623,47.53623,47.53619,47.53613,47.53607,47.53601,47.53595,47.5359267,47.5359033,47.53588,47.5358567,47.5358333,47.53581,47.5357867,47.5357633,47.53574,47.53576,47.53575,47.53572,47.53569,47.53566,47.535635,47.53561,47.535585,47.53556,47.535535,47.53551,47.53547,47.535385,47.5353,47.5352133,47.5351267,47.53504,47.53495,47.53486,47.53477,47.5346833,47.5345967,47.53451,47.53451,47.53447,47.53438,47.53436,47.53437,47.53438,47.53439,47.5343967,47.5344033,47.53441,47.53443,47.53448,47.53453,47.53457,47.53459,47.53461,47.534635,47.53466,47.534675,47.53469,47.53473,47.53478,47.53496,47.53522,47.53548,47.5357233,47.5359667,47.53621,47.5364933,47.5367767,47.53706,47.53734,47.53762,47.5379,47.5381833,47.5384667,47.53875,47.53903,47.53931,47.53959,47.5398767,47.5401633,47.54045,47.5408,47.5412,47.5414533,47.5417067,47.54196,47.5422167,47.5424733,47.54273,47.5429833,47.5432367,47.54349,47.5437467,47.5440033,47.54426,47.54429,47.54434,47.54439,47.54441,47.54468,47.5449233,47.5451667,47.54541,47.5456567,47.5459033,47.54615,47.54642,47.54655,47.54669,47.54686,47.54703,47.54715,47.54732,47.5475,47.54766,47.54779,47.5479,47.54796,47.548075,47.54819,47.54831,47.54843,47.54853,47.5487,47.548995,47.54929,47.54955,47.5497433,47.5499367,47.55013,47.5503267,47.5505233,47.55072,47.55102,47.55126,47.551505,47.55175,47.551995,47.55224,47.55249,47.55274,47.55299,47.55324,47.55335,47.55363,47.55391,47.554135,47.55436,47.554585,47.55481,47.55511,47.5553633,47.5556167,47.55587,47.5561233,47.5563767,47.55663,47.55681,47.55699,47.55715,47.55733,47.55758,47.55783,47.55808,47.55826,47.55854,47.55882,47.559105,47.55939,47.55962,47.55985,47.56011,47.56041,47.56069,47.56097,47.561255,47.56154,47.56182,47.5621,47.5623,47.5625,47.5627,47.5629,47.5631,47.5633,47.56348,47.56366,47.56384,47.56409,47.5643267,47.5645633,47.5648,47.56497,47.5651867,47.5654033,47.56562,47.56581,47.566,47.566195,47.56639,47.56664,47.56693,47.56694,47.566865,47.56679,47.56672,47.56665,47.5666,47.56655,47.5665,47.56643,47.56636,47.56629,47.56622,47.56613,47.5660633,47.5659967,47.56593,47.5658667,47.5658033,47.56574,47.5656733,47.5656067,47.56554,47.56547,47.5654,47.56533,47.5652633,47.5651967,47.56513,47.5650633,47.5649967,47.56493,47.5648667,47.5648033,47.56474,47.5646767,47.5646133,47.56455,47.5644867,47.5644233,47.56436,47.56436,47.56439,47.56446,47.56461,47.56476,47.56484,47.56488,47.56487,47.564825,47.56478,47.56474,47.5647,47.56466,47.56463,47.5646,47.56457,47.56454,47.5644867,47.5644333,47.56438,47.5643267,47.5642733,47.56422,47.5642,47.56422,47.56429,47.56441,47.56458,47.56467,47.56477,47.56498,47.56511,47.56517,47.56522,47.56527,47.56564,47.56595,47.56626,47.56652,47.56678,47.567075,47.56737,47.567725,47.56808,47.5683167,47.5685533,47.56879,47.56903,47.56927,47.56956,47.56985,47.57007,47.57029,47.57058,47.570815,47.57105,47.5713,47.57155,47.57182,47.57209,47.57196,47.57183,47.571745,47.57166,47.57157,47.57148,47.571375,47.57127,47.571165,47.57106,47.57098,47.5708733,47.5707667,47.57066,47.57058,47.5705,47.57042,47.57034,47.570255,47.57017,47.57009,47.570075,47.57006,47.57007,47.57013,47.57021,47.57029,47.57038,47.570475,47.57057,47.570735,47.5709,47.571095,47.57129,47.57149,47.57169,47.57184,47.57199,47.57214,47.57229,47.57244,47.57259,47.57274,47.57289,47.57304,47.57322,47.57337,47.57353,47.57364,47.5737,47.57374,47.57374,47.57372,47.5737,47.57368,47.57366,47.57364,47.57362,47.5736,47.57358,47.57356,47.57354,47.57352,47.5735,47.5735,47.5735,47.573525,47.57355,47.57361,47.57367,47.573735,47.5738,47.57384,47.57388,47.57389,47.5739,47.57388,47.573835,47.57379,47.57368,47.57364,47.5735267,47.5734133,47.5733,47.5731833,47.5730667,47.57295,47.5728367,47.5727233,47.57261,47.572525,47.57244,47.57236,47.57228,47.57223,47.57218,47.57216,47.57214,47.57212,47.57211,47.57218,47.57218,47.57214,47.57217,47.5722,47.57224,47.57239,47.572505,47.57262,47.5727067,47.5727933,47.57288,47.57292,47.572945,47.57297,47.57299,47.57301,47.573035,47.57306,47.5730733,47.5730867,47.5731,47.5731133,47.5731267,47.57314,47.5731533,47.5731667,47.57318,47.5731967,47.5732133,47.57323,47.5732433,47.5732567,47.57327,47.5732833,47.5732967,47.57331,47.5733233,47.5733367,47.57335,47.5733633,47.5733767,47.57339,47.5734033,47.5734167,47.57343,47.5734433,47.5734567,47.57347,47.5734867,47.5735033,47.57352,47.5735333,47.5735467,47.57356,47.5735733,47.5735867,47.5736,47.57362,47.57364,47.57366,47.57371,47.573825,47.57394,47.57402,47.57409,47.57416,47.57423,47.57436,47.5745,47.57466,47.574955,47.57525,47.57534,47.57542,47.57551,47.57552,47.5755,47.57548,47.57544,47.5754,47.575355,47.57531,47.57531,47.5753133,47.5753167,47.57532,47.57532,47.57532,47.57532,47.5753233,47.5753267,47.57533,47.5753333,47.5753367,47.57534,47.5753433,47.5753467,47.57535,47.5753367,47.5753233,47.57531,47.575305,47.5753,47.5753,47.5753,47.575325,47.57535,47.57535,47.57537,47.57546,47.57546,47.57542,47.57528,47.57522,47.57517,47.57512,47.57501,47.5749,47.57479,47.57471,47.5746867,47.5746633,47.57464,47.5746133,47.5745867,47.57456,47.57452,47.57445,47.57429,47.57407,47.573885,47.5737,47.57355,47.57341,47.57327,47.57317,47.57298,47.57279,47.57261,47.5724467,47.5722833,47.57212,47.5719975,47.571875,47.5717525,47.57163,47.57149,47.5713967,47.5713033,47.57121,47.5711167,47.5710233,47.57093,47.57085,47.5708,47.57077,47.57074,47.57066,47.57058,47.57042,47.5702067,47.5699933,47.56978,47.56962,47.56945,47.5691733,47.5688967,47.56862,47.5683433,47.5680667,47.56779,47.56747,47.56714,47.56689,47.56664,47.56639,47.5661233,47.5658567,47.56559,47.5653567,47.5651233,47.56489,47.56469,47.56456,47.56441,47.56427,47.56412,47.5640225,47.563925,47.5638275,47.56373,47.56357,47.56346,47.56329,47.56309,47.56289,47.562645,47.5624,47.56215,47.5619,47.56168,47.56146,47.56124,47.56109,47.56084,47.56059,47.56034,47.560155,47.55997,47.55972,47.55947,47.55922,47.55897,47.558725,47.55848,47.55825,47.5581,47.55792,47.55774,47.55756,47.55742,47.5573,47.5572,47.55704,47.55693,47.55681,47.55676,47.55666,47.55658,47.55646,47.55615,47.55601,47.55585,47.55573,47.55561,47.55549,47.5553667,47.5552433,47.55512,47.555045,47.55497,47.5548833,47.5547967,47.55471,47.554615,47.55452,47.55442,47.55432,47.55426,47.55407,47.5539,47.55378,47.55344,47.5531867,47.5529333,47.55268,47.5524267,47.5521733,47.55192,47.5516667,47.5514133,47.55116,47.55105,47.55097,47.55092,47.55082,47.55081,47.55082,47.55088,47.55099,47.5511,47.55121,47.55132,47.5514,47.55148,47.55152,47.55154,47.55156,47.55158,47.55156,47.5515075,47.551455,47.5514025,47.55135,47.55132,47.55128,47.55123,47.55114,47.55097,47.5508,47.55063,47.55047,47.550275,47.55008,47.549885,47.54969,47.549532,47.549374,47.549216,47.549058,47.5489,47.548705,47.54851,47.548315,47.54812,47.54805,47.54797,47.54787,47.54777,47.54767,47.54757,47.54747,47.54723,47.54715,47.54707,47.54697,47.54692,47.54693,47.5469567,47.5469833,47.54701,47.5470367,47.5470633,47.54709,47.54708,47.54703,47.54698,47.54691,47.54684,47.54677,47.54668,47.5466,47.54649,47.54619,47.54607,47.54593,47.54579,47.545655,47.54552,47.54536,47.5452,47.54504,47.5448833,47.5447267,47.54457,47.54439,47.54421,47.54413,47.5440633,47.5439967,47.54393,47.5438667,47.5438033,47.54374,47.5436733,47.5436067,47.54354,47.5435,47.54346,47.5434433,47.5434267,47.54341,47.5433967,47.5433833,47.54337,47.54331,47.5432,47.54308,47.54296,47.542845,47.54273,47.54265,47.54257,47.54249,47.54241,47.54228,47.542095,47.54191,47.5417867,47.5416633,47.54154,47.54138,47.54122,47.54106,47.540825,47.54059,47.54035,47.54011,47.53987,47.53963,47.53953,47.53944,47.53928,47.53917,47.53902,47.53892,47.538655,47.53839,47.5383,47.53819,47.53809,47.53789,47.53781,47.53773,47.53765,47.53752,47.537455,47.53739,47.5373,47.53729,47.5373,47.53734,47.53749,47.53754,47.53755,47.53751,47.53742,47.53733,47.537245,47.53716,47.53707,47.53698,47.53693,47.53693,47.53696,47.53704,47.53712,47.537195,47.53727,47.53729,47.53727,47.53723,47.537095,47.53696,47.5368467,47.5367333,47.53662,47.5365067,47.5363933,47.53628,47.53616,47.53604,47.5359,47.53568,47.53533,47.53514,47.534765,47.53439,47.53417,47.53391,47.53365,47.53354,47.53335,47.53316,47.53281,47.532485,47.53216,47.53184,47.53152,47.531215,47.53091,47.53085,47.53076,47.53071,47.53067,47.53067,47.530415,47.53016,47.529905,47.52965,47.52948,47.52932,47.52919,47.52906,47.528895,47.52873,47.52856,47.5285,47.52814,47.52804,47.52776,47.52748,47.5272,47.52692,47.52671,47.526475,47.52624,47.52601,47.52578,47.5255067,47.5252333,47.52496,47.52469,47.52442,47.52415,47.52402,47.52382,47.52362,47.52342,47.5232167,47.5230133,47.52281,47.52261,47.52241,47.52221,47.5220067,47.5218033,47.5216,47.5214,47.5212,47.521,47.52079,47.52058,47.52037,47.52016,47.51992,47.51969,47.51942,47.51927,47.51915,47.51903,47.5189233,47.5188167,47.51871,47.51863,47.51852,47.5184,47.51832,47.51823,47.51802,47.51773,47.51751,47.51729,47.51707,47.51693,47.51677,47.51661,47.51652,47.51642,47.516345,47.51627,47.516195,47.51612,47.51601,47.51592,47.51571,47.51563,47.515505,47.51538,47.51528,47.51526,47.51526,47.51514,47.51508,47.51502,47.51492,47.51487,47.5147233,47.5145767,47.51443,47.5142833,47.5141367,47.51399,47.5138433,47.5136967,47.51355,47.5134033,47.5132567,47.51311,47.5129667,47.5128233,47.51268,47.5125333,47.5123867,47.51224,47.512115,47.51199,47.511825,47.51166,47.511495,47.51133,47.51116,47.51099,47.510815,47.51064,47.51055,47.51052,47.51053,47.5105567,47.5105833,47.51061,47.51062,47.51065,47.51068,47.51071,47.5107433,47.5107767,47.51081,47.51084,47.51087,47.5109,47.51089,47.5109367,47.5109833,47.51103,47.5109,47.51082,47.510755,47.51069,47.5105933,47.5104967,47.5104,47.51029,47.51018,47.51007,47.50996,47.50985,47.50974,47.5096267,47.5095133,47.5094,47.50929,47.50918,47.50907,47.5089567,47.5088433,47.50873,47.50862,47.50851,47.5084,47.50829,47.50818,47.50807,47.5079567,47.5078433,47.50773,47.50764,47.50755,47.50746,47.5073333,47.5072067,47.50708,47.5069767,47.5068733,47.50677,47.50667,47.50657,47.50647,47.50637,47.50627,47.50617,47.50606,47.50595,47.50584,47.50573,47.505635,47.50554,47.5054167,47.5052933,47.50517,47.5050467,47.5049233,47.5048,47.5046733,47.5045467,47.50442,47.50423,47.5040233,47.5038167,47.50361,47.5034033,47.5031967,47.50299,47.50274,47.50249,47.50224,47.50199,47.50183,47.50167,47.50147,47.5012367,47.5010033,47.50077,47.5005367,47.5003033,47.50007,47.49982,47.49957,47.49932,47.49908,47.49884,47.4986,47.49848,47.49843,47.49838,47.49833,47.49828,47.49823,47.49818,47.49813,47.49808,47.49801,47.49784,47.4976567,47.4974733,47.49729,47.4971067,47.4969233,47.49674,47.4965567,47.4963733,47.49619,47.4960067,47.4958233,47.49564,47.4954567,47.4952733,47.49509,47.4949067,47.4947233,47.49454,47.49436,47.49418,47.494,47.49377,47.49354,47.493315,47.49309,47.492865,47.49264,47.49244,47.49224,47.492045,47.49185,47.49165,47.49145,47.49127,47.49109,47.490965,47.49084,47.49072,47.4906,47.49046,47.49032,47.49021,47.4901,47.49008,47.49008,47.49013,47.49018,47.49023,47.49028,47.49033,47.49038,47.49043,47.49048,47.4905633,47.4906467,47.49073,47.49076,47.49075,47.49072,47.49069,47.49067,47.49065,47.4906,47.490525,47.49045,47.4904,47.49035,47.49032,47.49029,47.490305,47.49032,47.4903,47.49028,47.49026,47.4902433,47.4902267,47.49021,47.49019,47.49017,47.49015,47.49011,47.49,47.48989,47.489775,47.48966,47.48959,47.48961,47.48967,47.48977,47.489985,47.4902,47.49042,47.49064,47.49086,47.49108,47.49114,47.49125,47.49129,47.4914533,47.4916167,47.49178,47.49194,47.4921,47.49226,47.49234,47.492485,47.49263,47.49273,47.49283,47.492945,47.49306,47.49318,47.4933,47.493415,47.49353,47.49363,47.49375,47.49387,47.49373,47.49359,47.49345,47.49331,47.4931467,47.4929833,47.49282,47.4926567,47.4924933,47.49233,47.4921667,47.4920033,47.49184,47.4916767,47.4915133,47.49135,47.49119,47.49103,47.49087,47.4907067,47.4905433,47.49038,47.490245,47.49011,47.4899433,47.4897767,47.48961,47.4894467,47.4892833,47.48912,47.4889533,47.4887867,47.48862,47.4884567,47.4882933,47.48813,47.4879633,47.4877967,47.48763,47.4874667,47.4873033,47.48714,47.4869733,47.4868067,47.48664,47.4864767,47.4863133,47.48615,47.4859833,47.4858167,47.48565,47.4854833,47.4853167,47.48515,47.484975,47.4848,47.484625,47.48445,47.484215,47.48398,47.4837767,47.4835733,47.48337,47.4831667,47.4829633,47.48276,47.482615,47.48247,47.4822667,47.4820633,47.48186,47.4816567,47.4814533,47.48125,47.48095,47.48076,47.48062,47.48048,47.48031,47.48014,47.479975,47.47981,47.479655,47.4795,47.47933,47.47916,47.47899,47.47882,47.47865,47.47848,47.47824,47.47812,47.47799,47.47775,47.4775033,47.4772567,47.47701,47.4767767,47.4765433,47.47631,47.4760767,47.4758433,47.47561,47.4753733,47.4751367,47.4749,47.4746667,47.4744333,47.4742,47.4739633,47.4737267,47.47349,47.473265,47.47304,47.472815,47.47259,47.472345,47.4721,47.47176,47.47142,47.47108,47.47074,47.47054,47.47034,47.47007,47.46988,47.46972,47.46954,47.46938,47.46922,47.469065,47.46891,47.468755,47.4686,47.468485,47.46837,47.46825,47.46813,47.46802,47.46787,47.46771,47.46751,47.46734,47.467365,47.46739,47.46745,47.467615,47.46778,47.46799,47.4682,47.46841,47.46862,47.46883,47.46904,47.46916,47.46922,47.46925,47.46926,47.46925,47.46919,47.46915,47.46908,47.46897,47.46876,47.4685,47.46835,47.46808,47.46781,47.467535,47.46726,47.46694,47.466745,47.46655,47.46632,47.46609,47.46586,47.4656267,47.4653933,47.46516,47.46493,47.4647,47.46447,47.46427,47.46407,47.46393,47.4637267,47.4635233,47.46332,47.4631133,47.4629067,47.4627,47.4624967,47.4622933,47.46209,47.46191,47.46181,47.46155,47.46133,47.46128,47.46125,47.46124,47.4612775,47.461315,47.4613525,47.46139,47.461405,47.46142,47.46139,47.46132,47.46128,47.4613,47.46132,47.4612933,47.4612667,47.46124,47.46129,47.4613867,47.4614833,47.46158,47.4616533,47.4617267,47.4618,47.46187,47.46194,47.46203,47.46205,47.46203,47.46199,47.46192,47.461745,47.46157,47.461395,47.46122,47.461075,47.46093,47.46081,47.46074,47.46072,47.460755,47.46079,47.46078,47.46072,47.46065,47.46057,47.46047,47.46037,47.46024,47.460155,47.46007,47.45991,47.459812,47.45971,47.45957,47.45951,47.45945,47.45939,47.45931,47.45923,47.45911,47.45904,47.45894,47.458725,47.45851,47.45842,47.45836,47.45829,47.45822,47.4581,47.4579733,47.4578467,47.45772,47.45763,47.45754,47.45732,47.45726,47.45708,47.45684,47.45676,47.45673,47.4567,47.45654,47.45639,47.45616,47.45593,47.45562,47.45531,47.4550875,47.454865,47.4546425,47.45442,47.45422,47.45402,47.45382,47.45362,47.4534133,47.4532067,47.453,47.45279,47.45258,47.45237,47.4521733,47.4519767,47.45178,47.45158,47.45138,47.45118,47.45098,47.45078,47.45058,47.45027,47.44996,47.44965,47.44934,47.4492,47.44905,47.44894,47.44889,47.44886,47.44887,47.44873,47.4485767,47.4484233,47.44827,47.44815,47.44799,47.44783,47.4476175,47.447405,47.4471925,47.44698,47.44667,47.44649,47.4462267,47.4459633,47.4457,47.44551,47.44535,47.4451267,47.4449033,47.44468,47.44446,47.44424,47.44402,47.443785,47.44355,47.44331,47.44307,47.44272,47.44248,47.4423,47.4421,47.4419,47.4417,47.4415,47.44136,47.44109,47.4409,47.44071,47.4405,47.44025,47.4400333,47.4398167,47.4396,47.4393833,47.4391667,47.43895,47.438625,47.4383,47.43792,47.43785,47.43762,47.43749,47.43718,47.43687,47.43672,47.4364333,47.4361467,47.43586,47.4355733,47.4352867,47.435,47.4347167,47.4344333,47.43415,47.43384,47.43363,47.4334,47.43317,47.43302,47.43296,47.43287,47.43284,47.43283,47.43278,47.43269,47.432475,47.43226,47.43211,47.4319067,47.4317033,47.4315,47.43137,47.43129,47.43118,47.43106,47.430745,47.43043,47.43011,47.42979,47.42947,47.42915,47.4288767,47.4286033,47.42833,47.4280567,47.4277833,47.42751,47.42732,47.42722,47.42714,47.42705,47.42693,47.426785,47.42664,47.426495,47.42635,47.42627,47.42614,47.425945,47.42575,47.4256,47.42553,47.425415,47.4253,47.4252,47.42507,47.42501,47.42492,47.424765,47.42461,47.424455,47.4243,47.42418,47.42411,47.42397,47.423715,47.42346,47.4232,47.42294,47.4226,47.42226,47.42192,47.42158,47.42141,47.42127,47.420985,47.4207,47.42042,47.42014,47.419855,47.41957,47.41926,47.4190433,47.4188267,47.41861,47.4183933,47.4181767,47.41796,47.4177433,47.4175267,47.41731,47.4171,47.41678,47.41646,47.416145,47.41583,47.415565,47.4153,47.4151,47.41489,47.41468,47.414485,47.41429,47.41409,47.41389,47.41369,47.41349,47.41329,47.41309,47.412865,47.41264,47.41247,47.41223,47.411955,47.41168,47.4114,47.41112,47.41094,47.41075,47.410445,47.41014,47.40983,47.40952,47.40944,47.40938,47.40933,47.40932,47.409355,47.40939,47.40939,47.40933,47.4091933,47.4090567,47.40892,47.4087833,47.4086467,47.40851,47.4083733,47.4082367,47.4081,47.40802,47.40797,47.40792,47.407935,47.40795,47.40793,47.408225,47.40852,47.40857,47.40862,47.40865,47.40869,47.40868,47.40862,47.40855,47.40852,47.40845,47.40831,47.408095,47.40788,47.40775,47.40764,47.4075167,47.4073933,47.40727,47.40715,47.40703,47.40691,47.4067867,47.4066633,47.40654,47.4064033,47.4062667,47.40613,47.40592,47.40571,47.4054467,47.4051833,47.40492,47.40466,47.4044,47.40414,47.40388,47.40362,47.40336,47.4031133,47.4028667,47.40262,47.40232,47.4020633,47.4018067,47.40155,47.4012933,47.4010367,47.40078,47.4005233,47.4002667,47.40001,47.3997533,47.3994967,47.39924,47.3990475,47.398855,47.3986625,47.39847,47.398275,47.39808,47.397885,47.39769,47.39739,47.39726,47.397045,47.39683,47.396615,47.3964,47.39611,47.39582,47.39553,47.39524,47.39495,47.39466,47.3943733,47.3940867,47.3938,47.39351,47.39322,47.39293,47.3926433,47.3923567,47.39207,47.39186,47.39158,47.39127,47.391045,47.39082,47.3906,47.39038,47.39011,47.38985,47.38958,47.38937,47.38904,47.38874,47.3885067,47.3882733,47.38804,47.38781,47.38758,47.38735,47.38702,47.38665,47.38643,47.38631,47.38618,47.38595,47.38572,47.38573,47.38569,47.38562,47.38556,47.38534,47.38518,47.38506,47.38499,47.38498,47.384985,47.38499,47.384995,47.385,47.3849733,47.3849467,47.38492,47.3848967,47.3848733,47.38485,47.38488,47.3849533,47.3850267,47.3851,47.385205,47.38531,47.38537,47.38537,47.38536,47.38534,47.38539,47.3854,47.38549,47.38558,47.38564,47.38573,47.38582,47.38591,47.386,47.3860867,47.3861733,47.38626,47.38635,47.38644,47.38653,47.38662,47.38671,47.3868,47.3868867,47.3869733,47.38706,47.38715,47.38724,47.38733,47.38745,47.38756,47.38767,47.38778,47.3878867,47.3879933,47.3881,47.38821,47.38832,47.38843,47.38854,47.38865,47.38876,47.38885,47.38891,47.38896,47.389085,47.38921,47.389335,47.38946,47.38952,47.38954,47.389565,47.38959,47.3896,47.38964,47.38968,47.3897,47.38972,47.38971,47.3897,47.3896767,47.3896533,47.38963,47.38961,47.38954,47.38957,47.38958,47.38956,47.38954,47.38952,47.3895,47.38948,47.38946,47.3894367,47.3894133,47.38939,47.3893667,47.3893433,47.38932,47.3893,47.38928,47.38926,47.38928,47.38928,47.38931,47.38933,47.3893,47.38926,47.38924,47.38922,47.3892,47.38918,47.38914,47.3891167,47.3890933,47.38907,47.3890433,47.3890167,47.38899,47.3889733,47.3889567,47.38894,47.38895,47.38888,47.3889,47.3889,47.38887,47.38883,47.38878,47.38853,47.38832,47.38808,47.38785,47.38762,47.38739,47.38716,47.38693,47.3867,47.38648,47.38626,47.385975,47.38569,47.38541,47.38525,47.38531,47.38531,47.38525,47.38516,47.3851,47.38508,47.385095,47.38511,47.38512,47.38513,47.385155,47.38518,47.3852,47.38522,47.38529,47.38533,47.3853,47.38525,47.385255,47.38526,47.385275,47.38529,47.38528,47.38527,47.38521,47.38514,47.38504,47.38489,47.38474,47.38459,47.38454,47.38447,47.38436,47.3844,47.3844,47.38433,47.38419,47.38405,47.38391,47.38373,47.38362,47.38342,47.38323,47.383095,47.38296,47.38281,47.3827,47.38264,47.38258,47.38265,47.38266,47.38263,47.38257,47.3825633,47.3825567,47.38255,47.382545,47.38254,47.382525,47.38251,47.38245,47.38239,47.38228,47.382175,47.38207,47.38194,47.38181,47.38175,47.3817,47.38165,47.38156,47.38146,47.38132,47.38124,47.38091,47.38077,47.38055,47.38033,47.38011,47.37994,47.37989,47.37983,47.37982,47.37985,47.37986,47.37982,47.37978,47.37976,47.37974,47.37972,47.37967,47.37961,47.37953,47.37942,47.37931,47.37914,47.37897,47.37881,47.37856,47.3783567,47.3781533,47.37795,47.3777467,47.3775433,47.37734,47.3771467,47.3769533,47.37676,47.3765667,47.3763733,47.37618,47.3762,47.37619,47.37616,47.37612,47.37606,47.37601,47.37578,47.3755467,47.3753133,47.37508,47.3748433,47.3746067,47.37437,47.37416,47.37395,47.37374,47.37353,47.37342,47.37343,47.37342,47.37337,47.3733,47.37326,47.372975,47.37269,47.37249,47.37229,47.37209,47.371925,47.37176,47.371595,47.37143,47.371255,47.37108,47.370945,47.37081,47.370585,47.37036,47.37013,47.36999,47.36983,47.36971,47.3695,47.369255,47.36901,47.36885,47.36868,47.36856,47.36839,47.36817,47.36792,47.36768,47.36744,47.36728,47.36704,47.3668,47.3665,47.3662,47.3659,47.3657,47.3655,47.3653,47.365135,47.36497,47.3647867,47.3646033,47.36442,47.3642367,47.3640533,47.36387,47.3636867,47.3635033,47.36332,47.3631367,47.3629533,47.36277,47.36259,47.36241,47.36223,47.36194,47.36167,47.36136,47.36105,47.36075,47.36045,47.36015,47.35985,47.35959,47.35928,47.35907,47.35886,47.35865,47.3584433,47.3582367,47.35803,47.35782,47.35761,47.3574,47.3572133,47.3570267,47.35684,47.3566567,47.3564733,47.35629,47.3561033,47.3559167,47.35573,47.3555433,47.3553567,47.35517,47.354985,47.3548,47.35461,47.3543633,47.3541167,47.35387,47.3536267,47.3533833,47.35314,47.3528933,47.3526467,47.3524,47.3521533,47.3519067,47.35166,47.3513967,47.3511333,47.35087,47.3506067,47.3503433,47.35008,47.34982,47.34956,47.3493,47.3490367,47.3487733,47.34851,47.3482467,47.3479833,47.34772,47.3474567,47.3471933,47.34693,47.3466667,47.3464033,47.34614,47.3458767,47.3456133,47.34535,47.34504,47.34481,47.34458,47.34437,47.34416,47.34395,47.34374,47.3436,47.34334,47.343125,47.34291,47.342695,47.34248,47.34224,47.342025,47.34181,47.341595,47.34138,47.34113,47.34088,47.34068,47.34048,47.34036,47.3403425,47.340325,47.3403075,47.34029,47.34031,47.34039,47.340455,47.34052,47.3406275,47.340735,47.3408425,47.34095,47.34103,47.34112,47.341295,47.34147,47.34159,47.34171,47.34178,47.341865,47.34195,47.3420533,47.3421567,47.34226,47.34236,47.34246,47.342605,47.34275,47.34291,47.343,47.34307,47.34309,47.34311,47.34311,47.34314,47.3432,47.34343,47.3436,47.34376,47.34392,47.3440433,47.3441667,47.34429,47.34444,47.34448,47.3445,47.34455,47.3446933,47.3448367,47.34498,47.3451133,47.3452467,47.34538,47.34551,47.34564,47.34577,47.34595,47.34613,47.3462833,47.3464367,47.34659,47.34678,47.3468767,47.3469733,47.34707,47.347145,47.34722,47.3473575,47.347495,47.3476325,47.34777,47.34789,47.34801,47.34806,47.34804,47.34792,47.34782,47.3477,47.34754,47.34726,47.34698,47.34662,47.34655,47.34651,47.34648,47.34648,47.34651,47.34656,47.346735,47.34691,47.34708,47.34725,47.3474433,47.3476367,47.34783,47.34804,47.34825,47.34846,47.34867,47.348805,47.34894,47.34906,47.34918,47.3493,47.34942,47.34954,47.34966,47.34978,47.34989,47.34996,47.35001,47.350025,47.35004,47.3501,47.35017,47.350285,47.3504,47.35049,47.35058,47.350685,47.35079,47.35092,47.35105,47.35118,47.35131,47.35134,47.35135,47.35135,47.35137,47.35145,47.35157,47.35175,47.35188,47.352,47.3523,47.35243,47.35261,47.35279,47.35297,47.3531533,47.3533367,47.35352,47.3537033,47.3538867,47.35407,47.35421,47.35435,47.35444,47.35453,47.35462,47.3547,47.35475,47.3547733,47.3547967,47.35482,47.354855,47.35489,47.35491,47.35493,47.35495,47.35499,47.35505,47.3552367,47.3554233,47.35561,47.355775,47.35594,47.35603,47.35604,47.35605,47.35608,47.35615,47.35624,47.35642,47.35672,47.35681,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35482,47.35482,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353135,47.35288,47.35263,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33726,47.33705,47.33697,47.336845,47.33672,47.33659,47.33641,47.336235,47.33606,47.3358967,47.3357333,47.33557,47.3354067,47.3352433,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33423,47.3340533,47.3338767,47.3337,47.33353,47.33336,47.33326,47.3331275,47.332995,47.3328625,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33153,47.33134,47.33115,47.330965,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.323975,47.32382,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.32143,47.321495,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32163,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31251,47.31246,47.3124,47.3124,47.31242,47.31252,47.31274,47.31295,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.326775,47.32698,47.32718,47.32738,47.32762,47.32786,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33181,47.3320767,47.3323433,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.3425433,47.3427667,47.34299,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.3456,47.34566,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.348415,47.34867,47.348925,47.34918,47.34939,47.3496,47.34981,47.3500233,47.3502367,47.35045,47.35066,47.35087,47.35108,47.35132,47.35142,47.35158,47.35174,47.3519,47.352,47.35211,47.3523033,47.3524967,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35361,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.3553067,47.3555433,47.35578,47.3560167,47.3562533,47.35649,47.3567267,47.3569633,47.3572,47.3574367,47.3576733,47.35791,47.3581467,47.3583833,47.35862,47.3588567,47.3590933,47.35933,47.3595667,47.3598033,47.36004,47.3602767,47.3605133,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.364505,47.36474,47.364975,47.36521,47.3655885881,47.36576,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576112735,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.3657613959,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576166445,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576193299,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576220154,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576247009,47.36609,47.36633,47.36653,47.36667,47.3669,47.36708,47.3671,47.36712,47.36707,47.367005,47.36694,47.36687,47.3668,47.36672,47.3668,47.36703,47.36725,47.36747,47.3677367,47.3680033,47.36827,47.3685367,47.3688033,47.36907,47.3691,47.36912,47.369455,47.36979,47.36983,47.36988,47.3699,47.369945,47.36999,47.37007,47.37007,47.3703,47.37057,47.37076,47.371005,47.37125,47.371495,47.37174,47.3719867,47.3722333,47.37248,47.372715,47.37295,47.373185,47.37342,47.373655,47.37389,47.37413,47.37437,47.37436,47.3743,47.37429,47.374235,47.37418,47.3743,47.37442,47.37454,47.37466,47.37445,47.37424,47.37405,47.37386,47.37367,47.3734833,47.3732967,47.37311,47.372915,47.37267,47.37243,47.3721533,47.3718767,47.3716,47.371385,47.37117,47.37097,47.37095,47.3709,47.37099,47.3712233,47.3714567,47.37169,47.37186,47.37203,47.3722,47.37233,47.37241,47.3725167,47.3726233,47.37273,47.3728367,47.3729433,47.37305,47.37315,47.37325,47.37335,47.37345,47.37353,47.37361,47.373685,47.37376,47.37386,47.37397,47.374055,47.37414,47.374225,47.37431,47.3744,47.3744425,47.374485,47.3745275,47.37457,47.374625,47.37468,47.374735,47.37479,47.374835,47.37488,47.374955,47.37503,47.375115,47.3752,47.37525,47.37526,47.37527,47.37528,47.37533,47.375319,47.3752,47.3748,47.37447,47.37414,47.373805,47.37347,47.37317,47.3731,47.37301,47.372905,47.3728,47.37272,47.37261,47.37254,47.37242,47.37233,47.37213,47.37193,47.37173,47.37157,47.37133,47.37109,47.37095,47.37082,47.37074,47.37066,47.37054,47.3704,47.37026,47.37022,47.37005,47.36996,47.36979,47.369485,47.36918,47.36887,47.36856,47.36817,47.3679,47.36758,47.367365,47.36715,47.366875,47.3666,47.36633,47.36606,47.36583,47.36558,47.36533,47.36508,47.36488,47.36468,47.36456,47.36435,47.36435,47.36408,47.36381,47.36355,47.36329,47.36303,47.36277,47.3625667,47.3623633,47.36216,47.361985,47.36181,47.36168,47.361555,47.36143,47.36131,47.36119,47.36109,47.36099,47.36093,47.36089,47.360875,47.36086,47.360845,47.36083,47.36085,47.36092,47.36106,47.36134,47.361525,47.36171,47.36191,47.36209,47.362335,47.36258,47.36283,47.3630833,47.3633367,47.36359,47.36371,47.36374,47.36376,47.36375,47.36372,47.36368,47.36362,47.3634075,47.363195,47.3629825,47.36277,47.36259,47.36241,47.36223,47.3620625,47.361895,47.3617275,47.36156,47.36137,47.36118,47.36109,47.361,47.36091,47.3608233,47.3607367,47.36065,47.36056,47.36047,47.36038,47.36029,47.3602,47.36011,47.36002,47.35993,47.35984,47.35975,47.35966,47.35957,47.359445,47.35932,47.359195,47.35907,47.358972,47.358874,47.358776,47.358678,47.35858,47.35849,47.358425,47.35836,47.35834,47.3583325,47.358325,47.3583175,47.35831,47.3583025,47.358295,47.3582875,47.35828,47.3582725,47.358265,47.3582575,47.35825,47.35825,47.35831,47.3583675,47.358425,47.3584825,47.35854,47.3586,47.35866,47.35872,47.35878,47.35886,47.35894,47.35902,47.35909,47.35917,47.35935,47.35948,47.35959,47.3597,47.3597767,47.3598533,47.35993,47.359985,47.36004,47.360095,47.36015,47.36024,47.36035,47.36046,47.36059,47.360675,47.36076,47.360845,47.36093,47.36102,47.3610667,47.3611133,47.36116,47.361195,47.36123,47.361265,47.3613,47.36135,47.36143,47.361515,47.3616,47.361685,47.36177,47.36182,47.36187,47.36191,47.36195,47.36199,47.3620267,47.3620633,47.3621,47.36213,47.36216,47.36219,47.36221,47.36223,47.36225,47.36227,47.3622967,47.3623233,47.36235,47.3623767,47.3624033,47.36243,47.36247,47.36251,47.36256,47.36261,47.36266,47.36271,47.362755,47.3628,47.36282,47.36281,47.36279,47.362735,47.36268,47.36267,47.36269,47.36265,47.36262,47.36262,47.36264,47.36254,47.36249,47.362385,47.36228,47.36218,47.36208,47.36197,47.36186,47.36174,47.36168,47.361555,47.36143,47.361305,47.36118,47.36097,47.360845,47.36072,47.36054,47.3604,47.36033,47.360115,47.3599,47.359685,47.35947,47.35915,47.35894,47.35873,47.35852,47.35831,47.35807,47.35783,47.357625,47.35742,47.357215,47.35701,47.35696,47.35683,47.35678,47.35673,47.356675,47.35662,47.35658,47.35657,47.3566,47.35663,47.35663,47.3566,47.35654,47.35643,47.3563,47.3562,47.35607,47.35591,47.35573,47.35555,47.355365,47.35518,47.35498,47.35483,47.35468,47.35454,47.354385,47.35423,47.35396,47.35372,47.353555,47.35339,47.353165,47.35294,47.35272,47.3525,47.35238,47.35203,47.35184,47.35162,47.35146,47.35138,47.35127,47.351195,47.35112,47.351045,47.35097,47.35082,47.3507067,47.3505933,47.35048,47.35037,47.35026,47.35015,47.34997,47.349845,47.34972,47.3495467,47.3493733,47.3492,47.349065,47.34893,47.348825,47.34872,47.34863,47.34856,47.34832,47.34808,47.347835,47.34759,47.34733,47.3471525,47.346975,47.3467975,47.34662,47.3464033,47.3461867,47.34597,47.3457533,47.3455367,47.34532,47.3451067,47.3448933,47.34468,47.34459,47.34439,47.344,47.343675,47.34335,47.34298,47.3427333,47.3424867,47.34224,47.34187,47.34171,47.34159,47.34149,47.341355,47.34122,47.34105,47.34072,47.34061,47.34051,47.34046,47.34028,47.3401,47.34007,47.33988,47.339725,47.33957,47.339415,47.33926,47.33916,47.33907,47.33901,47.33885,47.33869,47.33853,47.33837,47.33835,47.33813,47.33791,47.33769,47.33747,47.33722,47.33697,47.336845,47.33672,47.33659,47.33641,47.336295,47.33618,47.3359967,47.3358133,47.33563,47.3354467,47.3352633,47.33508,47.3349433,47.3348067,47.33467,47.3345,47.33427,47.33408,47.33389,47.3337,47.33353,47.33336,47.333185,47.33301,47.33287,47.33273,47.3325467,47.3323633,47.33218,47.3319967,47.3318133,47.33163,47.33142,47.33121,47.330995,47.33078,47.3307,47.33054,47.33032,47.33008,47.32981,47.329595,47.32938,47.32936,47.32926,47.32916,47.32902,47.32883,47.32863,47.32858,47.32842,47.328195,47.32797,47.327615,47.32726,47.326945,47.32663,47.3264,47.32624,47.3261,47.32586,47.32574,47.32555,47.3253933,47.3252367,47.32508,47.3249233,47.3247667,47.32461,47.32445,47.32429,47.32413,47.3239533,47.3237767,47.3236,47.32349,47.3234133,47.3233367,47.32326,47.32312,47.32298,47.32283,47.32268,47.32242,47.32236,47.32224,47.32215,47.32206,47.32166,47.32161,47.3215,47.32136,47.32146,47.32157,47.3216,47.32158,47.32154,47.32141,47.32138,47.32134,47.321345,47.32135,47.32133,47.32119,47.32115,47.32116,47.3212,47.3212,47.32135,47.321435,47.32152,47.32156,47.3216033,47.3216467,47.32169,47.32176,47.32183,47.32181,47.321815,47.32182,47.32182,47.32182,47.32182,47.32186,47.32182,47.32171,47.3215,47.32129,47.32122,47.32117,47.32116,47.32118,47.32131,47.32144,47.32157,47.32163,47.32165,47.32166,47.32162,47.32155,47.32147,47.32139,47.32125,47.32111,47.320975,47.32084,47.32049,47.32039,47.32029,47.32025,47.32016,47.32012,47.32008,47.31993,47.31978,47.31968,47.31961,47.31954,47.3195,47.31942,47.319225,47.31903,47.31889,47.31887,47.31887,47.31892,47.31913,47.31916,47.31918,47.31913,47.31913,47.31915,47.31921,47.31927,47.3193,47.319245,47.31919,47.31919,47.31928,47.31927,47.31924,47.31916,47.31899,47.31882,47.318625,47.31843,47.31833,47.31814,47.31801,47.31788,47.31775,47.31762,47.31745,47.31735,47.3171633,47.3169767,47.31679,47.31659,47.31639,47.31619,47.31599,47.31586,47.315895,47.31593,47.31596,47.31599,47.31601,47.31603,47.31601,47.31599,47.3159267,47.3158633,47.3158,47.31577,47.31574,47.31569,47.31563,47.31559,47.31547,47.31512,47.31477,47.31442,47.31407,47.31372,47.31337,47.31325,47.31318,47.31277,47.31265,47.31253,47.31246,47.3124,47.3124,47.31242,47.31252,47.31284,47.31316,47.31345,47.31374,47.31401,47.31428,47.314555,47.31483,47.315025,47.31522,47.315415,47.31561,47.31568,47.31581,47.316045,47.31628,47.31637,47.3164,47.31641,47.31639,47.3165867,47.3167833,47.31698,47.31717,47.31725,47.31745,47.31763,47.31781,47.31801,47.31825,47.318445,47.31864,47.31878,47.31881,47.31886,47.31891,47.31894,47.31903,47.3192,47.31937,47.31954,47.31967,47.319835,47.32,47.3202033,47.3204067,47.32061,47.3208133,47.3210167,47.32122,47.32149,47.32172,47.32195,47.32218,47.3224067,47.3226333,47.32286,47.32289,47.32297,47.323,47.32304,47.32305,47.3232833,47.3235167,47.32375,47.3239833,47.3242167,47.32445,47.3246833,47.3249167,47.32515,47.325365,47.32558,47.32585,47.32612,47.3263,47.32657,47.3267767,47.3269833,47.32719,47.327415,47.32764,47.32787,47.3281,47.32838,47.3286333,47.3288867,47.32914,47.32926,47.3295267,47.3297933,47.33006,47.33034,47.3305533,47.3307667,47.33098,47.3313,47.33162,47.33187,47.33212,47.332365,47.33261,47.33269,47.33299,47.333235,47.33348,47.333725,47.33397,47.33427,47.334485,47.3347,47.33491,47.33512,47.3353667,47.3356133,47.33586,47.33617,47.33648,47.33643,47.33638,47.33638,47.33641,47.33646,47.33653,47.33663,47.336845,47.33706,47.337275,47.33749,47.337675,47.33786,47.33804,47.33823,47.33853,47.33876,47.339025,47.33929,47.339555,47.33982,47.34017,47.3402,47.34027,47.34029,47.34032,47.3403,47.3405,47.34059,47.34079,47.34102,47.34118,47.34144,47.3417,47.34201,47.34232,47.34255,47.34278,47.34298,47.34318,47.34334,47.34347,47.3436,47.34368,47.34398,47.34428,47.34458,47.34488,47.345185,47.34549,47.34568,47.34579,47.34584,47.34594,47.34604,47.34614,47.34624,47.34639,47.34651,47.346715,47.34692,47.347145,47.34737,47.3475833,47.3477967,47.34801,47.34816,47.3483967,47.3486333,47.34887,47.3492,47.34941,47.34962,47.34983,47.3500367,47.3502433,47.35045,47.35066,47.35087,47.35108,47.3513,47.35142,47.35158,47.35174,47.3519,47.352,47.3521,47.3522967,47.3524933,47.35269,47.35293,47.3531,47.3532,47.35328,47.35336,47.35344,47.35352,47.35357,47.35372,47.35384,47.35396,47.354095,47.35423,47.35443,47.35465,47.35486,47.35507,47.355285,47.3555,47.35575,47.356,47.35625,47.3565,47.35675,47.357,47.35725,47.3575,47.35775,47.358,47.35825,47.3585,47.35875,47.359,47.35925,47.3595,47.35975,47.36,47.36025,47.3605,47.36075,47.3609833,47.3612167,47.36145,47.3616867,47.3619233,47.36216,47.3623933,47.3626267,47.36286,47.3630933,47.3633267,47.36356,47.3637967,47.3640333,47.36427,47.3645167,47.3647633,47.36501,47.36526,47.36551,47.36576273876]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#000000","weight":3,"opacity":0.8,"fill":false,"fillColor":"#000000","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[47.51302,8.75775,10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#3eaf15","weight":5,"opacity":0.8,"fill":true,"fillColor":"#3eaf15","fillOpacity":0.2},null,null,null,null,"Start of race",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[47.3655885881,8.54543,10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#e73939","weight":5,"opacity":0.8,"fill":true,"fillColor":"#e73939","fillOpacity":0.2},null,null,null,null,"End of race",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[47.5413932128899,8.643893804401159,{"iconUrl":{"data":"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png","index":0},"iconWidth":32,"iconHeight":37,"iconAnchorX":0,"iconAnchorY":0},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Buch am Irchel: 4.83km at 4.2% **",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[47.45665840019784,8.743660245090725,{"iconUrl":{"data":"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png","index":0},"iconWidth":32,"iconHeight":37,"iconAnchorX":0,"iconAnchorY":0},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Kyburg: 1.28km at 10.3% ****",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[47.35151242961302,8.624014738015832,{"iconUrl":{"data":"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png","index":0},"iconWidth":32,"iconHeight":37,"iconAnchorX":0,"iconAnchorY":0},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Maur-Binz: 3.7km at 4.4% **",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[47.36219723777833,8.607488349080088,{"iconUrl":{"data":"https://www.vanuatubeachbar.com/wp-content/uploads/leaflet-maps-marker-icons/mountains.png","index":0},"iconWidth":32,"iconHeight":37,"iconAnchorX":0,"iconAnchorY":0},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"ZurichbergStrasse/Witikon: 2.63km at 5.3% **",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[47.3124,47.57552],"lng":[8.54172,8.766590000000001]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (function(x, el, data) {\n        var map = this;\n        map.on('click', function(e) {\n        var coord = e.latlng;\n        var lat = coord.lat;\n        var lng = coord.lng;\n        console.log('You clicked the map at latitude: ' + lat + ' and       longitude: ' + lng);\n        });\n      }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<p>While the main climbs aren’t particularly difficult, except Kyburg, repeating them 7 times after more than 200km will be certainly challenging. Besides, we can’t only judge a climb by the average gradient as, sometimes a climb may be composed of a rather flat part, followed by very steep parts, making it more challenging than a regular gradient. That’s the case of the Buch am Irchel climb.</p>
<blockquote class="mycols-embed-col blockquote">
<p lang="en">
<a href="https://mycols.app/col/buch-am-irchel-berg-am-irchel" target="_blank">Buch am Irchel</a>, Berg Am Irchel, Switzerland
</p>
• Distance: 4.8 km, Elevation: 201 m, Avg. Grade: 4.3 %
</blockquote>
<script async="" src="https://mycols.app/js/embed.js" charset="utf-8"></script><p>As a side note, the current GPX file indicates a duration of 8 hours, which gives roughly 35km/h average speed, substantially lower than what the pro will do during the race.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">duration</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">avg_speed</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">275</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">duration</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section><section id="what-about-the-elevation-profile" class="level3"><h3 class="anchored" data-anchor-id="what-about-the-elevation-profile">What about the elevation profile?</h3>
<p>The previous map does not say much about the <strong>elevation profile</strong>. The cumulated positive elevation is obtained by summing the <strong>elevation difference</strong> between 2 <strong>consecutive</strong> time points, only taking <strong>positive</strong> results:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gain</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">n_iter</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">while</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">n_iter</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">current_elevation</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">new_elevation</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">diff</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">new_elevation</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">current_elevation</span></span>
<span>    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">diff</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gain</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gain</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">diff</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
</details>
</div>
<p>Note that the website gain is officially 4470m whereas ours is 4492m. This difference might be explained by the usage of different <strong>smoothing algorithms</strong> for the <a href="https://larahamilton.com/strava-elevation/">elevation</a>. Funnily, we all had different bike computers and none of us had the same elevation result at the end of the ride.</p>
<p>We split the trace into 2 parts. The first loop takes place around Winterthur, north of Zurich. Then, a transition leads to the <strong>city loop</strong>, which is repeated 7 times.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">race_route</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2023-11-03 09:13:52"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">city_circuit</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2023-11-03 09:13:52"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">race_route</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Elevation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkblue"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">city_circuit</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Time</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Elevation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Zurich UCI 2024 Elevation profile"</span>,</span>
<span>        subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"men elite race"</span>,</span>
<span>        caption <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cumulated elevation: + %sm"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">gain</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation (m)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        axis.title.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        axis.text.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        axis.ticks.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/index_files/figure-html/map-elevation-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As you can see, altough the race never goes above 700m, we manage to reach 4500m elevation gain.</p>
</section><section id="a-3d-elevation-profile-with-rayshader" class="level3"><h3 class="anchored" data-anchor-id="a-3d-elevation-profile-with-rayshader">A 3D elevation profile with rayshader</h3>
<p>We could cumulate both information about elevation and x and y coordinates to get the <strong>3D profile</strong> with <a href="https://www.rayshader.com/"><code>rayshader</code></a>. The <code>make_3d_plot</code> function first creates a <code>ggplot</code> object using coordinates and <code>color_col</code> as color aesthetic. We set <code>color_col</code> to <code>Elevation</code> and hide the x and y axis information (as they won’t be very useful). Could you guess where <code>(47.5, 8.4)</code> is? Probably not :). This plot object is passed to <code>plot_gg</code>, to proceed to the 3D conversion.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">make_3d_plot</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">color_col</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">legend_title</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">scale</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">show_legend</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tmp_3d_plot</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">.data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">color_col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html">scale_color_continuous</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viridis"</span>, limits <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">color_col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">legend_title</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>     axis.title.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.text.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.ticks.x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.title.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.text.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.ticks.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     legend.position <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">show_legend</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span></span>
<span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_gg</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tmp_3d_plot</span>, width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, multicore <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, windowsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1600</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, sunangle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">225</span>, zoom <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.40</span>, phi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, theta <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, scale <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">scale</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">render_snapshot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_3d_plot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation (m)"</span>, show_legend <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/index_files/figure-html/3d-profil-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wouldn’t it be nice to be able to move the plot around and have different angles? We can do this with the help of <a href="https://coolbutuseless.github.io/package/ggrgl/articles/geom-path-3d.html"><code>ggrgl</code></a>, particularly the <code>geom_path_3d()</code>. We extract some Zurich’s canton cities and project them on the map with <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> to add annotations. Since this plot does not render with quarto, we included an image after the code.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># https://simplemaps.com/data/ch-cities</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ch_cities</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ch.csv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> </span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zh_cities</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ch_cities</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">city</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Zürich"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Winterthur"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Binz"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Uster"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dübendorf"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Küsnacht"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">p</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zch_gpx</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">routes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_path_3d</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, z <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Elevation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        extrude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, extrude_edge_colour <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'grey20'</span>, extrude_face_fill <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'grey80'</span>,</span>
<span>    extrude_edge_alpha <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zh_cities</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lng</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lat</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">city</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">zh_cities</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lng</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">lat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, colour <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'red'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_ggrgl</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>  </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation 3D profile"</span>,</span>
<span>    subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"World UCI road men elite 2024, Zurich"</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">devoutrgl</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rgldev</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>fov <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, view_angle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">p</span></span></code></pre></div>
</details>
</div>
<p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/rgl-profile.png" alt="rgl profile of the race" width="100%"></p>
<p>On the left, you can notice the steepest climb (Kyburg), that connects the two loops. I highly recommend you to play around locally so you can try out different angles and explore the different parts.</p>
<p>Overall, 4490m for 275km is definitely not the most hilly ride for professional athletes, compared to the amateur Alpen Brevet Platinium, which offers 275km for 8907m elevation, just a tiny bit higher than <strong>Mount Everest</strong>. Here again, it all depends on the average speed at which this race will go. I personally expect a value between 40-42km/h, depending on the weather conditions (rain, wind, …). Let’s see …</p>
</section></section><section id="the-ride" class="level2"><h2 class="anchored" data-anchor-id="the-ride">The ride</h2>
<section id="fit-to-csv" class="level3"><h3 class="anchored" data-anchor-id="fit-to-csv">FIT TO CSV</h3>
<p>In the below section, we analyse few logs of my ride, which are extracted from the my bike GPS <code>fit</code> file. We first convert this file to a format that R can read, for instance <code>csv</code>. I used this <a href="https://gotoes.org/strava/convert_fit_files_to_csv.php">website</a>, but you can also find cli alternatives like <a href="https://developer.garmin.com/fit/fitcsvtool/">here</a>.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># I found this R package but could not make it work</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Given that it is 5 years old.</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#remotes::install_github("muschellij2/fit2csv")</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readr</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2024-09-08-063850.csv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 123
  GOTOES_CSV timestamp           position_lat position_long altitude heart_rate
  &lt;lgl&gt;      &lt;dttm&gt;                     &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt; &lt;lgl&gt;     
1 NA         2024-09-08 00:38:50         47.4          8.55     438. NA        
2 NA         2024-09-08 00:38:51         47.4          8.55     438. NA        
3 NA         2024-09-08 00:38:52         47.4          8.55     438. NA        
4 NA         2024-09-08 00:38:53         47.4          8.55     438. NA        
5 NA         2024-09-08 00:38:54         47.4          8.55     438. NA        
6 NA         2024-09-08 00:38:55         47.4          8.55     438. NA        
# ℹ 117 more variables: cadence &lt;dbl&gt;, distance &lt;dbl&gt;, speed &lt;dbl&gt;,
#   power &lt;dbl&gt;, compressed_speed_distance &lt;lgl&gt;, grade &lt;dbl&gt;,
#   resistance &lt;lgl&gt;, time_from_course &lt;lgl&gt;, cycle_length &lt;lgl&gt;,
#   temperature &lt;dbl&gt;, ...17 &lt;lgl&gt;, ...18 &lt;lgl&gt;, ...19 &lt;lgl&gt;, speed_1s &lt;lgl&gt;,
#   cycles &lt;lgl&gt;, total_cycles &lt;lgl&gt;, ...23 &lt;lgl&gt;, ...24 &lt;lgl&gt;, ...25 &lt;lgl&gt;,
#   ...26 &lt;lgl&gt;, ...27 &lt;lgl&gt;, ...28 &lt;lgl&gt;, ...29 &lt;lgl&gt;, ...30 &lt;lgl&gt;,
#   compressed_accumulated_power &lt;lgl&gt;, accumulated_power &lt;lgl&gt;, …</code></pre>
</div>
</div>
<p>We select only few interesting columns for the analysis and also remove the 43 minutes coffee break we took in the middle of the ride in Kyburg’s <a href="https://www.myswitzerland.com/en-ch/experiences/kyburg-castle-museum/">castle</a>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        Latitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">position_lat</span>,</span>
<span>        Longitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">position_long</span>,</span>
<span>        distance <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">distance</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span>        timestamp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">rowid</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">9017</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">timestamp</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">43</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, .default <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">timestamp</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">timestamp</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cadence</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">distance</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">speed</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">grade</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">temperature</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">calories</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">altitude</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Latitude</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">Longitude</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section><section id="data-summary" class="level3"><h3 class="anchored" data-anchor-id="data-summary">Data summary</h3>
<p>Below are some <strong>continuous</strong> variable summary using <code>gtsummary</code>. Notice the maximum gradient which was <strong>18.2%</strong>! The overall ride has a 1.1% grade, which means there is more climbings than downhills.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tbl_summary</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>include <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">speed</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cadence</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">grade</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all_continuous</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"continuous2"</span>,</span>
<span>    statistic <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all_continuous</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{mean}"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{min}"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"{max}"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, </span>
<span>    missing <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no"</span>,</span>
<span>    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">speed</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Speed (km/h)"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">cadence</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cadence (RPM)"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">grade</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Grade (%)"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power (Watts)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">modify_header</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">label</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"**Variable**"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">modify_caption</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"**Table 1. Ride summary**"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bold_labels</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="axdtgwxmsc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#axdtgwxmsc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#axdtgwxmsc thead, #axdtgwxmsc tbody, #axdtgwxmsc tfoot, #axdtgwxmsc tr, #axdtgwxmsc td, #axdtgwxmsc th {
  border-style: none;
}

#axdtgwxmsc p {
  margin: 0;
  padding: 0;
}

#axdtgwxmsc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#axdtgwxmsc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#axdtgwxmsc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#axdtgwxmsc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#axdtgwxmsc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#axdtgwxmsc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#axdtgwxmsc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#axdtgwxmsc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#axdtgwxmsc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#axdtgwxmsc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#axdtgwxmsc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#axdtgwxmsc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#axdtgwxmsc .gt_spanner_row {
  border-bottom-style: hidden;
}

#axdtgwxmsc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#axdtgwxmsc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#axdtgwxmsc .gt_from_md > :first-child {
  margin-top: 0;
}

#axdtgwxmsc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#axdtgwxmsc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#axdtgwxmsc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#axdtgwxmsc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#axdtgwxmsc .gt_row_group_first td {
  border-top-width: 2px;
}

#axdtgwxmsc .gt_row_group_first th {
  border-top-width: 2px;
}

#axdtgwxmsc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#axdtgwxmsc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#axdtgwxmsc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#axdtgwxmsc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#axdtgwxmsc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#axdtgwxmsc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#axdtgwxmsc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#axdtgwxmsc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#axdtgwxmsc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#axdtgwxmsc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#axdtgwxmsc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#axdtgwxmsc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#axdtgwxmsc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#axdtgwxmsc .gt_left {
  text-align: left;
}

#axdtgwxmsc .gt_center {
  text-align: center;
}

#axdtgwxmsc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#axdtgwxmsc .gt_font_normal {
  font-weight: normal;
}

#axdtgwxmsc .gt_font_bold {
  font-weight: bold;
}

#axdtgwxmsc .gt_font_italic {
  font-style: italic;
}

#axdtgwxmsc .gt_super {
  font-size: 65%;
}

#axdtgwxmsc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#axdtgwxmsc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#axdtgwxmsc .gt_indent_1 {
  text-indent: 5px;
}

#axdtgwxmsc .gt_indent_2 {
  text-indent: 10px;
}

#axdtgwxmsc .gt_indent_3 {
  text-indent: 15px;
}

#axdtgwxmsc .gt_indent_4 {
  text-indent: 20px;
}

#axdtgwxmsc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption><strong>Table 1. Ride summary</strong></caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header gt_col_headings">
<th id="<strong>Variable</strong>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"><strong>Variable</strong></th>
<th id="<strong>N = 17,356</strong>" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col"><strong>N = 17,356</strong></th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Speed (km/h)</td>
<td class="gt_row gt_center" headers="stat_0"><br></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Mean</td>
<td class="gt_row gt_center" headers="stat_0">27</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Minimum</td>
<td class="gt_row gt_center" headers="stat_0">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Maximum</td>
<td class="gt_row gt_center" headers="stat_0">68</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Cadence (RPM)</td>
<td class="gt_row gt_center" headers="stat_0"><br></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Mean</td>
<td class="gt_row gt_center" headers="stat_0">61</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Minimum</td>
<td class="gt_row gt_center" headers="stat_0">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Maximum</td>
<td class="gt_row gt_center" headers="stat_0">110</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Grade (%)</td>
<td class="gt_row gt_center" headers="stat_0"><br></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Mean</td>
<td class="gt_row gt_center" headers="stat_0">1.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Minimum</td>
<td class="gt_row gt_center" headers="stat_0">-14.4</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Maximum</td>
<td class="gt_row gt_center" headers="stat_0">18.2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label" style="font-weight: bold">Power (Watts)</td>
<td class="gt_row gt_center" headers="stat_0"><br></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Mean</td>
<td class="gt_row gt_center" headers="stat_0">151</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Minimum</td>
<td class="gt_row gt_center" headers="stat_0">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="label">&nbsp;&nbsp;&nbsp;&nbsp;Maximum</td>
<td class="gt_row gt_center" headers="stat_0">701</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="power-analysis" class="level3"><h3 class="anchored" data-anchor-id="power-analysis">Power analysis</h3>
<section id="background" class="level4"><h4 class="anchored" data-anchor-id="background">Background</h4>
<p><strong>Power</strong> measures how much <strong>work</strong> is done at a given time (in our case, on the bike). It is expressed in <strong>Watts</strong> (W. <code>1W = 1J/s</code>). Power is expressed as follows:</p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">P <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> Strength x velocity</span></code></pre></div>
<p>There are 2 ways to rise the power. At low <strong>velocity</strong> by putting more <strong>strength</strong> or increase the velocity while applying the same strength.</p>
<p>In cycling, we also calculate the <strong>Power/Body Weight</strong> ratio, as from physiological point of view, the more muscles, the more theoritical power. This is important in the climbs, where, because of the gravity, the weight becomes more important as the gradient increases. Therefore, taking cyclist 1 (bodyweight + bike 60kg) and cyclist 2 (bodyweight + bike 90kg) side by side on the same climb with similar bikes, cyclist 2 has to produce more power to climb at the same speed as cyclist 1.</p>
<p>Therefore, a 58kg pro cyclist climber and 100kg pro track cyclist may have similar power ratio for a given duration, even though the former will likely be better at longer efforts. Talking about power without considering the effort <strong>duration</strong> does not make much sense. World class women cyclists can sustain &gt; 19W/kg during 5s (1360 for a 70kg athlete), men cyclists can sustain 24 W/kg during 5 seconds (2160W output for 90kg).</p>
<p>We won’t have time to cover all the theory, but keep in mind that knowing your <strong>threshold power</strong> (FTP) is critical for successful training. This is the power you can theoretically sustain for 1h. Based on this, one can establish <strong>power zones</strong> to plan the training. For profesional riders, FTP are respectively &gt; 5W/kg for women and &gt; 5.8 W/kg for men. You can find more <a href="https://www.highnorth.co.uk/articles/power-profiling-cycling">here</a>.</p>
</section><section id="results" class="level4"><h4 class="anchored" data-anchor-id="results">Results</h4>
<p>To proceed, we create a plot showing the <strong>power</strong> as a function of the <strong>distance</strong>. We also add the elevation profile in the background with <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area()</a></code> with a rather transparent alpha setting, so the user can focus on the power data. We add some <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code> to see the relation between the power and distance ()<code>power ~ distance</code>) and display the mean power on an horizontal line with <code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline()</a></code>. On the second plot, we want to show the power <strong>distribution</strong> and leverage <code>geom_histogram</code>, the idea being to compare the mean power to the threshold power.</p>
<p>The power chart shows that my power is decreasing over time, not a surprise. There is an effect of the <strong>fatigue</strong> but also the <strong>weather</strong> conditions, as the last part of the ride was in the city and under heavy rain and we had to adjust the speed not to take too much risks. Besides, when looking at the power distribution, we notice that the average power is significantly below my threshold power (FTP), which is my theoretical maximum power for 1h. For a 5h ride, this makes sense as one wants to save energy to last as long as possible.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">make_time_plot</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">show_elevation</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">elevation_scale</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">p</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">distance</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">.data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>method <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>yintercept <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, linetype <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span>    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">show_elevation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">p</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">distance</span>, y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">altitude</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">elevation_scale</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, alpha <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.15</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">p</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">make_distrib_plot</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">.data</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>xintercept <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">250</span>, linetype <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkgreen"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>xintercept <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">dat</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[[</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">col</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, linetype <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashed"</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power_time</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_time_plot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"power"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>        x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span>        y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average power"</span>,</span>
<span>        fontface <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>,</span>
<span>        color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>,</span>
<span>        size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power over time"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distance (km)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power (Watts)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power_distrib</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_distrib_plot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"power"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>        x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">310</span>,</span>
<span>        y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2500</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Threshold power (FTP)"</span>,</span>
<span>        fontface <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>,</span>
<span>        color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkgreen"</span>,</span>
<span>        size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>        x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>,</span>
<span>        y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2500</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average power"</span>,</span>
<span>        fontface <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>,</span>
<span>        color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkred"</span>,</span>
<span>        size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>     axis.title.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.text.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>     axis.ticks.y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power distribution"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power (Watts)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power_time</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">power_distrib</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_annotation</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Power data"</span>,</span>
<span>  subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Elevation data shown in the background"</span>,</span>
<span>  caption <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"More about power: https://support.strava.com/hc/en-us/articles/216918457-Power"</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/index_files/figure-html/power-time-serie-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="speed" class="level3"><h3 class="anchored" data-anchor-id="speed">Speed</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_time_plot</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"speed"</span>, elevation_scale <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Speed (km/h)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distance (km)"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/index_files/figure-html/speed-ts-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The ride was covered at 27km/h average speed on an open road with wind and rain, definitely not the best conditions.</p>
<p>Interestingly, I found this nice <a href="https://www.gribble.org/cycling/power_v_speed.html">article</a> about the relation between power and speed. Overall, the simulator predicts 150W to maintain an average speed of 27km/h with a 0.5% gradient coefficient, not far from what we have here. It’s rather challenging to account for the wind, as it can sometimes help or makes things more challenging.</p>
</section><section id="calories" class="level3"><h3 class="anchored" data-anchor-id="calories">Calories</h3>
<p>During that ride, I consumed about 2549 calories, which corresponds to the average daily energy needs for an adult man.</p>
</section></section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This was a lot of fun to ride part of this upcoming event, even more to analyse the underlying data.</p>


</section> ]]></description>
  <category>sport</category>
  <category>R</category>
  <guid>https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/</guid>
  <pubDate>Tue, 10 Sep 2024 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2024-09-09-zurich-roadcycling-wc-2024/logo.png" medium="image" type="image/png" height="90" width="144"/>
</item>
<item>
  <title>Playing with Llama 3.1 in R</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2024-07-27-llama3.1/</link>
  <description><![CDATA[ 




<p>Meta <a href="https://ai.meta.com/blog/meta-llama-3-1/">recently announced Llama 3.1</a>, and there’s a lot of excitement. I finally had some time to experiment with locally run open-source models. The small 8B model, in particular, produces surprisingly useful output, with reasonable speed. Getting started is straightforward.</p>
<section id="running-llama-3.1-locally" class="level2">
<h2 class="anchored" data-anchor-id="running-llama-3.1-locally">Running Llama 3.1 Locally</h2>
<p>First, you’ll need to install Ollama, which you can download from <a href="https://ollama.com/download">here</a>.</p>
<p>Next, open your terminal and run:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ollama</span> run llama3.1:8b</span></code></pre></div>
<p>This command will pull and run the smallest Llama 3.1 model, which operates at a reasonable speed even on a MacBook Air. To exit, type <code>/bye</code>.</p>
<p>You can also directly provide a prompt in the terminal:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ollama</span> run llama3.1:8b <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tomorrow is a..."</span></span></code></pre></div>
</section>
<section id="using-llama-3.1-from-r" class="level2">
<h2 class="anchored" data-anchor-id="using-llama-3.1-from-r">Using Llama 3.1 from R</h2>
<p>Hause Lin has created a lovely R wrapper for Ollama, allowing you to use Llama 3.1 within your R scripts. To install the wrapper, use:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hauselin/ollamar"</span>)</span></code></pre></div>
<p>Now, you can use it as follows:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ollamar)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"llama3.1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tomorrow is a..."</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>)</span></code></pre></div>
</section>
<section id="applications" class="level2">
<h2 class="anchored" data-anchor-id="applications">Applications</h2>
<p>Running this locally without privacy concerns opens up a so many possibilities. For example, if you want to get a short summary of all the README files in your Git folder, you can do something like this:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(fs)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ollamar)</span>
<span id="cb5-4"></span>
<span id="cb5-5">files <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb5-6">  fs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dir_ls</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~/git"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">recurse =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">glob =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.md"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb5-8"></span>
<span id="cb5-9">summarize_md <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(file) {</span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate</span>(</span>
<span id="cb5-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"llama3.1"</span>,</span>
<span id="cb5-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb5-13">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Summarize in 3 bullet points, "</span>,</span>
<span id="cb5-14">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"use a descriptive title, "</span>,</span>
<span id="cb5-15">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"avoid sentences like 'this is a summary...', or 'Here are the 3 bullet points...'."</span>,</span>
<span id="cb5-16">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">readLines</span>(file), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-17">    ),</span>
<span id="cb5-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">output =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span></span>
<span id="cb5-19">  )</span>
<span id="cb5-20">}</span>
<span id="cb5-21"></span>
<span id="cb5-22">ans <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb5-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> files) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">summary =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(file, summarize_md))</span>
<span id="cb5-25"></span>
<span id="cb5-26">ans</span>
<span id="cb5-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb5-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   file                                                   summary</span></span>
<span id="cb5-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;fs::path&gt;                                             &lt;chr&gt;</span></span>
<span id="cb5-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 /Users/christophsax/git/adminr/201909_slides/README.md "**Autumn Meetup Highl…</span></span>
<span id="cb5-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 /Users/christophsax/git/adminr/202103_slides/README.md "**Key Takeaways from …</span></span>
<span id="cb5-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 /Users/christophsax/git/adminr/202205_slides/README.md "**Spring Meetup 2022 …</span></span>
<span id="cb5-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 /Users/christophsax/git/adminr/202212_slides/README.md "**Key Takeaways from …</span></span></code></pre></div>
<p>With this setup, you can quickly generate summaries for README files, or any other text documents, directly within R. Happy experimenting!</p>


</section>

 ]]></description>
  <category>LLM</category>
  <guid>https://blog.cynkra.com/posts/2024-07-27-llama3.1/</guid>
  <pubDate>Sat, 27 Jul 2024 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2024-07-27-llama3.1/llama.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>shinyMobile 2.0.0: a preview</title>
  <dc:creator>Veerle van Leemput and David Granjon</dc:creator>
  <link>https://blog.cynkra.com/posts/2024-05-13-shinyMobile-2.0.0/</link>
  <description><![CDATA[ <div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://blog.cynkra.com/posts/2024-05-13-shinyMobile-2.0.0/logo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:25.0%"></p>
</figure>
</div>
<p>shinyMobile has been enabling the creation of exceptional R Shiny apps for both iOS and Android for nearly five years, thanks to the impressive open-source Framework7 <a href="https://framework7.io/">template</a> that drives its capabilities.</p>
<p>This year shinyMobile gets a major update to v2.2.0. I’d like to warmly thank <a href="https://hypebright.nl/">Veerle van Leemput</a> and Michael S. Czahor from <a href="https://linktr.ee/athlyticz">AthlyticZ</a> for providing significant support during this marathon.</p>
<section id="whats-new" class="level1"><h1>What’s new</h1>
<p>shinyMobile 1.0.0 and above have been running on an old version of Framework7 (v5). shinyMobile 2.0.0 has been upgraded to run the newer Framework7 v8. With this comes a significant number of <a href="https://github.com/RinteRface/shinyMobile/blob/69da6ca46984bf6c73e2dc32ff8d9f415ec36a30/NEWS.md">changes</a>, but we believe these are all for the best!</p>
<section id="major-changes" class="level2"><h2 class="anchored" data-anchor-id="major-changes">Major changes</h2>
<section id="new-multi-pages-experimental-support" class="level3"><h3 class="anchored" data-anchor-id="new-multi-pages-experimental-support">New multi pages experimental support</h3>
<p>We are very excited to bring this feature out for this new release. Under the hood, this is possible owing to the <code>{brochure}</code> <a href="https://github.com/ColinFay/brochure">package</a> from <a href="https://github.com/ColinFay">Colin Fay</a> as well as the internal Framework7 <a href="https://framework7.io/docs/view">router</a> component.</p>
<section id="what-does-this-mean" class="level4"><h4 class="anchored" data-anchor-id="what-does-this-mean">What does this mean?</h4>
<p>You can now develop <strong>real multi pages</strong> Shiny applications and have different url endpoints and redirections. For instance, <code>https://my-app/home</code> can be the home page while <code>https://my-app/settings</code> brings to the settings page.</p>
</section><section id="how-does-this-work" class="level4"><h4 class="anchored" data-anchor-id="how-does-this-work">How does this work?</h4>
<p>At the time of writting of this blog post, you must install a patched <code>{brochure}</code> version with <code>devtools::install_github("DivadNojnarg/brochure")</code>.</p>
<p>In the below code, we basically have 3 pages having their own content and a common layout for consistency. The router ensure beautiful transitions from one page to another. We invite you to look at the getting started <a href="https://shinymobile.rinterface.com/articles/multipages">article</a> which provides more technical details.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Needs a specific version of brochure for now.</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># This allows to pass wrapper functions with options</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># as list. We need it because of the f7Page options parameter</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># and to pass the routes list object for JS.</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># devtools::install_github("DivadNojnarg/brochure")</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">brochure</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Allows to use the app on a server like </span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shinyapps.io where basepath is /app_name</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># instead of "/" or "".</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">make_link</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">path</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">basepath</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">path</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">basepath</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">basepath</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%s/%s"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">basepath</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">path</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">links</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">li</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Link.html">f7Link</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      routable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>      label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Link to page %s"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">page_1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/page.html">page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>,</span>
<span>    ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">request</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shiny</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page"</span>,</span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># top navbar goes here</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Home page"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># NOTE: when the main toolbar is enabled in</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># f7MultiLayout, we can't use individual page toolbars.</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># f7Toolbar(</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  position = "bottom",</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  tags$a(</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#    href = "/2",</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#    "Second page",</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#    class = "link"</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  )</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ),</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Page content</span></span>
<span>        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page-content"</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            mode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"links"</span>,</span>
<span>            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">links</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text input"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"default"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/select.html">f7Select</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"select"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Select"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mtcars</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"res"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"res2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">page_2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/page.html">page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/2"</span>,</span>
<span>    ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">request</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shiny</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page"</span>,</span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># top navbar goes here</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Second page"</span>,</span>
<span>          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Allows to go back to main</span></span>
<span>          leftPanel <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/tagList.html">tagList</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">a</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link back"</span>,</span>
<span>              <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icon icon-back"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">span</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>                class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"if-not-md"</span>,</span>
<span>                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Back"</span></span>
<span>              <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shiny</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page-content"</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/button.html">f7Button</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"update"</span>, label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Update stepper"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/stepper.html">f7Stepper</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stepper"</span>,</span>
<span>              label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"My stepper"</span>,</span>
<span>              min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>              max <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span>              size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"small"</span>,</span>
<span>              value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span>              wraps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              autorepeat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              rounded <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>              raised <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>              manual <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"test"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">page_3</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/page.html">page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/3"</span>,</span>
<span>    ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">request</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shiny</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page"</span>,</span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># top navbar goes here</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Third page"</span>,</span>
<span>          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Allows to go back to main</span></span>
<span>          leftPanel <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/tagList.html">tagList</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">a</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link back"</span>,</span>
<span>              <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icon icon-back"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">tags</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">span</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>                class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"if-not-md"</span>,</span>
<span>                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Back"</span></span>
<span>              <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shiny</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">::</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://rstudio.github.io/htmltools/reference/builder.html">tags</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          class <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"page-content"</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nothing to show yet ..."</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brochureApp</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  basepath <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pages</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">page_1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">page_2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">page_3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Important: in theory brochure makes</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># each page having its own shiny session/ server function.</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># That's not what we want here so we'll have</span></span>
<span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a global server function.</span></span>
<span>  server <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">session</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">text</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">select</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">test</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">stepper</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">update</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/stepper.html">updateF7Stepper</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stepper"</span>,</span>
<span>        value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,</span>
<span>        step <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>,</span>
<span>        size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"large"</span>,</span>
<span>        min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>        max <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span>        wraps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>        autorepeat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>        rounded <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        raised <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pink"</span>,</span>
<span>        manual <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        decimalPoint <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span>,</span>
<span>  wrapped <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">f7MultiLayout</span>,</span>
<span>  wrapped_options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    basepath <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Common toolbar</span></span>
<span>    toolbar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Toolbar.html">f7Toolbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Link.html">f7Link</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"house"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, href <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, routable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      dark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>      theme <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"md"</span>,</span>
<span>      routes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Important: don't remove keepAlive</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># for pages as this allows</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># to save the input state when switching</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># between pages. If FALSE, each time a page is</span></span>
<span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># changed, inputs are reset.</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home"</span>, keepAlive <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>, keepAlive <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_link</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span>, keepAlive <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section></section><section id="updated-material-design-style" class="level3"><h3 class="anchored" data-anchor-id="updated-material-design-style">Updated material design style</h3>
<p>By updating to the latest Framework7 version, we now benefit from a totally revamped Android (md) design, which looks more modern.</p>
<div class="columns">
<div class="column" style="width:20%;">

</div><div class="column" style="width:60%;">
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
library(shiny)
library(shinyMobile)

# source modules
e &lt;- environment()
path &lt;- system.file("examples/gallery/tabs/", package = "shinyMobile")
sapply(
  list.files(
    path,
    include.dirs = FALSE,
    pattern = ".R",
    ignore.case = TRUE
  ),
  function(f) {
    source(file.path(path, f), local = e)
  }
)

app_options &lt;- list(
  theme = "md",
  dark = TRUE,
  filled = FALSE,
  preloader = TRUE,
  color = "#007aff",
  navbar = list(
    hideOnPageScroll = TRUE,
    mdCenterTitle = TRUE
  )
)

# shiny app
shinyApp(
  ui = f7Page(
    allowPWA = TRUE,
    options = app_options,
    f7TabLayout(
      title = "shinyMobile Gallery",
      messagebar = f7MessageBar(inputId = "mymessagebar",
                                placeholder = "Message"),
      panels = tagList(
        f7Panel(
          id = "panelLeft",
          title = "Left Panel",
          side = "left",
          f7Block("A panel with push effect"),
          f7PanelMenu(
            inset = TRUE,
            outline = TRUE,
            # Use items as tab navigation only
            f7PanelItem(
              tabName = "tabset-Inputs",
              title = "Input tabs",
              icon = f7Icon("largecircle_fill_circle"),
              active = TRUE
            ),
            f7PanelItem(
              tabName = "tabset-FABs",
              title = "Buttons tabs",
              icon = f7Icon("largecircle_fill_circle")
            )
          ),
          effect = "push",
          options = list(swipe = TRUE)
        ),
        f7Panel(
          title = "Right Panel",
          side = "right",
          f7Radio(
            inputId = "theme",
            label = "Theme",
            choices = c("md", "ios"),
            selected = app_options$theme
          ),
          f7Radio(
            inputId = "dark",
            label = "Mode",
            choices = c("dark", "light"),
            selected = ifelse(app_options$dark, "dark", "light")
          ),
          f7Radio(
            inputId = "color",
            label = "Color",
            choices = getF7Colors(),
            selected = "primary"
          ),
          effect = "floating",
          options = list(swipe = TRUE)
        )
      ),
      navbar = f7Navbar(
        title = "shinyMobile Gallery",
        hairline = TRUE,
        leftPanel = TRUE,
        rightPanel = TRUE
      ),
      f7Login(
        id = "loginPage",
        title = "You really think you can go here?",
        footer = "This section simulates an authentication process. There
        is actually no user and password database. Put whatever you want but
        don't leave blank!",
        startOpen = FALSE
      ),
      # recover the color picker input and update the text background
      # color accordingly.
      tags$script(
        "$(function() {
          Shiny.addCustomMessageHandler('text-color', function(message) {
            $('#colorPickerVal').css('background-color', message);
          });

          // toggle message bar based on the currently selected tab
          Shiny.addCustomMessageHandler('toggleMessagebar', function(message) {
            if (message === 'chat') {
              $('#mymessagebar').show();
              $('.toolbar.tabLinks').hide();
            } else {
              $('#mymessagebar').hide();
              $('.toolbar.tabLinks').show();
            }
          });
        });
        "
      ),
      f7Tabs(
        id = "tabset",
        animated = FALSE,
        swipeable = TRUE,
        tabInputs,
        tabBtns,
        tabCards,
        tabLists,
        tabText,
        tabInfo,
        tabOthers
      )
    )
  ),
  server = function(input, output, session) {

    # update theme
    observeEvent(input$theme, ignoreInit = TRUE, {
      updateF7App(
        options = list(
          theme = input$theme
        )
      )
    })

    # update mode
    observeEvent(input$dark, ignoreInit = TRUE, {
      updateF7App(
        options = list(
          dark = ifelse(input$dark == "dark", TRUE, FALSE)
        )
      )
    })

    # update color
    observeEvent(input$color, ignoreInit = TRUE, {
      updateF7App(
        options = list(
          color = input$color
        )
      )
    })

    # input validation
    observe({
      validateF7Input(inputId = "text", info = "Whatever")
      validateF7Input(
        inputId = "password",
        pattern = "[0-9]*",
        error = "Only numbers please!"
      )
    })

    # toggle message bar: should only be dislayed when on the messages tab
    observeEvent(input$tabset, {
      session$sendCustomMessage(type = "toggleMessagebar", input$tabset)
      session$sendCustomMessage(type = "toggleSearchbar", input$tabset)
    })

    # user send new message
    observeEvent(input[["mymessagebar-send"]], {
      updateF7Messages(
        id = "mymessages",
        list(
          f7Message(
            text = input$mymessagebar,
            name = "David",
            type = "sent",
            header = "Message Header",
            footer = "Message Footer",
            textHeader = "Text Header",
            textFooter = "text Footer",
            avatar = "https://cdn.framework7.io/placeholder/people-100x100-7.jpg"
          )
        )
      )
    })

    # fake to receive random messages
    observe({
      invalidateLater(5000)
      names &lt;- c("Victor", "John")
      name &lt;- sample(names, 1)

      updateF7Messages(
        id = "mymessages",
        list(
          f7Message(
            text = "Message",
            name = name,
            type = "received",
            avatar = "https://cdn.framework7.io/placeholder/people-100x100-9.jpg"
          )
        )
      )
    })

    # trigger for login
    trigger &lt;- reactive({
      req(input$tabset == "chat")
    })
    # login server module
    f7LoginServer(
      id = "loginPage",
      ignoreInit = TRUE,
      trigger = trigger
    )

    output$sin &lt;- renderPlot(plot(sin, -pi, 2 * pi))
    output$cos &lt;- renderPlot(plot(cos, -pi, 2 * pi))

    output$text &lt;- renderPrint(input$text)
    output$password &lt;- renderPrint(input$password)
    output$textarea &lt;- renderPrint(input$textarea)
    output$slider &lt;- renderPrint(input$sliderInput)
    output$sliderRange &lt;- renderPrint(input$sliderRangeInput)
    output$stepper &lt;- renderPrint(input$stepper)
    output$check &lt;- renderPrint(input$check)
    output$checkgroup &lt;- renderPrint(input$checkgroup)
    output$checkgroup2 &lt;- renderPrint(input$checkgroup2)
    output$radio &lt;- renderPrint(input$radio)
    output$radio2 &lt;- renderPrint(input$radio2)
    output$toggle &lt;- renderPrint(input$toggle)
    output$select &lt;- renderPrint(input$select)
    output$smartdata &lt;- renderTable(
      {
        head(mtcars[, c("mpg", input$smartsel), drop = FALSE])
      },
      rownames = TRUE
    )
    output$dateval &lt;- renderPrint(input$mydatepicker)
    output$autocompleteval &lt;- renderPrint(input$myautocomplete)

    lapply(1:12, function(i) {
      output[[paste0("res", i)]] &lt;- renderText(paste0("Button", i, " is ", input[[paste0("btn", i)]]))
    })
    output$pickerval &lt;- renderText(input$mypicker)
    output$colorPickerVal &lt;- renderPrint(input$mycolorpicker$hex)

    # send the color picker input to JS
    observeEvent(input$mycolorpicker, {
      session$sendCustomMessage(type = "text-color", message = input$mycolorpicker$hex)
    })


    # popup
    output$popupContent &lt;- renderPrint(input$popupText)

    observeEvent(input$togglePopup, {
      f7Popup(
        id = "popup1",
        title = "My first popup",
        f7Block(
          p("Popup can push the view behind. By default it has effect only when
            'safe-area-inset-top' is more than zero (iOS fullscreen webapp or iOS cordova app)"),
          f7Text(inputId = "popupText",
                 label = "Popup content",
                 value = "This is my first popup, I swear!"),
          verbatimTextOutput("popupContent")
        )
      )
    })

    observeEvent(input$popup1, {
      if (input$tabset == "Popups") {
        popupStatus &lt;- if (input$popup1) "opened" else "closed"
        f7Toast(
          position = "top",
          text = paste("Popup is", popupStatus)
        )
      }
    })

    # sheet plot
    output$sheetPlot &lt;- renderPlot({
      hist(rnorm(input$sheetObs))
    })

    observeEvent(input$toggleSheet, {
      updateF7Sheet(id = "sheet1")
    })

    # notifications
    lapply(1:3, function(i) {
      observeEvent(input[[paste0("goNotif", i)]], {
        icon &lt;- if (i %% 2 == 0) f7Icon("bolt_fill") else NULL

        f7Notif(
          text = "test",
          icon = icon,
          title = paste("Notification", i),
          subtitle = "A subtitle",
          titleRightText = i
        )
      })
    })

    # Dialogs
    # notifications
    lapply(1:3, function(i) {
      observeEvent(input[[paste0("goDialog", i)]], {
        if (i == 1) {
          f7Dialog(
            title = "Dialog title",
            text = "This is an alert dialog"
          )
        } else if (i == 2) {
          f7Dialog(
            id = "confirmDialog",
            title = "Dialog title",
            type = "confirm",
            text = "This is an confirm dialog"
          )
        } else if (i == 3) {
          f7Dialog(
            id = "promptDialog",
            title = "Dialog title",
            type = "prompt",
            text = "This is a prompt dialog"
          )
        }
      })
    })

    observeEvent(input$confirmDialog, {
      f7Toast(text = paste("Alert input is:", input$confirmDialog))
    })

    output$promptres &lt;- renderUI({
      if (is.null(input$promptDialog)) {
        f7BlockTitle(title = "Click on dialog button 3")
      }
      f7BlockTitle(title = input$promptDialog)
    })

    # popovers
    observeEvent(input$popoverButton, {
      addF7Popover(
        id = "popoverButton",
        options = list(content = "This is a f7Button")
      )
    })

    # toasts
    observeEvent(input$toast, {
      f7Toast(
        position = "bottom",
        text = "I am a toast. Eat me!"
      )
    })

    # action sheet
    observeEvent(input$goActionSheet, {
      f7ActionSheet(
        grid = TRUE,
        id = "action1",
        buttons = list(
          list(
            text = "Notification",
            icon = f7Icon("info"),
            color = NULL
          ),
          list(
            text = "Dialog",
            icon = f7Icon("lightbulb_fill"),
            color = NULL
          )
        )
      )
    })

    observeEvent(input$action1_button, {
      if (input$action1_button == 1) {
        f7Notif(
          text = "You clicked on the first button",
          icon = f7Icon("bolt_fill"),
          title = "Notification",
          titleRightText = "now"
        )
      } else if (input$action1_button == 2) {
        f7Dialog(
          id = "actionSheetDialog",
          title = "Click me to launch a Toast!",
          type = "confirm",
          text = "You clicked on the second button"
        )
      }
    })

    observeEvent(input$swipeAction_button, {
      if (input$swipeAction_button == 1) {
        f7Notif(
          text = "You clicked on the first button",
          icon = f7Icon("bolt_fill"),
          title = "Notification",
          titleRightText = "now"
        )
      } else if (input$swipeAction_button == 2) {
        f7Dialog(
          id = "actionSheetDialog",
          title = "Click me to launch a Toast!",
          type = "confirm",
          text = "You clicked on the second button"
        )
      }
    })

    observeEvent(input$actionSheetDialog, {
      f7Toast(text = paste("Alert input is:", input$actionSheetDialog))
    })

    # update progress bar
    observeEvent(input$updatepg1, {
      updateF7Progress(id = "pg1", value = input$updatepg1)
    })

    # update gauge
    observeEvent(input$updategauge1, {
      updateF7Gauge(id = "mygauge1", value = input$updategauge1)
    })

    # expand card 3
    observeEvent(input$goCard, {
      updateF7Card(id = "card3")
    })

    # toggle accordion
    observeEvent(input$goAccordion, {
      updateF7Accordion(
        id = "accordion1",
        selected = 1
      )
    })

    # update panel
    observeEvent(input$goPanel, {
      updateF7Panel(id = "panelLeft")
    })

    # swipeout
    observeEvent(input$swipeNotif, {
      f7Notif(
        text = "test",
        icon = f7Icon("bolt_fill"),
        title = "Notification",
        subtitle = "A subtitle",
        titleRightText = "now"
      )
    })

    observeEvent(input$swipeAlert, {
      f7Dialog(
        title = "Dialog title",
        text = "This is an alert dialog"
      )
    })

    observeEvent(input$swipeActionSheet, {
      f7ActionSheet(
        grid = TRUE,
        id = "swipeAction",
        buttons = list(
          list(
            text = "Notification",
            icon = f7Icon("info"),
            color = NULL
          ),
          list(
            text = "Dialog",
            icon = f7Icon("lightbulb_fill"),
            color = NULL
          )
        )
      )
    })

    # preloaders
    observeEvent(input$showLoader, {
      showF7Preloader(target = "#preloaderPlot", color = "blue")
      Sys.sleep(2)
      hideF7Preloader(target = "#preloaderPlot")
    })
    output$preloaderPlot &lt;- renderPlot({
      hist(rnorm(100))
    })

    # photo browser
    observeEvent(input$togglePhoto, {
      f7PhotoBrowser(
        theme = "dark",
        type = "standalone",
        photos = c(
          "https://cdn.framework7.io/placeholder/sports-1024x1024-1.jpg",
          "https://cdn.framework7.io/placeholder/sports-1024x1024-2.jpg",
          "https://cdn.framework7.io/placeholder/sports-1024x1024-3.jpg"
        )
      )
    })

    # Menus
    observeEvent(input$toggleMenu, {
      updateF7MenuDropdown("menu1")
    })

    observeEvent(input$menuItem1, {
      f7Notif(text = "Well done!")
    })

    # skeleton
    observe({
      invalidateLater(4000)
      f7Skeleton(".skeleton-list", "fade", 2)
    })

    # Treeview
    output$treeview &lt;- renderText({
      input$treeview
    })

    # Table
    output$table &lt;- renderUI({
      f7Table(mtcars[1:15,])
    })

    # pull to refresh
    # observeEvent(input$ptr, {
    #
    #   ptrStatus &lt;- if (input$ptr) "on"
    #
    #   f7Dialog(
    #     text = paste('ptr is', ptrStatus),
    #     type = "alert"
    #   )
    # })
  }
)</a></code></pre>
</div><div class="column" style="width:20%;">

</div>
</div>
</section><section id="refined-inputs-layout-and-style" class="level3"><h3 class="anchored" data-anchor-id="refined-inputs-layout-and-style">Refined inputs layout and style</h3>
<p>Whenever you have multiple inputs, we now recommend to wrap all of them within <code><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List()</a></code> so as to benefit from new styling options such as outline, inset, strong. Internally, we use a function able to detect whether the input is inside a <code><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List()</a></code>. If this is the case, you can style this list by passing parameters like <code>f7List(outline = TRUE, inset = TRUE, ...)</code>. If not, the input is internally wrapped in a list to have correct rendering, but no styling is possible. Besides, some inputs like <code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text()</a></code> can have custom styling (add an icon, clear button, outline style), which is independent from the external list wrapper style. Hence, we don’t recommend doing <code>f7List(outline = TRUE, f7Text(outline = TRUE))</code> since it won’t render well and instead use <code>f7List(outline = TRUE, f7Text())</code>.</p>
<p>Besides, independently from <code><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List()</a></code>, some inputs having more specific styling options:</p>
<ul>
<li>
<code><a href="https://rinterface.github.io/shinyMobile/reference/autocomplete.html">f7AutoComplete()</a></code>.</li>
<li>
<code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text()</a></code>, <code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Password()</a></code>, <code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7TextArea()</a></code>.</li>
<li>
<code><a href="https://rinterface.github.io/shinyMobile/reference/select.html">f7Select()</a></code>.</li>
<li>
<code><a href="https://rinterface.github.io/shinyMobile/reference/picker.html">f7Picker()</a></code>, <code><a href="https://rinterface.github.io/shinyMobile/reference/f7ColorPicker.html">f7ColorPicker()</a></code> and <code><a href="https://rinterface.github.io/shinyMobile/reference/datepicker.html">f7DatePicker()</a></code>.</li>
<li>
<code><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7Radio()</a></code> and <code><a href="https://rinterface.github.io/shinyMobile/reference/checkboxgroup.html">f7CheckboxGroup()</a></code>.</li>
</ul>
<p>In practices, you can design a supercharged <code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text()</a></code> like so:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text input"</span>,</span>
<span>    value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text"</span>,</span>
<span>    placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your text here"</span>,</span>
<span>    style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A cool text input"</span>,</span>
<span>      outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>      media <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"house"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      clearable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>      floating <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
<p>This adds a description to the input (below its main content), as well as the outline style option and an icon on the left side. <code>clearable</code> is TRUE by default meaning that all text-based inputs can be cleared. <code>floating</code> is an effect that makes the label move in and out the input area depending on the content state. When empty, the label is inside and when there is text, the label is pushed outside into its usual location.</p>
<p><code><a href="https://rinterface.github.io/shinyMobile/reference/stepper.html">f7Stepper()</a></code> and <code><a href="https://rinterface.github.io/shinyMobile/reference/toggle.html">f7Toggle()</a></code> label is now displayed on the left.</p>
<div class="columns">
<div class="column" style="width:25%;">

</div><div class="column" style="width:50%;">
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
library(shiny)
library(shinyMobile)

shinyApp(
  ui = f7Page(
    options = list(dark = FALSE, theme = "ios"),
    title = "Inputs Layout",
    f7SingleLayout(
      navbar = f7Navbar(
        title = "Inputs Layout",
        hairline = FALSE
      ),
      f7List(
        inset = TRUE,
        dividers = TRUE,
        strong = TRUE,
        outline = FALSE,
        f7Text(
          inputId = "text",
          label = "Text input",
          value = "Some text",
          placeholder = "Your text here"
        ),
        f7TextArea(
          inputId = "textarea",
          label = "Text area input",
          value = "Some text",
          placeholder = "Your text here"
        ),
        f7Select(
          inputId = "select",
          label = "Make a choice",
          choices = 1:3,
          selected = 1
        ),
        f7AutoComplete(
          inputId = "myautocomplete",
          placeholder = "Some text here!",
          openIn = "dropdown",
          label = "Type a fruit name",
          choices = c(
            "Apple", "Apricot", "Avocado", "Banana", "Melon",
            "Orange", "Peach", "Pear", "Pineapple"
          )
        ),
        f7Stepper(
          inputId = "stepper",
          label = "My stepper",
          min = 0,
          color = "default",
          max = 10,
          value = 4
        ),
        f7Toggle(
          inputId = "toggle",
          label = "Toggle me"
        ),
        f7Picker(
          inputId = "picker",
          placeholder = "Some text here!",
          label = "Picker Input",
          choices = c("a", "b", "c"),
          options = list(sheetPush = TRUE)
        ),
        f7DatePicker(
          inputId = "date",
          label = "Pick a date",
          value = Sys.Date()
        ),
        f7ColorPicker(
          inputId = "mycolorpicker",
          placeholder = "Some text here!",
          label = "Select a color"
        )
      ),
      f7CheckboxGroup(
        inputId = "checkbox",
        label = "Checkbox group",
        choices = c("a", "b", "c"),
        selected = "a",
        style = list(
          inset = TRUE,
          dividers = TRUE,
          strong = TRUE,
          outline = FALSE
        )
      ),
      f7Radio(
        inputId = "radio",
        label = "Radio group",
        choices = c("a", "b", "c"),
        selected = "a",
        style = list(
          inset = TRUE,
          dividers = TRUE,
          strong = TRUE,
          outline = FALSE
        )
      )
    )
  ),
  server = function(input, output) {
  }
) </a></code></pre>
</div><div class="column" style="width:25%;">

</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Page.html">f7Page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>dark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, theme <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ios"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inputs Layout"</span>,</span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7SingleLayout.html">f7SingleLayout</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      navbar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inputs Layout"</span>,</span>
<span>        hairline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text input"</span>,</span>
<span>          value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text"</span>,</span>
<span>          placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your text here"</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7TextArea</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"textarea"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text area input"</span>,</span>
<span>          value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text"</span>,</span>
<span>          placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your text here"</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/select.html">f7Select</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"select"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Make a choice"</span>,</span>
<span>          choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span>          selected <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/autocomplete.html">f7AutoComplete</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"myautocomplete"</span>,</span>
<span>          placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text here!"</span>,</span>
<span>          openIn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dropdown"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type a fruit name"</span>,</span>
<span>          choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Apple"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Apricot"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avocado"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banana"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Melon"</span>,</span>
<span>            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Orange"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peach"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pear"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pineapple"</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/stepper.html">f7Stepper</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stepper"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"My stepper"</span>,</span>
<span>          min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span>          color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"default"</span>,</span>
<span>          max <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span>          value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/toggle.html">f7Toggle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"toggle"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Toggle me"</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/picker.html">f7Picker</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"picker"</span>,</span>
<span>          placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text here!"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Picker Input"</span>,</span>
<span>          choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>sheetPush <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/datepicker.html">f7DatePicker</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pick a date"</span>,</span>
<span>          value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7ColorPicker.html">f7ColorPicker</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mycolorpicker"</span>,</span>
<span>          placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text here!"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Select a color"</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/checkboxgroup.html">f7CheckboxGroup</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"checkbox"</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checkbox group"</span>,</span>
<span>        choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        selected <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>,</span>
<span>        style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7Radio</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radio"</span>,</span>
<span>        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Radio group"</span>,</span>
<span>        choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        selected <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>,</span>
<span>        style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  server <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
<p>Moreover, we added a new way to pass options to <code><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7Radio()</a></code> and <code><a href="https://rinterface.github.io/shinyMobile/reference/checkboxgroup.html">f7CheckboxGroup()</a></code>, namely <code><a href="https://rinterface.github.io/shinyMobile/reference/checkboxgroup.html">f7CheckboxChoice()</a></code> and <code><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7RadioChoice()</a></code> (note: you can’t use <code>update_*</code> functions on them yet), so that you can pass more metadata and a description to each option (instead of just the choice name in basic shiny inputs):</p>
<div class="columns">
<div class="column" style="width:25%;">

</div><div class="column" style="width:50%;">
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
library(shiny)
library(shinyMobile)

shinyApp(
  ui = f7Page(
    title = "Update radio",
    f7SingleLayout(
      navbar = f7Navbar(title = "Update f7Radio"),
      f7Block(
        f7Radio(
          inputId = "radio",
          label = "Custom choices",
          choices = list(
            f7RadioChoice(
              "Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Nulla sagittis tellus ut turpis condimentum,
            ut dignissim lacus tincidunt",
              title = "Choice 1",
              subtitle = "David",
              after = "March 16, 2024"
            ),
            f7RadioChoice(
              "Cras dolor metus, ultrices condimentum sodales sit
            amet, pharetra sodales eros. Phasellus vel felis tellus.
            Mauris rutrum ligula nec dapibus feugiat",
              title = "Choice 2",
              subtitle = "Veerle",
              after = "March 17, 2024"
            )
          ),
          selected = 2,
          style = list(
            outline = TRUE,
            strong = TRUE,
            inset = TRUE,
            dividers = TRUE
          )
        ),
        textOutput("res")
      )
    )
  ),
  server = function(input, output, session) {
    output$res &lt;- renderText(input$radio)
  }
)</a></code></pre>
</div><div class="column" style="width:25%;">

</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Page.html">f7Page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Update radio"</span>,</span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7SingleLayout.html">f7SingleLayout</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      navbar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Update f7Radio"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7Radio</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"radio"</span>,</span>
<span>          label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Custom choices"</span>,</span>
<span>          choices <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7RadioChoice</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            Nulla sagittis tellus ut turpis condimentum,</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            ut dignissim lacus tincidunt"</span>,</span>
<span>              title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Choice 1"</span>,</span>
<span>              subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"David"</span>,</span>
<span>              after <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"March 16, 2024"</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/radio.html">f7RadioChoice</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cras dolor metus, ultrices condimentum sodales sit</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            amet, pharetra sodales eros. Phasellus vel felis tellus.</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            Mauris rutrum ligula nec dapibus feugiat"</span>,</span>
<span>              title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Choice 2"</span>,</span>
<span>              subtitle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Veerle"</span>,</span>
<span>              after <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"March 17, 2024"</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          selected <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span>          style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"res"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  server <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">session</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">res</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">radio</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section><section id="new-f7treeview-component" class="level3"><h3 class="anchored" data-anchor-id="new-f7treeview-component">New <code>f7Treeview()</code> component</h3>
<p>The new release welcomes a brand new input widget. As its name suggests, <code>f7Treewiew()</code> enables sorting items hierarchically within a collapsible nested list of items. This is ideal, for instance, to select files within multiple folders, as an alternative to the classic <code><a href="https://rdrr.io/pkg/shiny/man/fileInput.html">fileInput()</a></code>.</p>
<div class="columns">
<div class="column" style="width:25%;">

</div><div class="column" style="width:50%;">
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
library(shiny)
library(shinyMobile)

shinyApp(
  ui = f7Page(
    title = "My app",
    f7SingleLayout(
      navbar = f7Navbar(title = "f7Treeview"),
      # group treeview with selectable items
      f7BlockTitle("Selectable items"),
      f7Block(
        f7Treeview(
          id = "treeview1",
          selectable = TRUE,
          f7TreeviewGroup(
            title = "Selected images",
            icon = f7Icon("folder_fill"),
            itemToggle = TRUE,
            lapply(1:3, function(i) f7TreeviewItem(label = paste0("image", i, ".png"),
                                                   icon = f7Icon("photo_fill")))
          )
        ),
        textOutput("selected")
      ),

      # group treeview with checkbox items
      f7BlockTitle("Checkbox"),
      f7Block(
        f7Treeview(
          id = "treeview2",
          withCheckbox = TRUE,
          f7TreeviewGroup(
            title = "Selected images",
            icon = f7Icon("folder_fill"),
            itemToggle = TRUE,
            lapply(1:3, function(i) f7TreeviewItem(label = paste0("image", i, ".png"),
                                                   icon = f7Icon("photo_fill")))
          )
        ),
        textOutput("selected2")
      )
    )
  ),
  server = function(input, output) {
    output$selected &lt;- renderText(input$treeview1)
    output$selected2 &lt;- renderText(input$treeview2)
  }
)</a></code></pre>
</div><div class="column" style="width:25%;">

</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Page.html">f7Page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"My app"</span>,</span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7SingleLayout.html">f7SingleLayout</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      navbar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"f7Treeview"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># group treeview with selectable items</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7BlockTitle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Selectable items"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Treeview.html">f7Treeview</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"treeview1"</span>,</span>
<span>          selectable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7TreeviewGroup.html">f7TreeviewGroup</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Selected images"</span>,</span>
<span>            icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"folder_fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            itemToggle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7TreeviewItem.html">f7TreeviewItem</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".png"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>                                                   icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"photo_fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"selected"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span></span>
<span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># group treeview with checkbox items</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7BlockTitle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Checkbox"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Treeview.html">f7Treeview</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"treeview2"</span>,</span>
<span>          withCheckbox <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7TreeviewGroup.html">f7TreeviewGroup</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Selected images"</span>,</span>
<span>            icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"folder_fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>            itemToggle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7TreeviewItem.html">f7TreeviewItem</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">i</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".png"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>                                                   icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"photo_fill"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">textOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"selected2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  server <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">selected</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">treeview1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">selected2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderText</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">treeview2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section><section id="new-f7form" class="level3"><h3 class="anchored" data-anchor-id="new-f7form">New <code>f7Form()</code>
</h3>
<p>Shiny does not provide HTML forms handling out of the box (a <a href="https://www.w3schools.com/html/html_forms.asp">form</a> being composed of multiple input elements). That’s why we introduce <code><a href="https://rinterface.github.io/shinyMobile/reference/form-inputs.html">f7Form()</a></code>. Contrary to basic shiny inputs, we don’t get one input value per element but a single input value with a nested list for all inputs within the form, thereby allowing a reduction in the number of inputs on the server side. <code><a href="https://rinterface.github.io/shinyMobile/reference/form-inputs.html">updateF7Form()</a></code> can quickly update any input from the form. As a side note, the current list of supported inputs is:</p>
<ul>
<li><code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text()</a></code></li>
<li><code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7TextArea()</a></code></li>
<li><code><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Password()</a></code></li>
<li><code><a href="https://rinterface.github.io/shinyMobile/reference/select.html">f7Select()</a></code></li>
</ul>
<div class="columns">
<div class="column" style="width:25%;">

</div><div class="column" style="width:50%;">
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| components: [viewer]
#| column: screen-inset-shaded
#| viewerHeight: 800
#| viewerWidth: 390
library(shiny)
library(shinyMobile)

shinyApp(
  ui = f7Page(
    f7SingleLayout(
      navbar = f7Navbar(title = "Inputs form"),
      f7Block(f7Button("update", "Click me")),
      f7BlockTitle("A list of inputs in a form"),
      f7List(
        inset = TRUE,
        dividers = FALSE,
        strong = TRUE,
        f7Form(
          id = "myform",
          f7Text(
            inputId = "text",
            label = "Text input",
            value = "Some text",
            placeholder = "Your text here",
            style = list(
              description = "A cool text input",
              outline = TRUE,
              media = f7Icon("house"),
              clearable = TRUE,
              floating = TRUE
            )
          ),
          f7TextArea(
            inputId = "textarea",
            label = "Text Area",
            value = "Lorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed do eiusmod tempor incididunt ut
              labore et dolore magna aliqua",
            placeholder = "Your text here",
            resize = TRUE,
            style = list(
              description = "A cool text input",
              outline = TRUE,
              media = f7Icon("house"),
              clearable = TRUE,
              floating = TRUE
            )
          ),
          f7Password(
            inputId = "password",
            label = "Password:",
            placeholder = "Your password here",
            style = list(
              description = "A cool text input",
              outline = TRUE,
              media = f7Icon("house"),
              clearable = TRUE,
              floating = TRUE
            )
          )
        )
      ),
      verbatimTextOutput("form")
    )
  ),
  server = function(input, output, session) {
    output$form &lt;- renderPrint(input$myform)

    observeEvent(input$update, {
      updateF7Form(
        "myform",
        data = list(
          "text" = "New text",
          "textarea" = "New text area",
          "password" = "New password"
        )
      )
    })
  }
)</a></code></pre>
</div><div class="column" style="width:25%;">

</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://shiny.posit.co/">shiny</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Page.html">f7Page</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7SingleLayout.html">f7SingleLayout</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>      navbar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/navbar.html">f7Navbar</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span>title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inputs form"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7Block</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/button.html">f7Button</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"update"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Click me"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/block.html">f7BlockTitle</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A list of inputs in a form"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7List.html">f7List</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        inset <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        dividers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span>        strong <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/form-inputs.html">f7Form</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"myform"</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Text</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span>            label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text input"</span>,</span>
<span>            value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Some text"</span>,</span>
<span>            placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your text here"</span>,</span>
<span>            style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A cool text input"</span>,</span>
<span>              outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              media <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"house"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              clearable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              floating <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7TextArea</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"textarea"</span>,</span>
<span>            label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Text Area"</span>,</span>
<span>            value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lorem ipsum dolor sit amet, consectetur</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">              adipiscing elit, sed do eiusmod tempor incididunt ut</span></span>
<span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">              labore et dolore magna aliqua"</span>,</span>
<span>            placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your text here"</span>,</span>
<span>            resize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>            style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A cool text input"</span>,</span>
<span>              outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              media <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"house"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              clearable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              floating <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/text.html">f7Password</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>            inputId <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"password"</span>,</span>
<span>            label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Password:"</span>,</span>
<span>            placeholder <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your password here"</span>,</span>
<span>            style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>              description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A cool text input"</span>,</span>
<span>              outline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              media <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/f7Icon.html">f7Icon</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"house"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>              clearable <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span>              floating <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span>            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html">verbatimTextOutput</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"form"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  server <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">session</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">output</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">form</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html">renderPrint</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">myform</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span></span>
<span>    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">update</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span></span>
<span>      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rinterface.github.io/shinyMobile/reference/form-inputs.html">updateF7Form</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"myform"</span>,</span>
<span>        data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New text"</span>,</span>
<span>          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"textarea"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New text area"</span>,</span>
<span>          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"password"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New password"</span></span>
<span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</details>
</div>
</section></section><section id="breaking-changes" class="level2"><h2 class="anchored" data-anchor-id="breaking-changes">Breaking changes</h2>
<p>Some components have disappeared from Framework7 and we had to deprecate them as they no longer work. Other long time deprecated <a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a> elements are also removed to cleanup the codebase. We invite you to review the <a href="https://github.com/RinteRface/shinyMobile/blob/69da6ca46984bf6c73e2dc32ff8d9f415ec36a30/NEWS.md#breaking-changes">changelog</a> to see a list of all changes in this release.</p>
</section><section id="soft-deprecation" class="level2"><h2 class="anchored" data-anchor-id="soft-deprecation">Soft deprecation</h2>
<p>Some function parameters have changed and are now deprecated with <a href="https://lifecycle.r-lib.org/">lifecycle</a>. You’ll see a warning message if you use them and we invite you to accordingly update your code.</p>
</section></section><section id="conclusion" class="level1"><h1>Conclusion</h1>
<p>Since the release of <a href="https://shiny.posit.co/">shiny</a> in 2012, many packages have been released that substantially improve its layout and design such as <a href="https://rstudio.github.io/bslib/">bslib</a>, <a href="https://github.com/RinteRface/bs4Dash">bs4Dash</a> or <a href="https://appsilon.github.io/shiny.fluent/">shiny.fluent</a>. Yet not much was done for mobile development. <a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a> tries to fill this gap by exposing people to the rich Framework7 mobile-first template. Coupled with progressive web app support (PWA), you can run Shiny apps on a mobile that look very close to native apps with a desktop icon, a launch screen and running fullscreen, that is without the web browser navigation bar. By including an experimental implementation of the multipage navigation as described earlier, we move one step closer to the native apps. Finally, owing to the progress on the <a href="https://docs.r-wasm.org/webr/latest/">webR</a> side, it isn’t impossible that one day, we might run a totally offline Shiny app on mobile.</p>


</section> ]]></description>
  <category>shiny</category>
  <guid>https://blog.cynkra.com/posts/2024-05-13-shinyMobile-2.0.0/</guid>
  <pubDate>Mon, 13 May 2024 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2024-05-13-shinyMobile-2.0.0/logo.png" medium="image" type="image/png" height="166" width="144"/>
</item>
<item>
  <title>EFS vs. NFS for RStudio on Kubernetes (AWS): Configuration and considerations</title>
  <dc:creator>Patrick Schratz</dc:creator>
  <link>https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/</link>
  <description><![CDATA[ 




<p><img src="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/intro.png" class="img-fluid"></p>
<p>As a consulting company with a strong focus on R and Posit (formerly RStudio) products, we have gathered quite a bit of experience in configuration and deployment of Workbench and Connect products in the cloud. We would like to share some of these insights in the following blog post and shine some light on the file system debate around these applications. While the “how to” is very well outlined by various RStudio/Posit resources (<a href="https://github.com/rstudio/helm/tree/main/charts/rstudio-workbench">1</a>, <a href="https://github.com/rstudio/helm/tree/main/charts/rstudio-connect">2</a>, <a href="https://docs.rstudio.com/helm/rstudio-connect/kubernetes-howto/">3</a>, <a href="https://support.rstudio.com/hc/en-us/articles/4414817033623-Mounting-your-RStudio-Workbench-Connect-Server-to-an-EFS-share">4</a>), there’s one important part of the setup which is actively debated among system engineers: the choice and handling of the file system.</p>
<p>But let’s start at the beginning: in the cloud, one has essentially two choices for self-hosting RStudio applications: a single-instance installation on a virtual machine or going with Kubernetes (k8s) for a container-based, high-availability (HA) setup. The latter comes with many benefits, both for users and administrators: HA ensures stability of the service and allows for controlled upgrades, in the best case without any interruption or downtime for users. Users profit from the possible option of requesting CPU and memory resources as needed for their analysis - assuming the k8s cluster runs with an autoscaler which allows provisioning new worker nodes as needed. Potential downsides could be an increased administration complexity, decreased file system performance and eventually higher costs. Though these points cannot be generalized and always depend on the cluster at hand, its purpose and the team managing it.</p>
<section id="file-systems---general" class="level2">
<h2 class="anchored" data-anchor-id="file-systems---general">File systems - general</h2>
<p>Users are in continuous contact with the file system even though most are not actively thinking about it. Each time a file is read or written, e.g., during the installation of an R package, the choice of the file system matters. It determines</p>
<ul>
<li>How fast the request is processed (latency)</li>
<li>How many bytes are transferred per seconds (throughput; might differ between read and write operations)</li>
<li>How many files can be processed at the same time (concurrency)</li>
</ul>
<p>To understand the following discussion about <a href="https://aws.amazon.com/efs/">Elastic File System (EFS)</a> and <a href="https://en.wikipedia.org/wiki/Network_File_System">Network File System (NFS)</a> (including explanations about both), a bit of background is needed how read/write operations can generally be categorized.</p>
<section id="read-write-once-rwo-read-only-many-rox-and-read-write-many-rwx-file-systems" class="level3">
<h3 class="anchored" data-anchor-id="read-write-once-rwo-read-only-many-rox-and-read-write-many-rwx-file-systems">Read-write-once (RWO), read-only-many (ROX) and read-write-many (RWX) file systems</h3>
<p>Applications running on on-premise machines or single cloud instances usually read and write to a read-write-once (RWO) file system. The “once” here means that this specific file system can only be attached to one instance. Read-only-many (ROX) allows multiple instances to attach a volume but only for reading - only one instance is allowed to mount it in read-write mode. Given their restriction on a single mount point, RWO file systems are usually faster than ROX or RWX. However, RWO comes with the following limitations for HA usage:</p>
<ul>
<li>they can only operate in a single AZ (i.e., an RWO volume can only be mounted by a node in the same zone) and this one must match the instance’s AZ</li>
<li>they cannot be used in (real) high-availability setups as this usually requires pods to run on different nodes - and RWO file systems can only be mounted by a single node</li>
</ul>
<p>File systems which support read-write-many (RWX) operations allow the attachment by multiple instances, usually across availability zones. They usually have a central (remote) address which can be used to mount them into an instance. This allows for a central deployment of RWX providers on standalone machines.</p>
<p>NOTE1: Availability zones in the cloud are discrete data centers with redundant power, networking, and connectivity in a certain region. Issues appearing in one particular zone do not affect others. Their main purpose of different AZs is to increase reliability.</p>
<p>NOTE2: There’s also read-write-once-pod (RWOP) which means that only one pod on a certain node can read/write to a volume. This is only supported for CSI volumes and k8s &gt; 1.22 <a href="https://stackoverflow.com/a/71046870/4185785">[source]</a>.</p>
<p><img src="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/k8s-meme.jpeg" class="img-fluid"></p>
<p><em><a href="https://duckduckgo.com/?q=kubernetes+efs+memes&amp;iar=images&amp;iax=images&amp;ia=images&amp;iai=https%3A%2F%2Fwww.unlockyourbrain.bzh%2Fwp-content%2Fuploads%2F2020%2F09%2F1zm5Yf4QPuoV1KtnECUhsRQ.jpeg">Image source</a></em></p>
</section>
</section>
<section id="kubernetes-high-availability-and-nfs-server" class="level2">
<h2 class="anchored" data-anchor-id="kubernetes-high-availability-and-nfs-server">Kubernetes high-availability and NFS server</h2>
<p>To allow for high-availability (HA) in k8s installations, an individual HA-pod needs to communicate with the respective others and access the same files. As the load is usually balanced across replicas, this requires a file system which allows for multiple r/w mounts, i.e., a RWX one.</p>
<p>This is also the case for RStudio applications in HA configuration. There are multiple options for RWX file systems. The most common one, which is also used in many custom multi-server on-premise environments, is <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a>.</p>
<p>While NFS is great, well known and fast, it is not so easy to make use of it in the cloud, especially in isolated environments like k8s clusters. On AWS, there is no default k8s support for NFS and hence one needs to deploy their own NFS server which serves as the central access point for mount requests. (An NFS server could in theory live anywhere, as long as it’s reachable by the cluster nodes.)</p>
<p>There’s an official <a href="https://github.com/nfs-ganesha/nfs-ganesha">NFS Ganesha</a> provider within the <code>kubernetes-sigs</code> (SIG = special-interest-group) <a href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner">organization on GitHub</a>. However, it does not support HA and we are not aware of any other one which does. Hence, the NFS server within a k8s cluster is usually provided by a single pod. This comes with some severe implications: all pods which rely on some NFS mounts are dependent on this single NFS pod. If the NFS pod gets recreated for some reason (e.g., because its being moved to a different node or the deployment is updated), all pods which a NFS mount will be unable to read and write data until the new node has attached the NFS volume again (which is usually still bound to the old node for ~ 5 min).</p>
<p>This is a pivotal and tricky issue: the pod health of a pod making use of an NFS mount does not necessarily depend on the NFS mount <em>once its running</em>. This means if the NFS server pod is down (for whatever reason), dependent deployments appear as “healthy” to the cluster (admins) but the users will fail to read and write data.</p>
<p>The number of times a pod gets recreated/restarted/moved on a cluster depends on multiple factors:</p>
<ul>
<li>How often are the individual nodes recreated?</li>
<li>Who is responsible for scheduling pods to individual nodes?</li>
<li>Are nodes running on permanent/reserved instances or on SPOT instances (an AWS-only term for cheaper nodes which can be reclaimed any time) which are more often reclaimed/recreated by the cloud provider?</li>
</ul>
<section id="our-experiences-with-nfs-on-kubernetes" class="level3">
<h3 class="anchored" data-anchor-id="our-experiences-with-nfs-on-kubernetes">Our experiences with NFS on Kubernetes</h3>
<p>We at cynkra started out with an NFS server for hosting RStudio applications on a k8s cluster, mainly because existing guides suggested doing so and warn using EFS. Judging from our experiences on a 3-5 node cluster on AWS with a self-managed autoscaler and node refresh enabled (which means that nodes get replaced frequently, e.g., whenever a new machine image is available), we have seen the NFS pod getting relocated every few days/weeks. Often this caused the mentioned problems above, i.e., RSC and/or RSW not being able to use due to stale file handles or other r/w issues. If the NFS server ran in an HA setup, this task would be completely trouble-free as the other pods would take over the incoming requests. However, in a non-HA deployment, this causes potentially unwanted downtime for multiple dependent applications.</p>
<p>While there are ways in k8s to reduce/avoid the automatic recreation of non-HA pods, serving content on a k8s cluster usually comes with the philosophy of being able to move/recreate every pod in the cluster without immediate consequences. Yet the fact that this seems impossible (as of right now) for an NFS server deployment represents a constant stability risk. It makes the HA deployments of all RStudio services essentially meaningless as they would all fail once the NFS pod would be down.</p>
<p>One could also host the NFS server outside of the cluster on a normal VM which does not reboot that frequently and does not recreate the NFS server service. However, this would mean opening up the k8s network to include this machine and eventually hosting a dedicated machine only for the NFS server. This approach would also not solve the potential bottleneck issues - whenever this machine needs a reboot, all dependent services would face some downtime. In addition, this approach would not be multi-AZ capable because the private subnets, which are used for a fast and secure connection between the nodes, do not support this - private subnets can only operate within a single AZ. A k8s cluster is essentially about two things: high-availability and scalability. Adding a static, non-scalable component (= remote NFS server) which acts as a dependency for many services, into the cluster contradicts with this principle.</p>
<p>The main happenings which made us overthink our current setup was seeing spurious behavior after NFS pod recreations: with both the NFS pods and the RStudio pods in a healthy state, sometimes ‘stale file handle’ issues occurred for users when trying to write data. RSC was not able to serve content as it could not read data anymore. All of these were issues detected by users and reported to the responsible engineers (i.e., us) - which is exactly what engineers try to avoid at all cost. The issue could often be solved by simply recreating the RSC pod, which then triggered a fresh reconnection to the NFS server. We assume this behavior to most likely be a regression caused by a previous NFS pod relocation.</p>
<p>It was time to look into alternatives. Since some years, most cloud providers offer their own, cloud-based RWX file systems. These claim to be very flexible in the way that they are available for mounts in all AZs. Cluster admins only need to configure a driver (which allows to define certain mount options) but the file system itself is hosted by the cloud provider in an HA setting. AWS calls it EFS (elastic file system), on Azure it’s called “azure files.” Google does not provide a native RWX solution (only ROX) and one is <a href="https://medium.com/@Sushil_Kumar/readwritemany-persistent-volumes-in-google-kubernetes-engine-a0b93e203180">required to use a self-managed NFS server for RWX</a>.</p>
<p>Since we are on AWS, we thought about giving EFS, the native AWS multi-AZ RWX offering, a try. We were aware of the warnings given out by RStudio about <a href="https://docs.rstudio.com/rstudio-team/integration/efs/">possible performance issues</a>. Luckily, we were not the first ones to try EFS with RStudio products. The RStudio engineers already wrote an article about RStudio applications with EFS, especially targeting the performance topic (see linked article).</p>
<p>Besides the higher price (around 3x) of EFS compared to EBS (elastic block storage = default RWO file system), which is used behind the scenes by an NFS server deployment, EFS is somewhat lacking in performance compared to NFS. The following figures show some file system benchmark results which we have carried out on different instance types. Network-optimized instance types (<code>r5n</code> on AWS) <a href="https://docs.rstudio.com/rstudio-team/integration/efs/">were said to improve EFS performance</a> which is backed up by our results.</p>
<p><img src="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/efs-nfs-sequential.png" class="img-fluid"> <em>Fig. 1: Sequential benchmarking results of EFS (executed on <code>r5n.xlarge</code> and <code>t3.xlarge</code> instances) and NFS (executed on a <code>t3.xlarge</code> instance). Benchmark source: <a href="https://github.com/rstudio/fsbench">rstudio/fsbench</a>.</em></p>
<p>Apparently, one of the main reasons (according to discussions on the web) is that EFS is used by many people around the world and needs to split its available resources dynamically across all clients. There are ways to increase performance (e.g., by selecting a different mode, increasing the size of the file system or tweaking certain mount options). However, in the end EFS will always stay slower than NFS.</p>
<p><img src="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/efs-nfs-parallel.png" class="img-fluid"> <em>Fig. 2: Parallel benchmarking results of EFS (executed on <code>r5n.xlarge</code> and <code>t3.xlarge</code> instances) and NFS (executed on an <code>t3.xlarge</code> instance). Benchmark source: <a href="https://github.com/rstudio/fsbench">rstudio/fsbench</a>.</em></p>
<p>We’ve also compared Azure’s <a href="https://docs.microsoft.com/en-us/azure/storage/files/files-nfs-protocol">Azure Files NFS</a> offering to AWS EFS using the <a href="https://github.com/rstudio/fsbench">fsbench</a> tool from RStudio. At first we were optimistic giving the higher maximum values reported for the Azure NFS service. However, the benchmark results show a different picture and do not encourage moving existing RStudio k8s deployments from AWS to Azure.</p>
<p><img src="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/aws-azure-sequential.png" class="img-fluid"></p>
<p><em>Fig. 3: Sequential benchmarking results of AWS EFS (<strong>aws-mem</strong> = <code>r5n.large</code>) and Azure Files NFS (<strong>azure-gp</strong> = <code>D2s_v3</code>; <strong>azure-mem</strong> = <code>E2bds_v5</code>). Benchmark source: <a href="https://github.com/rstudio/fsbench">rstudio/fsbench</a>.</em></p>
<p>Having compared NFS and EFS performance-wise now and given that file system decisions are usually deliberate ones, the question for us was: how much slower is it compared to NFS and do the upsides of EFS outweigh it? After trying it out for ourselves, we concluded yes, the advantages of EFS outweigh its decreased performance and we should use it as the file system for our RStudio k8s clusters. With EFS, we</p>
<ul>
<li>don’t need to worry about a single NFS server deployment as a potential bottleneck</li>
<li>can more easily make use of multiple availability zones</li>
<li>have a file system which dynamically adjusts to storage use (expansion and shrinking)</li>
<li>eventually improves (in speed) over time</li>
</ul>
<p>We are aware that users coming from a k8s-NFS or on-premise installation will experience a reduced speed due to some increases in latency and especially when working with many small files. However, these will only be apparent for people coming from existing RSW installations and not for ones starting out on a new cluster. Especially users coming from an RSW on-premise installation will feel a substantial decrease in speed as in such an environment usually a single-instance RSW runs on an RWO file system (usually <code>ext4</code>) which is a completely different ballpark. FWIW, AWS has also improved EFS latency in <a href="https://aws.amazon.com/blogs/aws/amazon-elastic-file-system-update-sub-millisecond-read-latency/">February 2022</a>, making it more performant for existing and new customers at no additional cost.</p>
<p>Another (important) point worth mentioning is that on AWS, bottlerocket node images (more on that in a separate blog post) do not have native support for NFS but work with EFS. This becomes of interest when considering running a cluster on bottlerocket images or if the cluster is already doing so.</p>
</section>
</section>
<section id="rstudio-k8s-clusters-on-efs---deployment" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-k8s-clusters-on-efs---deployment">RStudio k8s clusters on EFS - Deployment</h2>
<p>During our EFS evaluation period, we came across potential pitfalls and other RStudio peculiarities which system admins need to be aware of when aiming for a k8s RStudio cluster. These are described in the following.</p>
<p>Note: This section makes a few assumptions:</p>
<ul>
<li>A k8s cluster on AWS</li>
<li>Full cluster admin permissions</li>
<li>RStudio Workbench and RStudio Connect “Enterprise” licenses</li>
<li>The use of <code>terraform</code> and the RStudio helm charts</li>
</ul>
<p>First, we would like to refer to the official implementation instructions for setting up RStudio applications on Kubernetes. While these do not necessarily target EFS, they contain a lot of information about NFS and other important points to be aware of.</p>
<section id="deploying-the-efs-driver-and-storage-classes" class="level3">
<h3 class="anchored" data-anchor-id="deploying-the-efs-driver-and-storage-classes">Deploying the EFS driver and storage class(es)</h3>
<p>Before EFS can be used, an EFS driver and corresponding storage class must be deployed in the cluster. The latter is then referenced within the RStudio deployments. There is an official kubernetes-sigs helm chart available at <a href="https://github.com/kubernetes-sigs/aws-efs-csi-driver">https://github.com/kubernetes-sigs/aws-efs-csi-driver</a> which one can use.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">resource</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"helm_release"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aws-efs-csi-driver"</span> {</span>
<span id="cb1-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">name</span>             = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aws-efs-csi-driver"</span></span>
<span id="cb1-3">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">chart</span>            = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aws-efs-csi-driver"</span></span>
<span id="cb1-4">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">repository</span>       = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://kubernetes-sigs.github.io/aws-efs-csi-driver"</span></span>
<span id="cb1-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">version</span>          = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2.2.7"</span></span>
<span id="cb1-6">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">create_namespace</span> = true</span>
<span id="cb1-7">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">namespace</span>        = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aws-efs-csi-driver"</span></span>
<span id="cb1-8">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">count</span>            = 1</span>
<span id="cb1-9"></span>
<span id="cb1-10">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">values</span> = [</span>
<span id="cb1-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${file</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">("${path.module</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/values/aws_efs_csi_values.yml"</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">)}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb1-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ]</span></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  # rsc</span></span>
<span id="cb1-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  set {</span></span>
<span id="cb1-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    name  = "</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storageClasses[0].parameters.fileSystemId</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb1-17"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    value = aws_efs_file_system.eks_efs.id</span></span>
<span id="cb1-18"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  }</span></span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  # rspm</span></span>
<span id="cb1-21"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  set {</span></span>
<span id="cb1-22"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    name  = "</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storageClasses[2].parameters.fileSystemId</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb1-23"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    value = aws_efs_file_system.eks_efs.id</span></span>
<span id="cb1-24"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  }</span></span>
<span id="cb1-25"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>The important part is the configuration of the chart values, which defines the storage classes. And yes, it is required to define multiple ones here, one for each RStudio service. The reason is that each service works different with respect to mount permissions of the respective application user (<code>rstudio-server</code>, <code>rstudio-connect</code>, <code>rstudio-pm</code>) and the way EFS is implemented (i.e., access points). There are two ways EFS can be used:</p>
<ul>
<li>dynamic provisioning</li>
<li>static provisioning</li>
</ul>
<p>The former is usually preferred. It means that persistent volumes can be created in a dynamic way, i.e.&nbsp;if a deployment asks for one, a new one gets (dynamically) created during the application deployment.</p>
<p>Static provisioning, on the other hand, means that one needs to create a persistent volume manually, referring to specific EFS mount points and in addition also configure its claim (PVC) (semi-)manually (“semi” because the PVC will find the PV it the names match and the chart offers to create it).</p>
<p>Now EFS behaves like so that if dynamic provisioning is used, a single <code>uid</code> and <code>gid</code> must be set which then owns the mounted directories recursively. This way does not respect individual user permissions for the respective directory tree. This is something that is OK (and even needed) for RSC and RSPM but unacceptable for RSW. With this state in an RSW deployment, each user would have full permissions on the files of all other users. Hence, for RSW, static provisioning is required as this allows for a more fine-grained control. In the <code>efs-sc-rsw</code> <code>storageClass</code> definition below, this is reflected by</p>
<ul>
<li>not setting a <code>uid</code> and <code>gid</code> value</li>
<li>setting the base path to <code>/</code> instead of a dynamically provisioned subpath</li>
</ul>
<p>Note that the <code>basePath</code> name for RSC and RSPM storage classes could be any name and <code>"/dynamic_provisioning"</code> is a subjective choice on our side.</p>
<p>For RSC and RSPM one also needs to supply the <code>fileSystemId</code> of the EFS file system to use. As this is done dynamically in our case, it is specified via the <code>set{}</code> notation.</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># only needed for dynamic provisioning - static provisioning must use a custom PV</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">storageClasses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> efs-sc-rsc</span></span>
<span id="cb2-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reclaimPolicy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Retain</span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumeBindingMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Immediate</span></span>
<span id="cb2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">allowVolumeExpansion</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mountOptions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> tls</span></span>
<span id="cb2-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parameters</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">provisioningMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> efs-ap</span></span>
<span id="cb2-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">directoryPerms</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"700"</span></span>
<span id="cb2-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"999"</span></span>
<span id="cb2-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"999"</span></span>
<span id="cb2-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basePath</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/dynamic_provisioning"</span></span>
<span id="cb2-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> efs-sc-rsw</span></span>
<span id="cb2-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reclaimPolicy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Retain</span></span>
<span id="cb2-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumeBindingMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Immediate</span></span>
<span id="cb2-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">allowVolumeExpansion</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mountOptions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> tls</span></span>
<span id="cb2-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parameters</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basePath</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span></span>
<span id="cb2-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> efs-sc-rspm</span></span>
<span id="cb2-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reclaimPolicy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Retain</span></span>
<span id="cb2-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">volumeBindingMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Immediate</span></span>
<span id="cb2-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">allowVolumeExpansion</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mountOptions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> tls</span></span>
<span id="cb2-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parameters</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">provisioningMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> efs-ap</span></span>
<span id="cb2-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">directoryPerms</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"700"</span></span>
<span id="cb2-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"99"</span></span>
<span id="cb2-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"99"</span></span>
<span id="cb2-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basePath</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/dynamic_provisioning"</span></span></code></pre></div>
</section>
<section id="configuring-rstudio-helm-charts" class="level3">
<h3 class="anchored" data-anchor-id="configuring-rstudio-helm-charts">Configuring RStudio helm charts</h3>
<p>Next, these storage classes need to be referenced in the respective RStudio deployments. As we are using dynamic provisioning for RSC and RSPM, we can let the helm chart create the PV and PVC. In the definition below, the <code>create:</code> and <code>mount:</code> fields only refer to the PVC. The PV will be provisioned dynamically in the background.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">sharedStorage:</span></span>
<span id="cb3-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">create:</span> true</span>
<span id="cb3-3">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mount:</span> true</span>
<span id="cb3-4">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">name:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pv-rsc-shared"</span></span>
<span id="cb3-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storageClassName:</span> efs-sc-rsc</span>
<span id="cb3-6">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">requests:</span></span>
<span id="cb3-7">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storage:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"20Gi"</span></span></code></pre></div>
<p>For RSW, more work is required. Here, the PV does not get provisioned dynamically and needs to be created manually via <code>terraform</code>. It helps to use the same name as the PVC, which is created by the helm chart, would search for. This also avoids having to create the PVC within <code>terraform</code>.</p>
<p>Note that here <code>data.aws_efs_file_system.efs.id</code> is the same value which was being referenced in the <code>aws-efs-csi-driver</code> helm chart above. To retrieve it, one needs to filter it from all existing file system IDs listed which are present in your account. In our case we use a tag for filtering but the <code>terraform</code> module also lists alternative ways to filter the correct ID. To protect the PV, we also set <code>prevent_destroy = true</code> so that potential <code>terraform</code> applies would not allow this PV to get deleted.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">resource</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"kubernetes_persistent_volume"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pv-rsw-home-efs"</span> {</span>
<span id="cb4-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">metadata</span> {</span>
<span id="cb4-3">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">name</span> = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pv-rsw-home-efs"</span></span>
<span id="cb4-4">  <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-5">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">spec</span> {</span>
<span id="cb4-6">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">capacity</span> = {</span>
<span id="cb4-7">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storage</span> = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"50Gi"</span></span>
<span id="cb4-8">    <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-9">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">access_modes</span>       = <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ReadWriteMany"</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-10">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">storage_class_name</span> = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"efs-sc-rsw"</span></span>
<span id="cb4-11">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">persistent_volume_source</span> {</span>
<span id="cb4-12">      <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">csi</span> {</span>
<span id="cb4-13">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">driver</span>        = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"efs.csi.aws.com"</span></span>
<span id="cb4-14">        <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">volume_handle</span> = data.aws_efs_file_system.efs.id <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># filesystem ID</span></span>
<span id="cb4-15">      <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-16">    <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-17">  <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-18"></span>
<span id="cb4-19">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">lifecycle</span> {</span>
<span id="cb4-20">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">prevent_destroy</span> = true</span>
<span id="cb4-21">  <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-22"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-23"></span>
<span id="cb4-24"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">data</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"aws_efs_file_system"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"efs"</span> {</span>
<span id="cb4-25">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tags</span> = {</span>
<span id="cb4-26">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Env</span> = <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"prod"</span></span>
<span id="cb4-27">  <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-28"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>In the RSW helm chart, one would then define the following</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">homeStorage</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb5-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb5-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mount</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb5-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pvc-rsw-home-efs"</span></span>
<span id="cb5-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">storageClassName</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"efs-sc-rsw"</span></span>
<span id="cb5-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">requests</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb5-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">storage</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"50Gi"</span></span></code></pre></div>
<p>In contrast to RSC and RSPM, RSW comes with two persistent volumes: home storage and shared storage. Due to the nature of EFS, the RSW deployment will complain about missing permissions for the default location under <code>/var/lib/</code> - see also <a href="https://github.com/rstudio/helm/issues/148">this GitHub issue</a>. To bypass this issue, one can change the default mount location of the shared storage and set it to the EFS home mount under <code>/home</code> to make it persistent.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">config</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">server</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rserver.conf</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">server-shared-storage-path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> /home/rstudio-shared-storage</span></span></code></pre></div>
<p>This should be it! With this setup, individual user permissions are honored within <code>/home</code> and RSW should be running on EFS. When inspecting <code>/home</code> in more detail, you will notice that all the other <code>base_path</code> mounts from the dynamic EFS provisioning are also there. But don’t worry, RSW users won’t have permission to look into them. You can just safely ignore it. If you still don’t like it, you need to create a dedicated EFS file system ID which is only used for RSW and does not contain additional access points used by the dynamic storage class provisioner.</p>
</section>
</section>
<section id="improving-rsw-performance-on-efs-bottlerocket-images-and-instance-type-choice" class="level2">
<h2 class="anchored" data-anchor-id="improving-rsw-performance-on-efs-bottlerocket-images-and-instance-type-choice">Improving RSW performance on EFS: bottlerocket images and instance type choice</h2>
<p>After having a running deployment of RSW on EFS, one can optionally make use of bottlerocket images to substantially decrease the session startup times on freshly provisioned nodes (i.e., after an autoscaler scale-up). We will cover this topic in more detail in another post.</p>


</section>

 ]]></description>
  <category>DevOps</category>
  <category>Posit</category>
  <category>file system</category>
  <category>performance</category>
  <guid>https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/</guid>
  <pubDate>Wed, 14 Sep 2022 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2022-09-14-rstudio-efs-nfs/banner.png" medium="image" type="image/png" height="120" width="144"/>
</item>
<item>
  <title>Accessing Google’s API via OAuth2</title>
  <dc:creator>Patrick Schratz</dc:creator>
  <link>https://blog.cynkra.com/posts/2022-05-14-accessing-google-api-via-oauth2/</link>
  <description><![CDATA[ 




<p>At cynkra we recently aimed to automate more parts of our internal toolstack. One tool is Google Workspace. Google Workspace offers a <a href="https://developers.google.com/workspace">comprehensive REST API</a> which can be used for automation purposes.</p>
<p>When interacting with an API, authentication is usually required. This is commonly done by adding a header to the request which includes an access token along with the actual API request. For many APIs these headers can be simple single access token of type <a href="https://swagger.io/docs/specification/authentication/bearer-authentication/">“Bearer”</a>. These tokens often have no expiration date and infinite scopes, meaning they can be used for any kind of request against the respective API endpoints. The risk with these tokens is that they are quite powerful and an attacker can somewhat easily get infinite access to your account, both in terms of scopes and time.</p>
<p>Therefore, many services recently started to favor the use of <a href="https://swagger.io/docs/specification/authentication/oauth2/">OAuth2</a> in a multi-stage authentication concept. The process can be broken down as follows:</p>
<ol type="1">
<li>An admin creates an OAuth2 app in the respective service (e.g.&nbsp;Google Cloud or Zoom) with limited scopes (i.e.&nbsp;only to certain parts of the API)</li>
<li>First an encoded “JSON Web Token” (JWT) must be created. In the specific case of the Google API, an access key and its secret from a Google “Service Account” (which needs to be created in the “Credentials” menu of Google Cloud) are required for signing the JWT during creation.</li>
<li>Next an API call makes a request against the OAuth2 app using the just created JWT token and gets a short-lived <em>Bearer</em> access token returned.</li>
<li>A third API call issues the actual API request.</li>
</ol>
<p>This multi-stage process can be automated by using automation tools like <em>Ansible</em> or similar. Yet the tricky part is usually the authentication against the OAuth2 app. Traditionally OAuth2 apps aim for GUI-based interaction, i.e., someone clicking a button to authorize the request. However, when aiming for automation via an API, this is not feasible. Instead the OAuth2 app should return the access token as code to further continue the automated workflow. There are plenty of Stackoverflow questions about this topic with many upvotes:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/10835365/authenticate-programmatically-to-google-with-oauth2">https://stackoverflow.com/questions/10835365/authenticate-programmatically-to-google-with-oauth2</a></li>
<li><a href="https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention?noredirect=1&amp;lq=1">https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention?noredirect=1&amp;lq=1</a></li>
<li><a href="https://stackoverflow.com/questions/71364188/how-to-authorize-a-curl-script-to-google-oauth-after-oauth-out-of-band-oob-flo/71374746#71374746">https://stackoverflow.com/questions/71364188/how-to-authorize-a-curl-script-to-google-oauth-after-oauth-out-of-band-oob-flo/71374746#71374746</a></li>
<li><a href="https://stackoverflow.com/questions/12710262/google-drive-redirect-uri-mismatch">https://stackoverflow.com/questions/12710262/google-drive-redirect-uri-mismatch</a></li>
</ul>
<section id="the-oob-deprecation" class="level2">
<h2 class="anchored" data-anchor-id="the-oob-deprecation">The “OOB” deprecation</h2>
<p>For many years there was a workaround by using <code>redirect_uri=urn:ietf:wg:oauth:2.0:oob</code> combined with <code>response_type=code</code> which was <a href="https://stackoverflow.com/questions/12710262/google-drive-redirect-uri-mismatch">widely shared across the web</a> and Youtube. Yet in Feburary 2022 Google finally <a href="https://developers.googleblog.com/2022/02/making-oauth-flows-safer.html#instructions-oob">blocked this approach</a> as it is considered unsafe and more secure methods should be used.</p>
</section>
<section id="the-jwt-authentication-approach" class="level2">
<h2 class="anchored" data-anchor-id="the-jwt-authentication-approach">The “JWT” authentication approach</h2>
<p>Hence a new approach is needed to authenticate against Google OAuth2 apps programmatically. One of these is the use of <a href="https://jwt.io/">JSON Web Tokens</a> (JWT). These are different to <em>Bearer</em> tokens in the way that they must be signed and encrypted using a domain-wide access token and am specific algorithm which the OAuth2 apps expects (for future decoding purposes). The mentioned encryption is also not straightforward and usually requires <a href="https://developers.google.com/identity/protocols/oauth2/service-account#authorizingrequests">the use of an additional language</a> (e.g.&nbsp;Python, Ruby, Java) and a respective module which does the encryption. The key and its secret (in the Google case) which should be encrypted must be generated within a <em>service account</em> that was granted <a href="https://developers.google.com/admin-sdk/directory/v1/guides/delegation"><em>domain-wide delegation</em></a>. If such an encrypted JWT is sent to the OAuth2 app, it can verify the owner and issue a short-lived token with the respective scopes of the OAuth2 app.</p>
</section>
<section id="ansible-workflow-example" class="level2">
<h2 class="anchored" data-anchor-id="ansible-workflow-example">Ansible workflow example</h2>
<p>All of the above made the process of issueing a “simple” API call against the Google API quite cumbersome. This is why in the following a fully-working ansible approach is provided which uses a Ruby script for the initial JWT encryption.</p>
<p>This assumes</p>
<ul>
<li>a working Ruby installation at <code>/usr/bin/ruby</code></li>
<li>an existing Google service account with <em>domain wide delegation</em></li>
<li>an OAuth2 app to which the service account has acccess to with matching scopes required for the final API call</li>
</ul>
<p><em>Disclaimer: The <code>jwt.rb</code> script below and parts of the ansible logic are taken/adapted from another blog post which I am unable to find again.</em> <em>Memo to myself: always instantly store the link somewhere if you find some helpful content on a website…</em></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Create JWT for Google OAuth2"</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">  command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb1-3">    env ruby &lt;path/to/&gt;/jwt.rb --iss "google-workspace@&lt;some service account name&gt;.iam.gserviceaccount.com"</span>
<span id="cb1-4">    --sub "&lt;issuer email&gt;" --scope "{{ google_workspace_oauth2_api_scopes | join(' ') }}"</span>
<span id="cb1-5">    --kid "{{ google_workspace_oauth2_key_id.value }}"</span>
<span id="cb1-6">    --pkey "{{ google_workspace_oauth2_private_key.value }}"</span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chdir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/usr/bin/"</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> jwt</span></span></code></pre></div>
<p>Here <code>google_workspace_oauth2_api_scopes</code> is a list of Google API scopes</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">google_workspace_oauth2_api_scopes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://www.googleapis.com/auth/admin.directory.user'</span></span>
<span id="cb2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://www.googleapis.com/auth/admin.directory.group'</span></span>
<span id="cb2-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://www.googleapis.com/auth/admin.directory.domain'</span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://www.googleapis.com/auth/admin.directory.userschema'</span></span>
<span id="cb2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://www.googleapis.com/auth/apps.licensing'</span></span></code></pre></div>
<p>and <code>google_workspace_oauth2_key_id</code> and <code>google_workspace_oauth2_private_key</code> are the credentials from the respective service account used.</p>
<p>The <code>jwt.rb</code> file referenced in the call above looks as follows:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb3-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">#!/usr/bin/env ruby</span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># frozen_string_literal: true</span></span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'jwt'</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'optparse'</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">require</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'openssl'</span></span>
<span id="cb3-7"></span>
<span id="cb3-8">options <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{}</span></span>
<span id="cb3-9"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">OptionParser</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.new</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span>opts<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-10">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.banner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'Usage: jwt.rb [options]'</span></span>
<span id="cb3-11"></span>
<span id="cb3-12">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.on</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'--iss ISS'</span>, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'Issuer'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span>iss<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-13">    options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:iss</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> iss</span>
<span id="cb3-14">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb3-15">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.on</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'--sub SUB'</span>, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'Subject'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sub</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-16">    options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:sub</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sub</span></span>
<span id="cb3-17">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb3-18">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.on</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'--scope SCOPE'</span>, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'API Scopes'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span>scope<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-19">    options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:scope</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> scope</span>
<span id="cb3-20">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb3-21">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.on</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'--kid KID'</span>, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'Key id'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span>kid<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-22">    options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:kid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> kid</span>
<span id="cb3-23">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb3-24">  opts<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.on</span>(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'--pkey PKEY'</span>, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'Key'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span>pkey<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-25">    options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:pkey</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> pkey</span>
<span id="cb3-26">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span></span>
<span id="cb3-27"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">end</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.parse!</span></span>
<span id="cb3-28"></span>
<span id="cb3-29">iat <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">Time</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.now.to_i</span></span>
<span id="cb3-30">exp <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> iat <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">900</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># token is 900s valid</span></span>
<span id="cb3-31"></span>
<span id="cb3-32">payload <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span> <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">iss: </span>options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:iss</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.to_s</span>,</span>
<span id="cb3-33">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sub</span>: options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:sub</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.to_s</span>,</span>
<span id="cb3-34">            <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">scope: </span>options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:scope</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.to_s</span>,</span>
<span id="cb3-35">            <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">aud: </span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://oauth2.googleapis.com/token'</span>,</span>
<span id="cb3-36">            <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">kid: </span>options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:kid</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.to_s</span>,</span>
<span id="cb3-37">            <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">exp: </span>exp,</span>
<span id="cb3-38">            <span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">iat: </span>iat <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb3-39"></span>
<span id="cb3-40">pkey <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> options<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="wa" style="color: #5E5E5E;
background-color: null;
font-style: italic;">:pkey</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.to_s.gsub</span>(<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">'\n'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"\n"</span>)</span>
<span id="cb3-41">priv_key <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">OpenSSL</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">::</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">PKey</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">::</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">RSA</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.new</span>(pkey)</span>
<span id="cb3-42"></span>
<span id="cb3-43">token <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">JWT</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.encode</span>(payload, priv_key, <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'RS256'</span>)</span>
<span id="cb3-44"></span>
<span id="cb3-45"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">puts</span> token</span></code></pre></div>
<p>The important part is happening at the bottom: <code>JWT.encode</code> encodes the payload of the POST request, which consists of the API key from the service account. Specifically, the secret of the respective key pair (named <code>priv_key</code> here) is used to encrypt the payload.</p>
<p>Next, this JWT needs to be passed to the <code>https://oauth2.googleapis.com/token</code> endpoint to ask for a <em>Bearer</em> access token by using the following payload in the body:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Get access token from Google oauth2"</span></span>
<span id="cb4-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uri</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">url</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://oauth2.googleapis.com/token"</span></span>
<span id="cb4-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">method</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> POST</span></span>
<span id="cb4-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grant_type={{ google_workspace_oauth2_grant_type }}&amp;assertion={{ jwt.stdout }}"</span></span>
<span id="cb4-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return_content</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb4-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> token</span></span></code></pre></div>
<p>Here, <code>google_workspace_oauth2_grant_type</code> needs to be <code>"urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer"</code>. This tells the endpoint that we are handing over a JWT token and want to get a <em>Bearer</em> token back.</p>
<p>Finally, this (short-lived) <em>Bearer</em> token can be used to issue the desired API call, e.g.&nbsp;creating a new user:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Create user"</span></span>
<span id="cb5-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uri</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb5-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">method</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> POST</span></span>
<span id="cb5-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">url</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://admin.googleapis.com/admin/directory/v1/users</span></span>
<span id="cb5-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">headers</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb5-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">authorization</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer {{ token.json.access_token }}"</span></span>
<span id="cb5-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body_format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> json</span></span>
<span id="cb5-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'{</span></span>
<span id="cb5-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "primaryEmail": "{{ username }}@email.com",</span></span>
<span id="cb5-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "password": "{{ user_password }}",</span></span>
<span id="cb5-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "name": {</span></span>
<span id="cb5-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">             "givenName": "{{ first_name }}",</span></span>
<span id="cb5-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">             "familyName": "{{ last_name }}"</span></span>
<span id="cb5-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           },</span></span>
<span id="cb5-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "isAdmin": "{{ admin }}"</span></span>
<span id="cb5-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">         }'</span></span></code></pre></div>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>The OAuth2-API-Auth process to authenticate against the Google API is quite cumbersome and quite a few little things can go wrong. As for all other methods, it is not possible to say how long this method will stay functional. JWTs are a quite promising concept and it is likely that they will be around for quite some time as they are considered pretty save. The biggest challenge is usually to puzzle all bits together and find the correct documentation resource for the respective provider. Once it works, there’s almost no overhead when using tools like Ansible to automate the process.</p>
<p>It should be noted that the approach is quite generic: for some providers you might need to change the encoding algorithm when creating the JWT (e.g.&nbsp;for Zoom it needs to be <code>HS256</code>) but other than that you should be able to reuse the <code>jwt.rb</code> script.</p>
</section>
<section id="full-ansible-script" class="level2">
<h2 class="anchored" data-anchor-id="full-ansible-script">Full Ansible script</h2>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"></span>
<span id="cb6-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Create JWT for Google OAuth2"</span></span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">  command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb6-4">    env ruby &lt;path/to/&gt;/jwt.rb --iss "google-workspace@&lt;some service account name&gt;.iam.gserviceaccount.com"</span>
<span id="cb6-5">    --sub "&lt;issuer email&gt;" --scope "{{ google_workspace_oauth2_api_scopes | join(' ') }}"</span>
<span id="cb6-6">    --kid "{{ google_workspace_oauth2_key_id.value }}"</span>
<span id="cb6-7">    --pkey "{{ google_workspace_oauth2_private_key.value }}"</span>
<span id="cb6-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chdir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/usr/bin/"</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb6-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> jwt</span></span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Get access token from Google oauth2"</span></span>
<span id="cb6-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uri</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">url</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://oauth2.googleapis.com/token"</span></span>
<span id="cb6-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">method</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> POST</span></span>
<span id="cb6-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grant_type={{ google_workspace_oauth2_grant_type }}&amp;assertion={{ jwt.stdout }}"</span></span>
<span id="cb6-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return_content</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb6-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">register</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> token</span></span>
<span id="cb6-18"></span>
<span id="cb6-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Google Workspace: Create user"</span></span>
<span id="cb6-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uri</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">method</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> POST</span></span>
<span id="cb6-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">url</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://admin.googleapis.com/admin/directory/v1/users</span></span>
<span id="cb6-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">headers</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">authorization</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer {{ token.json.access_token }}"</span></span>
<span id="cb6-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body_format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> json</span></span>
<span id="cb6-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">body</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'{</span></span>
<span id="cb6-27"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "primaryEmail": "{{ username }}@email.com",</span></span>
<span id="cb6-28"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "password": "{{ user_password }}",</span></span>
<span id="cb6-29"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "name": {</span></span>
<span id="cb6-30"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">             "givenName": "{{ first_name }}",</span></span>
<span id="cb6-31"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">             "familyName": "{{ last_name }}"</span></span>
<span id="cb6-32"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           },</span></span>
<span id="cb6-33"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">           "isAdmin": "{{ admin }}"</span></span>
<span id="cb6-34"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">         }'</span></span></code></pre></div>


</section>

 ]]></description>
  <category>api</category>
  <category>google</category>
  <category>oauth2</category>
  <guid>https://blog.cynkra.com/posts/2022-05-14-accessing-google-api-via-oauth2/</guid>
  <pubDate>Sat, 14 May 2022 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2022-05-14-accessing-google-api-via-oauth2/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>seasonal 1.9: Accessing composite output</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2022-04-19-seasonal-1.9/</link>
  <description><![CDATA[ <p>seasonal is an easy-to-use and full-featured R interface to X-13ARIMA-SEATS, the seasonal adjustment software developed by the United States Census Bureau. The latest CRAN version of seasonal fixes several bugs and makes it easier to access output from multiple objects. See <a href="https://github.com/christophsax/seasonal/blob/main/NEWS.md#190">here</a> for a complete list of changes.</p>
<figure class="figure"><img alt="Illustration" src="https://blog.cynkra.com/posts/2022-04-19-seasonal-1.9/banner.jpg" style=" width: 100%; height: auto" class="figure-img"><figcaption>
Photo by Aaron Burden
</figcaption></figure><p><br></p>
<p><code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code> is the core function of the <a href="https://cran.r-project.org/package=seasonal">seasonal</a> package. By default, <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code> calls the automatic procedures of X-13ARIMA-SEATS to perform a seasonal adjustment that works well in most circumstances:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="http://www.seasonal.website">seasonal</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">AirPassengers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>For a more detailed introduction, read our <a href="https://doi.org/10.18637/jss.v087.i11">article in the <em>Journal of Statistical Software</em></a>.</p>
<section id="multiple-series-adjustment" class="level3"><h3 class="anchored" data-anchor-id="multiple-series-adjustment">Multiple series adjustment</h3>
<p>The previous version has introduced <a href="https://www.cynkra.com/blog/2021-03-09-seasonal-1.8/">the adjustment of multiple series</a> in a single call to <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code>. This has removed the need for loops or <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> in such cases and finally brought the <em>composite</em> spec to seasonal.</p>
<p>As <a href="https://github.com/christophsax/seasonal/issues/278">Brian Monsell</a> pointed out, this was not enough to access the output from the composite spec. The latest <a href="https://cran.r-project.org/package=seasonal">CRAN version</a> fixes this problem.</p>
<p>Multiple adjustments can be performed by supplying multiple time series as an <code>"mts"</code> object:</p>
<div class="cell">
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="http://www.seasonal.website">seasonal</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m0</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, x11 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/final.html">final</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m0</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          fdeaths  mdeaths
Jan 1974 614.1235 1598.740
Feb 1974 542.3500 1492.127
Mar 1974 613.5029 1443.238
Apr 1974 591.5725 1694.643
May 1974 607.4970 1696.021
Jun 1974 543.8415 1558.886
Jul 1974 597.0745 1663.176
Aug 1974 587.0533 1623.498
Sep 1974 588.2693 1741.394
Oct 1974 735.6666 1735.516
Nov 1974 602.0218 1665.590
Dec 1974 496.3985 1394.097
Jan 1975 564.0055 1560.605
Feb 1975 591.0320 1708.763
Mar 1975 585.7739 1652.994
Apr 1975 581.5294 1671.265
May 1975 537.8055 1588.605
Jun 1975 584.3284 1600.979
Jul 1975 566.4872 1541.099
Aug 1975 617.1197 1623.445
Sep 1975 516.4781 1521.497
Oct 1975 559.0481 1577.200
Nov 1975 561.6315 1602.659
Dec 1975 580.9778 1569.692
Jan 1976 519.8106 1477.855
Feb 1976 882.3725 2180.616
Mar 1976 674.5057 1744.114
Apr 1976 467.4502 1366.628
May 1976 509.7854 1344.809
Jun 1976 553.5233 1434.662
Jul 1976 503.2795 1447.952
Aug 1976 494.2373 1383.932
Sep 1976 529.1840 1453.496
Oct 1976 570.4128 1435.912
Nov 1976 590.4285 1540.551
Dec 1976 587.0971 1572.631
Jan 1977 583.2427 1607.153
Feb 1977 498.9514 1287.403
Mar 1977 500.4632 1306.324
Apr 1977 569.2076 1685.581
May 1977 565.6470 1405.231
Jun 1977 509.3196 1432.968
Jul 1977 548.4062 1414.216
Aug 1977 523.6985 1444.945
Sep 1977 563.3014 1402.720
Oct 1977 495.6653 1427.458
Nov 1977 453.9859 1307.828
Dec 1977 502.3045 1268.618
Jan 1978 535.2658 1415.724
Feb 1978 633.7605 1790.002
Mar 1978 559.2936 1469.883
Apr 1978 485.5062 1343.715
May 1978 590.4080 1509.166
Jun 1978 574.4467 1464.288
Jul 1978 571.2263 1428.398
Aug 1978 542.3579 1424.622
Sep 1978 551.2099 1422.428
Oct 1978 557.6905 1399.404
Nov 1978 479.8979 1199.762
Dec 1978 550.4253 1397.023
Jan 1979 548.9834 1557.853
Feb 1979 576.9922 1425.717
Mar 1979 549.3468 1393.788
Apr 1979 546.4590 1449.784
May 1979 525.9881 1359.843
Jun 1979 550.2481 1330.113
Jul 1979 533.7558 1373.156
Aug 1979 566.6884 1381.653
Sep 1979 552.6500 1377.175
Oct 1979 533.9571 1337.640
Nov 1979 557.9707 1414.101
Dec 1979 475.5049 1038.506</code></pre>
</div>
</div>
<p>This performs two seasonal adjustments, one for <code>fdeaths</code> and one for <code>mdeaths</code>. The <a href="https://cran.r-project.org/web/packages/seasonal/vignettes/multiple.html">vignette on multiple adjustments</a> describes how to specify options for individual series.</p>
</section><section id="accessing-composite-output" class="level3"><h3 class="anchored" data-anchor-id="accessing-composite-output">Accessing composite output</h3>
<p>The <code>composite</code> argument is a list with an X-13 specification applied to the aggregated series:</p>
<div class="cell">
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  composite <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  series.comptype <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"add"</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
</div>
<p>With version 1.9 can now use <code><a href="https://rdrr.io/pkg/seasonal/man/out.html">out()</a></code> to access the output of the composite spec:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/out.html">out</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>We can also use <code><a href="https://rdrr.io/pkg/seasonal/man/series.html">series()</a></code>, e.g., to access the final, indirectly adjusted series via the <code>composite</code> spec (see <code><a href="https://rdrr.io/pkg/seasonal/man/series.html">?series</a></code> for all available series):</p>
<div class="cell">
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/series.html">series</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"composite.indseasadj"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
1974 2172.614 2053.613 2057.679 2284.821 2260.974 2105.191 2240.895 2185.517
1975 2098.251 2298.581 2213.878 2256.802 2111.628 2181.738 2098.883 2219.083
1976 1969.128 3078.359 2373.028 1846.802 1851.167 1983.231 1943.369 1872.025
1977 2132.860 1807.832 1795.898 2262.793 1957.817 1940.262 1949.784 1953.665
1978 1908.154 2431.050 2007.252 1830.715 2077.654 2033.120 1987.875 1956.487
1979 2061.627 1997.557 1925.365 1984.834 1885.778 1882.208 1903.203 1937.474
          Sep      Oct      Nov      Dec
1974 2296.345 2395.347 2291.835 2013.749
1975 2024.988 2100.543 2181.495 2234.826
1976 1967.742 1973.567 2151.597 2199.389
1977 1946.642 1894.848 1807.119 1808.051
1978 1959.824 1928.748 1724.336 1966.847
1979 1925.618 1846.713 1991.679 1517.027</code></pre>
</div>
</div>


</section> ]]></description>
  <category>R</category>
  <category>time-series</category>
  <guid>https://blog.cynkra.com/posts/2022-04-19-seasonal-1.9/</guid>
  <pubDate>Tue, 19 Apr 2022 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2022-04-19-seasonal-1.9/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Google Season of Docs with R: useR! Information Board</title>
  <dc:creator>Ben Ubah</dc:creator>
  <link>https://blog.cynkra.com/posts/2022-01-05-gsod-user-infoboard/</link>
  <description><![CDATA[ 




<p>“Google Season of Docs (GSoD) provides support for open source projects to improve their documentation and gives professional technical writers an opportunity to gain experience in open source.” (Source: <a href="https://developers.google.com/season-of-docs">Program website</a>)</p>
<p>The program makes it possible for technical writers to work closely with an open-source community they may or may not have been engaged with, to solve real problems with high-quality documentation.</p>
<figure class="figure">
<img alt="dashboard for exploring useR! conference" src="https://blog.cynkra.com/posts/2022-01-05-gsod-user-infoboard/banner.png" style=" width: 100%; height: auto" class="figure-img">
</figure>
<p>In the end, an awareness of open source, of documentation and technical writing is raised, while participating open source organizations benefit from an improvement in their documentation. The R Project participated in GSoD as an open-source organization for the first time this year after several years of participating in Google Summer of Code (GSoC), another open-source program focused on coding.</p>
<section id="the-user-conference" class="level2">
<h2 class="anchored" data-anchor-id="the-user-conference">The useR! conference</h2>
<p>useR! is the main annual conference for the R user and developer community that is organized by a community of volunteers and supported by the R Foundation. It is organized by a different team of community organizers each year and has been held since 2004. The useR! conference program consists of both invited and user-contributed presentations in addition to tutorials and other social events.</p>
<p>With so much historical information about useR! scattered around Git repositories, useR! websites, and organizers’ hard-disks, the R Project proposed to organize useR! documentation with two outputs- an information board and a knowledgebase. The knowledgebase was proposed to take the form of an online book, inspired by examples such as the <a href="https://knowledgebase.satrdays.org/">satRdays knowledgebase</a>. The information board was proposed as a dashboard to interactively browse historical information. These two projects were carried on concurrently over a span of 6 months (May - November, 2021) during which my primary responsibility as a technical writer was to curate historical useR! conference data and develop the information board with this data.</p>
</section>
<section id="the-information-board" class="level2">
<h2 class="anchored" data-anchor-id="the-information-board">The Information board</h2>
<p>Why an information board?</p>
<p>After participating in useR! 2021 as a part of the organizing committee, I identified several gaps within the organizational process that an information board could fill up. Organizers spend a lot of time looking for information from past useR! conference websites, past organizers, and other archives of un-structured or semi-structured data. This process repeats each year for every useR! conference and this seems to put a burden on past organizers or co-ordinators to continuously provide information to future organizers.</p>
<p>To fill in these gaps, I proposed to: - gather data in a structured format for at least the past six useR! conferences - build a dashboard using this data-set - structure things in such a way that updating the data files leads to an updated dashboard after a rebuild process</p>
<p>The final product could be found by accessing the following URL: <a href="https://bit.ly/infoboard-cynkra">https://bit.ly/infoboard-cynkra</a></p>
</section>
<section id="use-cases" class="level2">
<h2 class="anchored" data-anchor-id="use-cases">Use cases</h2>
<p>A typical useR! conference program consists of keynotes, regular talks, lightning talks, poster sessions, tutorials and social events. The organizing team for each conference would need to identify keynote speakers, select talks and tutorials, and determine which social events to offer. In addition to those, the organizing team would need to set up partnerships for the conference - sponsors (that can contribute in different ways) and partner organizations. To prospective organizers who have never organized useR! or a conference of such capacity, it is burdensome to sift through 15+ past useR! websites to search out the type of tutorials that have been offered in the past, the number of keynote presentations to offer and around what topics, or what kind of social events to host.</p>
<p>It is difficult to ascertain if a talk has been presented in a useR! in the past without access to structured and filterable historical data.</p>
<p>Furthermore, with diversity and inclusion in mind, it could be difficult to determine presenters that have already presented many times before (perhaps on a similar topic) and those from under-represented groups that have only had a few chances to present talks at a useR!</p>
<p>For organizers to target sponsors who are interested in R and who may have sponsored in the past within the location of the conference is hard without data-driven assistance. For potential sponsors, it provides some insight into the scope and reach of useR! conferences.</p>
<p>For entities like the R Foundation, R Consortium and R Forwards, the information board provides an easy way to gain insights into the history of useR! while planning for the future in a global and diverse context.</p>
<p>Other conferences beyond useR! could benefit from the information board as it provides organized data around people, organizations, and presentations that could be helpful in planning local and regional R events.</p>
</section>
<section id="tools" class="level2">
<h2 class="anchored" data-anchor-id="tools">Tools</h2>
<p>I used <code>flexdashboard</code> for the structure and layout of the dashboard, <code>echarts4r</code> for charts, and <code>reactable</code> for interactive tables.</p>
</section>
<section id="technical-information" class="level2">
<h2 class="anchored" data-anchor-id="technical-information">Technical information</h2>
<p>The source for this dashboard lives in a <a href="https://gitlab.com/rconf/userinfoboard/">GitLab repository</a> where <a href="https://gitlab.com/rconf/userinfoboard/-/issues">issues</a> or <a href="https://gitlab.com/rconf/userinfoboard/-/merge_requests">merge requests</a> can be raised.</p>
<p>All the data are located in the <a href="https://gitlab.com/rconf/userinfoboard/-/tree/master/data">data directory</a> and a description of the years which each dataset covers.</p>
<p>The charts and tables are produced from scripts in the <a href="https://gitlab.com/rconf/userinfoboard/-/tree/master/R">R directory</a> - hopefully making it easier to reproduce them or use them in other contexts.</p>
<p>The sidebar menu, footer and JavaScript codes are saved as HTML fragments that are included via the YAML header of the <code>index.Rmd</code> file.</p>
</section>
<section id="license" class="level2">
<h2 class="anchored" data-anchor-id="license">License</h2>
<p>The data is available for download under a CC BY 4.0 license, while the R code is available under a GPL-3.0 license.</p>
</section>
<section id="technical-writing-experience" class="level2">
<h2 class="anchored" data-anchor-id="technical-writing-experience">Technical Writing experience</h2>
<p>Having written R articles for <a href="https://opendatascience.com/tag/r-trends/">Open Data Science</a> in the past, the experience gained from this GSoD project improved my technical writing and project management skills. In a collaborative sense: I received and implemented feedback several times a month from different volunteers across several timezones, while working to produce the deliverable per project-phase and covering the general scope of the project.</p>
</section>
<section id="acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h2>
<p>This project would not have been possible at this time without support from Google via the GSoD program. Much appreciation goes to the GSoD admins for the R Project - Heather Turner and Matt Bannert - who did a lot of admin work from the proposal to the final report. I also appreciate Noa Tamir, who excellently managed the week-to-week supervision of this work. I appreciate the help I received from several volunteers on this project including past organizers who provided data from their archives.</p>
<p>Finally, cynkra is passionate about open-source and the R community, and this has provided an enabling environment for this project to succeed and to continue succeeding.</p>


</section>

 ]]></description>
  <category>R</category>
  <category>gsod</category>
  <category>dashboard</category>
  <guid>https://blog.cynkra.com/posts/2022-01-05-gsod-user-infoboard/</guid>
  <pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2022-01-05-gsod-user-infoboard/banner.png" medium="image" type="image/png" height="76" width="144"/>
</item>
<item>
  <title>Running old versions of TeXlive with tinytex</title>
  <dc:creator>Kirill Müller</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-10-07-old-texlive/</link>
  <description><![CDATA[ 




<p>Rendering PDFs with <a href="https://pkgs.rstudio.com/rmarkdown/">rmarkdown</a> requires a working LaTeX installation, such as <a href="https://yihui.org/tinytex/">tinytex</a>. Occasionally, existing workflows break with the newest version of LaTeX. This post describes how to run an older LaTeX version for just a little while.</p>
<figure class="figure">
<img alt="Old typewriter has typed the word 'Update' on paper" src="https://blog.cynkra.com/posts/2021-10-07-old-texlive/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Markus Winkler
</figcaption>
</figure>
<p>Rendering PDFs with <a href="https://pkgs.rstudio.com/rmarkdown/">rmarkdown</a> requires a working LaTeX installation. The excellent <a href="https://yihui.org/tinytex/">tinytex</a> package helps installing a portable variant of the TeXlive distribution with minimal fuss, on any major operating system. It is really as simple as:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_tinytex</span>()</span></code></pre></div>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb2-1">trying URL 'https://yihui.org/tinytex/TinyTeX-1.tgz'</span>
<span id="cb2-2">Content type 'application/octet-stream' length 87001665 bytes (83.0 MB)</span></code></pre></div>
<section id="breaking-changes-in-latex" class="level2">
<h2 class="anchored" data-anchor-id="breaking-changes-in-latex">Breaking changes in LaTeX?</h2>
<p>Despite its age, LaTeX is still a lively maintained and evolving system, with the consequence that some documents that worked on an older version of LaTeX may no longer work with the most recent stack. One such example is the <a href="https://ctan.org/pkg/tabu?lang=en">tabu package</a> that <a href="https://github.com/haozhu233/kableExtra/issues/625">breaks for some use cases</a> with TeXlive 2021.</p>
<p>On a clean tinytex installation, rendering an <code>.rmd</code> document with the following code starts with installing missing packages:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(mtcars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">booktabs =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">longtable =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-2">  kableExtra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full_width =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb4-1">tlmgr: package repository https://mirror.foobar.to/CTAN/systems/texlive/tlnet (not verified: gpg unavailable)</span>
<span id="cb4-2">[1/1, ??:??/??:??] install: multirow [3k]</span>
<span id="cb4-3">running mktexlsr ...</span>
<span id="cb4-4">done running mktexlsr.</span>
<span id="cb4-5">tlmgr: package log updated: ~/Library/TinyTeX/texmf-var/web2c/tlmgr.log</span>
<span id="cb4-6">tlmgr: command log updated: ~/Library/TinyTeX/texmf-var/web2c/tlmgr-commands.log</span>
<span id="cb4-7">tlmgr: package repository https://mirror.foobar.to/CTAN/systems/texlive/tlnet (not verified: gpg unavailable)</span>
<span id="cb4-8">[1/1, ??:??/??:??] install: wrapfig [10k]</span>
<span id="cb4-9">running mktexlsr ...</span>
<span id="cb4-10">...</span></code></pre></div>
<p>Yes, missing packages are installed on the fly! A full LaTeX distribution has several GB in size. The lazy package installation is a cool feature of the tinytex distribution that allows starting quickly with a minimal installation, without downloading and unpacking the whole thing.</p>
<p>However, compilation gives the following error message:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb5-1">tlmgr: package log updated: ~/Library/TinyTeX/texmf-var/web2c/tlmgr.log</span>
<span id="cb5-2">tlmgr: command log updated: ~/Library/TinyTeX/texmf-var/web2c/tlmgr-commands.log</span>
<span id="cb5-3">! Dimension too large.</span>
<span id="cb5-4">\LT@max@sel #1#2-&gt;{\ifdim #2=\wd \tw@</span>
<span id="cb5-5">                                      #1\else \number \c@LT@chunks \fi }{\th...</span>
<span id="cb5-6">l.317 \end{longtabu}</span>
<span id="cb5-7"></span>
<span id="cb5-8">Error: LaTeX failed to compile test.tex. See https://yihui.org/tinytex/r/#debugging for debugging tips. See test.log for more info.</span></code></pre></div>
</section>
<section id="what-if-we-switch-to-the-previous-version" class="level2">
<h2 class="anchored" data-anchor-id="what-if-we-switch-to-the-previous-version">What if we switch to the previous version?</h2>
<p>“But it used to work yesterday!” Fine, let’s install the last version that is still based on TeXlive 2020:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_tinytex</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">version =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2021.03"</span>)</span></code></pre></div>
<p>Unfortunately, this breaks the package downloader:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb7-1">A new version of TeX Live has been released. If you need to install or update any LaTeX packages, you have to upgrade TinyTeX with tinytex::reinstall_tinytex(). If it fails to upgrade, you might be using a default random CTAN mirror that has not been fully synced to the main CTAN repository, and you need to wait for a few more days or use a CTAN mirror that is known to be up-to-date (see the "repository" argument on the help page ?tinytex::install_tinytex).</span>
<span id="cb7-2"></span>
<span id="cb7-3">tlmgr: Local TeX Live (2020) is older than remote repository (2021).</span>
<span id="cb7-4">Cross release updates are only supported with</span>
<span id="cb7-5">  update-tlmgr-latest(.sh/.exe) --update</span>
<span id="cb7-6">See https://tug.org/texlive/upgrade.html for details.</span>
<span id="cb7-7">! LaTeX Error: File `multirow.sty' not found.</span>
<span id="cb7-8">...</span></code></pre></div>
<p>And we’re told to upgrade TeXlive, which isn’t helpful in our particular use case.</p>
</section>
<section id="can-we-make-the-previous-version-work" class="level2">
<h2 class="anchored" data-anchor-id="can-we-make-the-previous-version-work">Can we make the previous version work?</h2>
<p>Yes. The solution is to teach tinytex to make do with a historic snapshot of the TeXlive distribution:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">tinytex<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tlmgr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"option repository https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/2020/tlnet-final"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb9-1">tlmgr: setting default package repository to https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/2020/tlnet-final</span>
<span id="cb9-2">tlmgr: updating ~/Library/TinyTeX/tlpkg/texlive.tlpdb</span></code></pre></div>
<p>After that, automatic package downloads work again, with a prominent message reminding you that you’re running on a frozen snapshot:</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(mtcars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">booktabs =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">longtable =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-2">  kableExtra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full_width =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb11-1">TeX Live 2020 is frozen and will no longer</span>
<span id="cb11-2">be routinely updated. This happens in preparation for a new release.</span>
<span id="cb11-3"></span>
<span id="cb11-4">If you're willing to help with pretesting the new release, and we hope</span>
<span id="cb11-5">you are, (when pretests are available), please read</span>
<span id="cb11-6">https://tug.org/texlive/pretest.html.</span>
<span id="cb11-7"></span>
<span id="cb11-8">Otherwise, just wait, and the new release will be ready in due time.</span>
<span id="cb11-9">TeX Live 2020 is frozen and will no longer</span>
<span id="cb11-10">be routinely updated. This happens in preparation for a new release.</span>
<span id="cb11-11"></span>
<span id="cb11-12">If you're willing to help with pretesting the new release, and we hope</span>
<span id="cb11-13">you are, (when pretests are available), please read</span>
<span id="cb11-14">https://tug.org/texlive/pretest.html.</span>
<span id="cb11-15"></span>
<span id="cb11-16">Otherwise, just wait, and the new release will be ready in due time.</span>
<span id="cb11-17">tlmgr: package repository https://ftp.tu-chemnitz.de/pub/tug/historic/systems/texlive/2020/tlnet-final (not verified: gpg unavailable)</span>
<span id="cb11-18">[1/1, ??:??/??:??] install: multirow [3k]</span>
<span id="cb11-19">running mktexlsr ...</span>
<span id="cb11-20">done running mktexlsr.</span>
<span id="cb11-21">tlmgr: package log updated: /Users/kirill/Library/TinyTeX/texmf-var/web2c/tlmgr.log</span>
<span id="cb11-22">TeX Live 2020 is frozen and will no longer</span>
<span id="cb11-23">be routinely updated. This happens in preparation for a new release.</span>
<span id="cb11-24">...</span></code></pre></div>
<p>The document is now rendered without errors.</p>
<p>The tinytex maintainers <a href="https://github.com/yihui/tinytex-releases/issues/19">have confirmed</a> that old bundles remain available for download. Of course the correct solution is to avoid weakly maintained dependencies in your code, and to replace them by better solutions. In reality, this is not always feasible, and breakages may occur without notice.</p>
<p>Happy freezing!</p>
</section>
<section id="details" class="level2">
<h2 class="anchored" data-anchor-id="details">Details</h2>
<p>On the <a href="https://tug.org/texlive/">TeXlive homepage</a>, the <a href="https://tug.org/texlive/acquire.html">“How to acquire TeX Live: other methods”</a> link has a section “Past releases”. The <code>tlmgr</code> command is shown right there. The <a href="https://tug.org/historic/">“Historic archive”</a> page contains a list of historic mirrors, use a mirror close to you.</p>
<p>I originally started my search at the “Historic archive” page. It took some time to find the correct command, it is also documented in the <a href="https://www.tug.org/texlive/doc/tlmgr.html#option"><code>tlmgr</code> manual</a>.</p>
<p>The tinytex package provides the <code>tlmgr_repo()</code> function as a shortcut to set the repository, but it seems to fail currently for this use case. Thanks Christophe Dervieux and Florian Kohrt for the hints!</p>


</section>

 ]]></description>
  <category>R</category>
  <guid>https://blog.cynkra.com/posts/2021-10-07-old-texlive/</guid>
  <pubDate>Thu, 07 Oct 2021 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2021-10-07-old-texlive/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>tsbox 0.3.1: extended functionality</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-09-18-tsbox-03/</link>
  <description><![CDATA[ 




<p><a href="https://www.tsbox.help/">The tsbox package</a> provides a set of tools that are agnostic towards existing time series classes. The tools also allow you to handle time series as plain data frames, thus making it easy to deal with time series in a dplyr or data.table workflow.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2021-09-18-tsbox-03/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by James Sutton
</figcaption>
</figure>
<p>Version 0.3.1 is now on CRAN and provides several bugfixes and extensions (see <a href="https://cran.r-project.org/web/packages/tsbox/news/news.html">here</a> for the full change log). A detailed overview of the package functionality is given in the <a href="https://www.tsbox.help/">documentation page</a> (or in an <a href="https://www.cynkra.com/blog/2018-05-15-tsbox/">older blog-post</a>).</p>
<section id="new-and-extended-functionality" class="level2">
<h2 class="anchored" data-anchor-id="new-and-extended-functionality">New and extended functionality</h2>
<ul>
<li><p><a href="https://www.tsbox.help/reference/ts_frequency.html"><code>ts_frequency()</code></a>: changes the frequency of a time series. It is now possible to aggregate any time series to years, quarters, months, weeks, days, hours, minutes or seconds. For low- to high-frequency conversion, the <a href="https://cran.r-project.org/web/packages/tempdisagg/index.html">tempdisagg</a> package can now <a href="https://cran.r-project.org/web/packages/tempdisagg/vignettes/hf-disagg.html">convert low frequency to high frequency</a> and has support for ts-boxable objects. E.g.:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tsbox)</span>
<span id="cb1-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tbl</span>(EuStockMarkets)</span>
<span id="cb1-3">x</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 7,440 × 3</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id    time                 value</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;dttm&gt;               &lt;dbl&gt;</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 DAX   1991-07-01 03:18:27  1629.</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 DAX   1991-07-02 13:01:32  1614.</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 DAX   1991-07-03 22:44:38  1607.</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 DAX   1991-07-05 08:27:43  1621.</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 DAX   1991-07-06 18:10:48  1618.</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 7,435 more rows</span></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_frequency</span>(x, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"week"</span>)</span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 1,492 × 3</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   id    time        value</span></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;chr&gt; &lt;date&gt;      &lt;dbl&gt;</span></span>
<span id="cb1-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 DAX   1991-06-30  1618.</span></span>
<span id="cb1-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 DAX   1991-07-07  1633.</span></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 DAX   1991-07-14  1632.</span></span>
<span id="cb1-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 DAX   1991-07-21  1620.</span></span>
<span id="cb1-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 DAX   1991-07-28  1616.</span></span>
<span id="cb1-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 1,487 more rows</span></span></code></pre></div></li>
<li><p><a href="https://www.tsbox.help/reference/ts_index.html"><code>ts_index()</code></a>: returns an indexed series, with a value of 1 at the base period. This base period can now be specified more flexibly. E.g., the average of a year can defined as 1 (which is a common use case).</p></li>
<li><p><a href="https://www.tsbox.help/reference/ts_examples.html"><code>ts_na_interpolation()</code></a>: A new function that wraps <code>imputeTS::na_interpolation()</code> from the <a href="https://steffenmoritz.github.io/imputeTS/">imputeTS</a> package and allows the imputation of missing values for any time series object.</p></li>
<li><p><a href="https://www.tsbox.help/reference/ts_first_of_period.html"><code>ts_first_of_period()</code></a>: A new function that replaces the date or time value by the first of the period. This is useful because tsbox usually relies on timestamps being the first of a period. The following monthly series has an offset of 14 days. <code>ts_first_of_period()</code> changes the timestamp to the first date of each month:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_lag</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tbl</span>(mdeaths), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"14 days"</span>)</span>
<span id="cb2-2">x</span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 72 × 2</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   time       value</span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;date&gt;     &lt;dbl&gt;</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 1974-01-15  2134</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 1974-02-15  1863</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 1974-03-15  1877</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 1974-04-15  1877</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 1974-05-15  1492</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 67 more rows</span></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_first_of_period</span>(x)</span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # A tibble: 72 × 2</span></span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   time       value</span></span>
<span id="cb2-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;   &lt;date&gt;     &lt;dbl&gt;</span></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 1 1974-01-01  2134</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 2 1974-02-01  1863</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 3 1974-03-01  1877</span></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 4 1974-04-01  1877</span></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; 5 1974-05-01  1492</span></span>
<span id="cb2-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; # … with 67 more rows</span></span></code></pre></div></li>
</ul>
</section>
<section id="convert-everything-to-everything" class="level2">
<h2 class="anchored" data-anchor-id="convert-everything-to-everything">Convert everything to everything</h2>
<p><a href="https://www.tsbox.help/">tsbox</a> is built around a set of converters, which convert time series stored as <a href="https://rdrr.io/r/stats/ts.html">ts</a>, <a href="https://cran.r-project.org/package=xts">xts</a>, <a href="https://rdrr.io/r/base/data.frame.html">data.frame</a>, <a href="https://cran.r-project.org/package=data.table">data.table</a>, <a href="http://tibble.tidyverse.org/">tibble</a>, <a href="https://cran.r-project.org/package=zoo">zoo</a>, <a href="https://tsibble.tidyverts.org/">tsibble</a>, <a href="https://cran.r-project.org/package=tibbletime">tibbletime</a>, <a href="https://cran.r-project.org/web/packages/tis/index.html">tis</a>, <a href="https://cran.r-project.org/package=tseries">irts</a> or <a href="https://cran.r-project.org/package=timeSeries">timeSeries</a> to each other:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tsbox)</span>
<span id="cb3-2">x.ts <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_c</span>(fdeaths, mdeaths)</span>
<span id="cb3-3">x.xts <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_xts</span>(x.ts)</span>
<span id="cb3-4">x.df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_df</span>(x.xts)</span>
<span id="cb3-5">x.dt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_dt</span>(x.df)</span>
<span id="cb3-6">x.tbl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tbl</span>(x.dt)</span>
<span id="cb3-7">x.zoo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_zoo</span>(x.tbl)</span>
<span id="cb3-8">x.tsibble <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tsibble</span>(x.zoo)</span>
<span id="cb3-9">x.tibbletime <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tibbletime</span>(x.tsibble)</span>
<span id="cb3-10">x.timeSeries <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_timeSeries</span>(x.tibbletime)</span>
<span id="cb3-11">x.irts <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_irts</span>(x.tibbletime)</span>
<span id="cb3-12">x.tis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tis</span>(x.irts)</span>
<span id="cb3-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all.equal</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_ts</span>(x.tis), x.ts)</span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; [1] TRUE</span></span></code></pre></div>
</section>
<section id="use-same-functions-for-time-series-classes" class="level2">
<h2 class="anchored" data-anchor-id="use-same-functions-for-time-series-classes">Use same functions for time series classes</h2>
<p>Because this works reliably, it is easy to define a toolkit that works for all classes. So, whether we want to <strong>smooth</strong>, <strong>scale</strong>, <strong>differentiate</strong>, <strong>chain</strong>, <strong>forecast</strong>, <strong>regularize</strong>, <strong>impute</strong> or <strong>seasonally adjust</strong> a time series, we can use the same commands to whatever time series class at hand:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_trend</span>(x.ts)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># estimate a trend line</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_pc</span>(x.xts)     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calculate percentage change rates (period on period)</span></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_pcy</span>(x.df)     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calculate percentage change rates (year on year)</span></span>
<span id="cb4-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_lag</span>(x.dt)     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lagged series</span></span></code></pre></div>
<p><a href="https://www.tsbox.help/reference/index.html">There are many more</a>. Because they all start with <code>ts_</code>, you can use auto-complete to see what’s around. Most conveniently, there is a time series plot function that works for all classes and frequencies:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_plot</span>(</span>
<span id="cb5-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Airline Passengers</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> AirPassengers,</span>
<span id="cb5-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Lynx trappings</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_tis</span>(lynx),</span>
<span id="cb5-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Deaths from Lung Diseases</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_xts</span>(fdeaths),</span>
<span id="cb5-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Airlines, trappings, and deaths"</span>,</span>
<span id="cb5-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Monthly passengers, annual trappings, monthly deaths"</span></span>
<span id="cb5-7">)</span></code></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.cynkra.com/posts/2021-09-18-tsbox-03/plot.png" title="Illustration" class="img-fluid figure-img"></p>
<figcaption>time series plot</figcaption>
</figure>
</div>


</section>

 ]]></description>
  <category>R</category>
  <category>time-series</category>
  <guid>https://blog.cynkra.com/posts/2021-09-18-tsbox-03/</guid>
  <pubDate>Sat, 18 Sep 2021 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2021-09-18-tsbox-03/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Celebrating one-year anniversary as RStudio Full Service Certified Partner</title>
  <dc:creator>Cosima Meyer, Patrick Schratz</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-07-09-certified-partner-anniversary/</link>
  <description><![CDATA[ 




<p>cynkra celebrates its first anniversary as an <a href="https://rstudio.com/certified-partners/">RStudio Full Service Certified Partner</a>! Every day, we help our clients set up professional IT infrastructures using RStudio products and license compositions suited to their individual needs. In the context of our anniversary, we would like to discuss the RStudio suite of products and our approach of combining RStudio’s products with our Managed Workbench Solution to make RStudio Professional products even more powerful.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2021-07-09-certified-partner-anniversary/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Adi Goldstein
</figcaption>
</figure>
<section id="philosophy-and-lineup" class="level3">
<h3 class="anchored" data-anchor-id="philosophy-and-lineup">Philosophy and lineup</h3>
<p>We believe that good tools combined with smart settings can make data science teams enjoy their work more, resulting in higher productivity levels. We, therefore, work to provide our clients with customized RStudio product solutions to create a data science environment that would support their daily work most efficiently and effectively.</p>
<p>Our <a href="https://cynkra.com/about">team members</a>, who have all been using practically all RStudio products daily, are testimony to our claims.</p>
</section>
<section id="finding-the-right-setup" class="level3">
<h3 class="anchored" data-anchor-id="finding-the-right-setup">Finding the right setup</h3>
<p>Besides finding the optimal combination of different software provided by RStudio, we customize the RStudio products to include smart defaults and individualized configurations such as local package repositories or preconfigured database setups. We use a full-fledged configured and centralized managed RStudio Workbench installation that simplifies administrative tasks for system admins and users. In addition, we ensure constant product and security updates, taking away all the maintenance burden and leaving users with a happy place for their data science tasks. We also train the team on how to work with RStudio Products.</p>
<p>The transition from the local RStudio Desktop usage is seamless since RStudio Workbench and friends provide all features of the free version.</p>
<p>There is no lock-in; everything that works on the free RStudio Desktop version will also work on RStudio Workbench and the other way round – even if you decide to go back to the free version at some point. Of course, once clients have experienced the added benefits of RStudio Workbench, they rarely want to go back.</p>
<p>Our lineup consists of the following RStudio products: <a href="https://www.rstudio.com/products/workbench/">RStudio Workbench (previously RStudio Server Pro)</a>, <a href="https://rstudio.com/products/connect/">RStudio Connect</a>, <a href="https://www.rstudio.com/products/package-manager/">RStudio Package Manager</a>, <a href="https://www.rstudio.com/products/shiny/shiny-server/">Shiny Server</a>, and <a href="https://rstudio.com/products/team/">RStudio Team</a>.</p>
</section>
<section id="smart-defaults-and-optimized-configurations" class="level3">
<h3 class="anchored" data-anchor-id="smart-defaults-and-optimized-configurations">Smart defaults and optimized configurations</h3>
<p>RStudio Workbench, RStudio Connect, and RStudio Package Manager can work together very well if configured correctly. We configure the settings as needed to enable users to experience the full power of the RStudio product suite. Our product saves you from having to go through the entire <a href="https://docs.rstudio.com/ide/server-pro/latest/index.html">admin guide</a> where there is always the potential to miss something important. The power (and complexity) of RStudio products resides in their configuration. We have experience with almost all possible configuration scenarios, including configuring RStudio products in highly secured enterprise environments.</p>
</section>
<section id="dockerized-environment" class="level3">
<h3 class="anchored" data-anchor-id="dockerized-environment">Dockerized environment</h3>
<p>Our products come in a <em>containerized environment</em>, making them agnostic to any underlying operating system. Your users will have access to an Ubuntu LTS system (20.04 at the time of writing) which provides stable support for linking R packages against required system libraries.</p>
<p>Using a containerized environment also simplifies update tasks (for the client and us) due to the independence of the underlying operating system. All of this also holds if the underlying operating system of your company is subject to change in the future – and if this happens, the RStudio environment will stay the same.</p>
<p>Another common pain point for local RStudio users is the use of LaTeX and pandoc when compiling PDF reports. By relying on the stable Ubuntu LTS environment as the base layer we can provide a stable LaTeX/pandoc environment that takes away almost all troubles for users in this area.</p>
</section>
<section id="performance" class="level3">
<h3 class="anchored" data-anchor-id="performance">Performance</h3>
<p>Centralized, server-based installations can be very efficient both in speed and battery consumption. It applies to all RStudio products but in particular to RStudio Workbench and RStudio Package Manager.</p>
<p>The following GIF might give you an idea of speed improvement (we did the test using a relatively new MacBook Pro 2020). When we deployed the cloud-based RStudio Workbench on the MacBook, the machine performed much faster. The difference in speed will be even more noticeable in an older machine.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.cynkra.com/posts/2021-07-09-certified-partner-anniversary/rstudio-desktop-vs-rsw.gif" class="img-fluid figure-img"></p>
<figcaption>RStudio Desktop vs.&nbsp;RStudio Workbench speed comparison</figcaption>
</figure>
</div>
<p>Battery usage becomes critical when working from home or on the go. Using RStudio Workbench instead of RStudio Desktop will save battery life because all computation is done on a remote machine. RStudio Desktop, in particular, is quite energy-hungry; we have experienced battery life improvements of 30% and more in our daily work when using the cloud-based RStudio Workbench instead of RStudio Desktop.</p>
</section>
<section id="custom-real-world-examples" class="level3">
<h3 class="anchored" data-anchor-id="custom-real-world-examples">Custom real-world examples</h3>
<p>One of the key strengths of our offering is individualization. To provide more details on this, we put together some configurations we implemented recently to give an idea of what individualized setups can look like in practice.</p>
<table class="table">
<thead>
<tr>
<th scope="col">
</th>
<th scope="col" style="text-align: center;">
Setup&nbsp;1
</th>
<th scope="col" style="text-align: center;">
Setup&nbsp;2
</th>
<th scope="col" style="text-align: center;">
Setup&nbsp;3
</th>
<th scope="col" style="text-align: center;">
Setup&nbsp;4
</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
RStudio Workbench
</th>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
RStudio Connect
</th>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
RStudio Package Manager
</th>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
RStudio Server Open Source
</th>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
Shiny Server
</th>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
✓
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
User Provisioning
</th>
<td style="text-align: center; vertical-align: middle;">
Active Directory
</td>
<td style="text-align: center; vertical-align: middle;">
LDAP
</td>
<td style="text-align: center; vertical-align: middle;">
Local Users
</td>
<td style="text-align: center; vertical-align: middle;">
Active Directory
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
SSO Type
</th>
<td style="text-align: center; vertical-align: middle;">
PAM
</td>
<td style="text-align: center; vertical-align: middle;">
OIDC
</td>
<td style="text-align: center; vertical-align: middle;">
</td>
<td style="text-align: center; vertical-align: middle;">
SAML
</td>
</tr>
<tr>
<th scope="row" style="text-align: left; vertical-align: middle;">
DB Drivers
</th>
<td style="text-align: center; vertical-align: middle;">
RStudio Professional Drivers
</td>
<td style="text-align: center; vertical-align: middle;">
MS SQL
</td>
<td style="text-align: center; vertical-align: middle;">
Oracle
</td>
<td style="text-align: center; vertical-align: middle;">
IBM DB2
</td>
</tr>
</tbody>
</table>
<p>Acronym dictionary for Table:</p>
<ul>
<li>SSO: Single-Sign-On</li>
<li>OIDC: OpenID Connect</li>
<li>PAM: Pluggable Authentication Modules</li>
</ul>
<p>Often, in larger organizations, the system that is already in use determines the authentication settings. We have experience configuring RStudio Products with various authentication solutions.</p>
</section>
<section id="standalone-licenses-and-r-training" class="level3">
<h3 class="anchored" data-anchor-id="standalone-licenses-and-r-training">Standalone licenses and R training</h3>
<p>Besides the complete package that comes with our Managed Workbench offering, we are happy to provide our customers with standalone RStudio licenses. The advantage for Swiss-based customers is that they get a bill in Swiss Francs including VAT, and avoid currency conversion issues with USD when ordering from RStudio directly.</p>
<p>In addition to setting up R-related infrastructure, we also provide R training of any kind so that your team can make full use of the available software stack. You can visit our <a href="https://cynkra.com/consulting">consulting offering on our website</a> for more information.</p>


</section>

 ]]></description>
  <category>certified partner</category>
  <category>Posit</category>
  <category>Docker</category>
  <guid>https://blog.cynkra.com/posts/2021-07-09-certified-partner-anniversary/</guid>
  <pubDate>Fri, 09 Jul 2021 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2021-07-09-certified-partner-anniversary/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Deprecating a pkgdown site served via GitHub Pages</title>
  <dc:creator>Patrick Schratz, Kirill Müller</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/</link>
  <description><![CDATA[ 




<p>Websites for R packages built with <a href="https://pkgdown.r-lib.org/">{pkgdown}</a> have become a de-facto standard over the last few years. Many R packages build their site during Continuous Integration (CI) runs, pushing the assets to the special <code>gh-pages</code> branch (even though now <a href="https://github.blog/changelog/2020-09-03-build-and-deploy-github-pages-from-any-branch/">any branch can be used to deploy a website</a>).</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Paweł Czerwiński
</figcaption>
</figure>
<p><br></p>
<p>Sometimes, repositories are transferred to a new user/organization or the package is renamed. While GitHub takes care of redirecting repository URLs, the pkgdown URLs (<code>https://&lt;username&gt;.github.io/&lt;rpackage&gt;</code>) are not redirected. Since some users might have bookmarked specific URLs or the URLs appear in their browsing history, it would be great if these links do not return a 404.</p>
<p>This blog post proposes several ways to handle this gracefully:</p>
<ul>
<li>Redirection</li>
<li>Deprecation with CSS</li>
<li>Deprecation via bulk edit</li>
</ul>
<p>All options hinge on the observation that users and organizations can create a <a href="https://docs.github.com/en/github/working-with-github-pages/about-github-pages#types-of-github-pages-sites">user or organization site</a> that will be the source for <code>https://&lt;username&gt;.github.io/&lt;package&gt;</code> after the renaming. The user site will also serve <code>robots.txt</code> that advises crawlers to avoid deprecated contents.</p>
<section id="user-or-organization-site" class="level2">
<h2 class="anchored" data-anchor-id="user-or-organization-site">User or organization site</h2>
<p>In GitHub, users can create a <em>user repository</em> <code>&lt;username&gt;/&lt;username&gt;.github.io</code>. This repo will be served automatically as a web page on <code>https://&lt;username&gt;.github.io/</code> . In this repo, a directory can be created which corresponds to the respective GitHub Pages site of the original repo. Example: The <code>rpackage/</code> directory in the <code>&lt;username&gt;/&lt;username&gt;.github.io</code> repository corresponds to <code>https://&lt;username&gt;.github.io/rpackage</code>. If both <code>&lt;username&gt;/&lt;rpackage&gt;</code> and <code>&lt;username&gt;/&lt;username&gt;.github.io/&lt;rpackage&gt;</code> exist, the former takes precedence. This means that you can prepare everything in your user repository <code>&lt;username&gt;/&lt;username&gt;.github.io</code> and it will work immediately after you rename your package repository. The following has worked for <a href="https://krlmlr.github.io/fledge/" class="uri">https://krlmlr.github.io/fledge/</a>, which has moved to <a href="https://cynkra.github.io/fledge/" class="uri">https://cynkra.github.io/fledge/</a>:</p>
<ul>
<li>Create repository <code>&lt;username&gt;/&lt;username&gt;.github.io</code></li>
<li>In <code>&lt;username&gt;/&lt;username&gt;.github.io</code> create directory <code>&lt;rpackage&gt;</code></li>
<li>Populate the <code>&lt;rpackage&gt;</code> directory using one of the methods described below</li>
<li>Push to GitHub</li>
<li>Rename repository</li>
</ul>
<p>All of this works the same way for organizations. The <a href="https://cynkra.github.io/munch/">munch package</a> was previously located at <a href="https://cynkra.github.io/SwissCommunes/" class="uri">https://cynkra.github.io/SwissCommunes/</a> The original pages, with a warning, are defined at <a href="https://github.com/cynkra/cynkra.github.io/">cynkra/cynkra.github.io</a>.</p>
</section>
<section id="redirection" class="level2">
<h2 class="anchored" data-anchor-id="redirection">Redirection</h2>
<p>Basic idea: set up an HTML redirect from <code>https://&lt;username-old&gt;.github.io/&lt;package&gt;</code> to <code>https://&lt;username-new&gt;.github.io/&lt;package&gt;</code>.</p>
<p>To achieve this, create an <code>index.html</code> in <code>&lt;username&gt;/&lt;username&gt;.github.io/rpackage</code> with the following contents:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb1-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">meta</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> http-equiv</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"refresh"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> content</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0; url=</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">&lt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">url to redirect to&gt;"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;"> </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/&gt;</span></span></code></pre></div>
<p>However, some redirection practices like this one are considered bad practice (“Use of meta refresh is discouraged by the World Wide Web Consortium (W3C).”)[^1]. Also, users might find it sketchy to see some redirection happening shortly after they visited a site. Last, the redirection shown above only works for the top-level domain. Level 2 or level 3 links like <code>&lt;url&gt;/level1/level2</code> will not work and return a 404.</p>
</section>
<section id="deprecation-via-css" class="level2">
<h2 class="anchored" data-anchor-id="deprecation-via-css">Deprecation via CSS</h2>
<p>A better way to deprecate a pkgdown/GitHub Pages site is to serve a static version of the last state before the package was moved, and add information to the user that the site has moved.</p>
<p>An easy way to achieve this is to include a little CSS snippet. The following will add a colored line before the <code>page-header</code> div in the pkgdown site.</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">.page-header</span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:after</span> {</span>
<span id="cb2-2">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"You are viewing an outdated page which is not going to be updated anymore. Please go to &lt;https:/new-url.com&gt; for the latest version."</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-3">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">font-size</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">px</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-4">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">font-style</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">italic</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-5">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">color</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">#f03333</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-6">}</span></code></pre></div>
<figure class="figure">
<img alt="Screenshot: Deprecation via CSS" src="https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/css.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Deprecation information in the header via CSS
</figcaption>
</figure>
<p><br></p>
<p>Place this code in the <code>pkgdown/</code> directory of your package and it will be automatically picked up when the site is built next time:</p>
<ul>
<li>In your package, add the CSS snippet from above to <code>pkgdown/extra.css</code> (CSS name can be different) in the repository/R package which should be deprecated</li>
<li>Call <code>pkgdown::build_site()</code> one last time</li>
<li>Copy the contents of <code>docs/</code> to <code>&lt;username&gt;/&lt;username&gt;.github.io/&lt;packagename&gt;</code></li>
</ul>
<p>Unfortunately, the <code>:after</code> operator does not allow hyperlinks, so the new URL will not be clickable.</p>
</section>
<section id="deprecation-via-bulk-edit" class="level2">
<h2 class="anchored" data-anchor-id="deprecation-via-bulk-edit">Deprecation via bulk edit</h2>
<p>For the URL to be clickable, the HTML files must be edited. The <code>find</code>, <code>xargs</code> and <code>sed</code> utilities help to automate this.</p>
<p>pkgdown uses the Bootstrap framework, which has <a href="https://getbootstrap.com/docs/3.3/components/#alerts">alerts</a> that serve the purpose. They look best just before the closing <code>&lt;/header&gt;</code> element. The following command line adds an alert to each HTML page, advertising <a href="https://cynkra.github.io/munch" class="uri">https://cynkra.github.io/munch</a> as the target URL. It must be run in the <code>rpackage</code> directory of <code>&lt;username&gt;/&lt;username&gt;.github.io</code>:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"*.html"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xargs</span> sed <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s#(^.*[&lt;]/header[&gt;])#&lt;div class="alert alert-warning" role="alert"&gt;&lt;strong&gt;Warning!&lt;/strong&gt; This content has moved to &lt;a href="https://cynkra.github.io/munch"&gt;https://cynkra.github.io/munch&lt;/a&gt;.&lt;/div&gt;\n\1#'</span></span></code></pre></div>
<p>This assumes GNU <code>sed</code>. MacOS users will need to use <code>gsed</code>, or <code>-i.bak</code> instead of <code>-i</code> and deal with the leftover <code>*.bak</code> files.</p>
<figure class="figure">
<img alt="Screenshot: Deprecation via editing HTML" src="https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/bootstrap.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Deprecation information in the header via editing HTML
</figcaption>
</figure>
<p><br></p>
<p>Always advertising the new root works well enough because it is very likely that the structure of the site will eventually change after the repository rename.</p>
</section>
<section id="web-crawlers" class="level2">
<h2 class="anchored" data-anchor-id="web-crawlers">Web crawlers</h2>
<p>It is a good idea to make the deprecated contents invisible to web crawlers. Add a file <a href="https://developers.google.com/search/docs/advanced/robots/create-robots-txt"><code>robots.txt</code></a> to the root of <code>&lt;username&gt;/&lt;username&gt;.github.io</code>. The following contents forbids crawling the <a href="https://cynkra.github.io/SwissCommunes/"><code>/SwissCommunes/</code> directory</a> which contains the old snapshot with pointers to the new location:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb4-1">User-agent: *</span>
<span id="cb4-2">Disallow: /SwissCommunes/</span></code></pre></div>


</section>

 ]]></description>
  <category>R</category>
  <category>GitHub</category>
  <guid>https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/</guid>
  <pubDate>Fri, 09 Apr 2021 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2021-04-09-deprecating-pkgdown/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>gfortran support for R on macOS</title>
  <dc:creator>Patrick Schratz</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-03-16-gfortran-macos/</link>
  <description><![CDATA[ 




<p>For a long time, <code>gfortran</code> support on macOS could be achieved by installing the homebrew cask <code>gfortran</code> via <code>brew cask install gfortran</code>.</p>
<p>As of 2021, both the <code>brew cask</code> command and the cask <code>gfortran</code> are deprecated. Users who have installed this cask already, will not notice since things will continue to work as normal. Only new users who want to install <code>gfortran</code> this way, will get the message that the cask is “not available”. The cask <a href="https://github.com/Homebrew/homebrew-cask/pull/96504">was removed in December 2020</a> and merged into the <code>gcc</code> formula (which can be installed via <code>brew install gcc</code>). Now, one could go to <a href="https://github.com/fxcoudert/gfortran-for-macOS/releases" class="uri">https://github.com/fxcoudert/gfortran-for-macOS/releases</a> and manually install the respective <code>.dmg</code> file. However, this is not a long-term approach, and usually, one would like to do this via <code>brew</code>, the most popular package manager for macOS.</p>
<p>Unfortunately, this change did not result in a smooth experience for R users who want to compile packages from source that require a functional <code>gfortran</code> compiler. This requirement does not occur very often, as most users install R package binaries on macOS. These do not require a working <code>gfortran</code> installation.</p>
<p>However, in some cases, when calling <code>install.packages()</code>, a working <code>gfortran</code> installation is needed. And if <code>type = "source"</code> is used, it needs to be there.</p>
<p>The issue after the integration of <code>gfortran</code> into the <code>gcc</code> formula is that the official R binary installer for macOS expects the <code>gfortran</code> installation at <code>/usr/local/gfortran</code>. This was fulfilled by the old <code>gfortran</code> cask but is not by the new <code>gcc</code> integration. Hence, trying to install the “cluster” package via <code>install.packages("cluster", type = "source")</code> will fail and <code>gfortran</code> will not be found:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> installing <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>source<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> package ‘cluster’ ...</span>
<span id="cb1-2"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> package ‘cluster’ successfully unpacked and MD5 sums checked</span>
<span id="cb1-3"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> using staged installation</span>
<span id="cb1-4"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> libs</span>
<span id="cb1-5">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c clara.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o clara.o</span>
<span id="cb1-6">gfortran <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>mmacosx<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>version<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>min<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">10.13</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fno<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>optimize<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>sibling<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>calls  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c daisy.f <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o daisy.o</span>
<span id="cb1-7">make<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> gfortran<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> No such file or directory</span>
<span id="cb1-8">make<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">***</span> [<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Library<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Frameworks<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>R.framework<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Resources<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>etc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Makeconf<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">196</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> daisy.o] Error <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">127</span></span>
<span id="cb1-9">ERROR<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> compilation failed <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> package ‘cluster’</span></code></pre></div>
<p>There was a <a href="https://github.com/Homebrew/homebrew-cask/issues/96135">discussion</a> about these changes in the homebrew PR, but the comments that highlighted potential issues seem to have gone unnoticed. Also, some workarounds posted in the thread do not work.</p>
<section id="so-how-does-one-now-install-gfortran-on-macos-these-days" class="level2">
<h2 class="anchored" data-anchor-id="so-how-does-one-now-install-gfortran-on-macos-these-days">So how does one now install <code>gfortran</code> on macOS these days?</h2>
<p>It is likely that one will not need the workaround presented below in the future since it will probably be fixed in the R installer at some point (hopefully). In the meantime, the following helps:</p>
<ol type="1">
<li><p>Create a file <code>~/.R/Makevars</code> (if it does not exist yet)</p></li>
<li><p>Add the following to <code>~/.R/Makevars</code></p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">FC</span>      = usr/local/opt/gcc/bin/gfortran</span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">F77</span>     = /usr/local/opt/gcc/bin/gfortran</span>
<span id="cb2-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">FLIBS</span>   = <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-L</span>/usr/local/opt/gcc/lib</span></code></pre></div></li>
<li><p>Restart R</p></li>
<li><p>Test the changes by calling <code>install.packages("cluster", type = "source")</code></p></li>
</ol>
<p>The output should look like this</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> installing <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>source<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> package ‘cluster’ ...</span>
<span id="cb3-2"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> package ‘cluster’ successfully unpacked and MD5 sums checked</span>
<span id="cb3-3"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> using staged installation</span>
<span id="cb3-4"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> libs</span>
<span id="cb3-5">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c clara.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o clara.o</span>
<span id="cb3-6"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>opt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>gcc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>bin<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>gfortran <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fno<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>optimize<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>sibling<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>calls  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c daisy.f <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o daisy.o</span>
<span id="cb3-7"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>opt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>gcc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>bin<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>gfortran <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fno<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>optimize<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>sibling<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>calls  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c dysta.f <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o dysta.o</span>
<span id="cb3-8">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c fanny.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o fanny.o</span>
<span id="cb3-9">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c init.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o init.o</span>
<span id="cb3-10">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c mona.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o mona.o</span>
<span id="cb3-11">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c pam.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o pam.o</span>
<span id="cb3-12">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c sildist.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o sildist.o</span>
<span id="cb3-13">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c spannel.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o spannel.o</span>
<span id="cb3-14">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/Library/Frameworks/R.framework/Resources/include"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>DNDEBUG   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>I<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>include   <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>fPIC  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wall <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>g <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>O2  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>c twins.c <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o twins.o</span>
<span id="cb3-15">clang <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>dynamiclib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wl,<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>headerpad_max_install_names <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>undefined dynamic_lookup <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>single_module <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>multiply_defined suppress <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>L<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Library<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Frameworks<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>R.framework<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Resources<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>lib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>L<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>lib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>o cluster.so clara.o daisy.o dysta.o fanny.o init.o mona.o pam.o sildist.o spannel.o twins.o <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>L<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>usr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>local<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>opt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>gcc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>lib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>F<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Library<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Frameworks<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>R.framework<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>.. <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>framework R <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wl,<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>framework <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>Wl,CoreFoundation</span>
<span id="cb3-16">ld<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> warning<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> object <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file</span> (daisy.o) was built <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> newer macOS <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">version</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11.2</span>) than being <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">linked</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11.0</span>)</span>
<span id="cb3-17">ld<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> warning<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> object <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file</span> (dysta.o) was built <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> newer macOS <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">version</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11.2</span>) than being <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">linked</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11.0</span>)</span>
<span id="cb3-18">installing to <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Users<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>pjs<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>Library<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>R<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.0</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>library<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">00</span>LOCK<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>cluster<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">00</span>new<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>cluster<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>libs</span>
<span id="cb3-19"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> R</span>
<span id="cb3-20"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> data</span>
<span id="cb3-21"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> moving datasets to lazyload DB</span>
<span id="cb3-22"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> inst</span>
<span id="cb3-23"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> byte<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>compile and prepare package <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> lazy loading</span>
<span id="cb3-24"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> help</span>
<span id="cb3-25"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span> installing help indices</span>
<span id="cb3-26"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> building package indices</span>
<span id="cb3-27"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> testing <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> installed package can be loaded from temporary location</span>
<span id="cb3-28"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> checking absolute paths <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> shared objects and dynamic libraries</span>
<span id="cb3-29"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> testing <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> installed package can be loaded from final location</span>
<span id="cb3-30"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> testing <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> installed package keeps a record of temporary installation path</span>
<span id="cb3-31"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">DONE</span> (cluster)</span></code></pre></div>
<p><strong>Caution</strong>: After using this approach for a few days, I have seen issues with certain packages (e.g.&nbsp;<code>hsdar</code>). It is unclear if the issues trace back to the packages or the new way of using <code>gfortran</code>. You might want to re-think using this proposed approach and eventually manually install the linked standalone <code>gfortran</code> binary shown earlier in this post.</p>
</section>
<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<ul>
<li>I am not sure about the <code>ld: warning: object file (dysta.o) was built for newer macOS version (11.2) than being linked (11.0)</code> warning, but it does not seem to have a practical impact.</li>
<li>This approach was tested with R 4.0.4, macOS 11.2.3 in March 2021.</li>
<li>If you still have the old <code>gfortran</code> cask installed, you may want to switch to the new approach as the cask is no longer being updated. Hence, you will run a very outdated <code>gfortran</code> at some point without noticing. You can remove the old cask with <code>brew remove – cask gfortran</code>.</li>
</ul>


</section>

 ]]></description>
  <category>R</category>
  <category>macOS</category>
  <guid>https://blog.cynkra.com/posts/2021-03-16-gfortran-macos/</guid>
  <pubDate>Tue, 16 Mar 2021 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Seasonal Adjustment of Multiple Series</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2021-03-09-seasonal-1.8/</link>
  <description><![CDATA[ <p>seasonal is an easy-to-use and full-featured R-interface to X-13ARIMA-SEATS, the seasonal adjustment software developed by the United States Census Bureau. The latest CRAN version of seasonal makes it much easier to adjust multiple time series.</p>
<figure class="figure"><img alt="Illustration" src="https://blog.cynkra.com/posts/2021-03-09-seasonal-1.8/banner.jpg" style=" width: 100%; height: auto" class="figure-img"><figcaption>
Photo by Meriç Dağlı
</figcaption></figure><p><br></p>
<p><a href="http://www.seasonal.website">seasonal</a> depends on the <a href="https://CRAN.R-project.org/package=x13binary">x13binary</a> package to access pre-built binaries of X-13ARIMA-SEATS on all platforms and does not require any manual installation. To install both packages:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"seasonal"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p><code>seas</code> is the core function of the <a href="https://cran.r-project.org/package=seasonal">seasonal</a> package. By default, <code>seas</code> calls the automatic procedures of X-13ARIMA-SEATS to perform a seasonal adjustment that works well in most circumstances:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seas</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">AirPassengers</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<p>For a more detailed introduction, read our <a href="https://doi.org/10.18637/jss.v087.i11">article in the <em>Journal of Statistical Software</em></a>.</p>
<section id="multiple-series-adjusmtent" class="level3"><h3 class="anchored" data-anchor-id="multiple-series-adjusmtent">Multiple Series Adjusmtent</h3>
<p>In the latest <a href="https://cran.r-project.org/package=seasonal">CRAN version 1.8</a>, it is now possible to seasonally adjust multiple series in a single call to <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code>. This is done by using the built-in batch mode of X-13. It removes the need for loops or <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> in such cases and finally brings one missing feature of X-13 to seasonal – the <em>composite</em> spec.</p>
<p>Multiple adjustments can be performed by supplying multiple time series as an <code>"mts"</code> object:</p>
<div class="cell">
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;"><a href="http://www.seasonal.website">seasonal</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, x11 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/final.html">final</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">m</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          fdeaths  mdeaths
Jan 1974 614.1235 1598.740
Feb 1974 542.3500 1492.127
Mar 1974 613.5029 1443.238
Apr 1974 591.5725 1694.643
May 1974 607.4970 1696.021
Jun 1974 543.8415 1558.886
Jul 1974 597.0745 1663.176
Aug 1974 587.0533 1623.498
Sep 1974 588.2693 1741.394
Oct 1974 735.6666 1735.516
Nov 1974 602.0218 1665.590
Dec 1974 496.3985 1394.097
Jan 1975 564.0055 1560.605
Feb 1975 591.0320 1708.763
Mar 1975 585.7739 1652.994
Apr 1975 581.5294 1671.265
May 1975 537.8055 1588.605
Jun 1975 584.3284 1600.979
Jul 1975 566.4872 1541.099
Aug 1975 617.1197 1623.445
Sep 1975 516.4781 1521.497
Oct 1975 559.0481 1577.200
Nov 1975 561.6315 1602.659
Dec 1975 580.9778 1569.692
Jan 1976 519.8106 1477.855
Feb 1976 882.3725 2180.616
Mar 1976 674.5057 1744.114
Apr 1976 467.4502 1366.628
May 1976 509.7854 1344.809
Jun 1976 553.5233 1434.662
Jul 1976 503.2795 1447.952
Aug 1976 494.2373 1383.932
Sep 1976 529.1840 1453.496
Oct 1976 570.4128 1435.912
Nov 1976 590.4285 1540.551
Dec 1976 587.0971 1572.631
Jan 1977 583.2427 1607.153
Feb 1977 498.9514 1287.403
Mar 1977 500.4632 1306.324
Apr 1977 569.2076 1685.581
May 1977 565.6470 1405.231
Jun 1977 509.3196 1432.968
Jul 1977 548.4062 1414.216
Aug 1977 523.6985 1444.945
Sep 1977 563.3014 1402.720
Oct 1977 495.6653 1427.458
Nov 1977 453.9859 1307.828
Dec 1977 502.3045 1268.618
Jan 1978 535.2658 1415.724
Feb 1978 633.7605 1790.002
Mar 1978 559.2936 1469.883
Apr 1978 485.5062 1343.715
May 1978 590.4080 1509.166
Jun 1978 574.4467 1464.288
Jul 1978 571.2263 1428.398
Aug 1978 542.3579 1424.622
Sep 1978 551.2099 1422.428
Oct 1978 557.6905 1399.404
Nov 1978 479.8979 1199.762
Dec 1978 550.4253 1397.023
Jan 1979 548.9834 1557.853
Feb 1979 576.9922 1425.717
Mar 1979 549.3468 1393.788
Apr 1979 546.4590 1449.784
May 1979 525.9881 1359.843
Jun 1979 550.2481 1330.113
Jul 1979 533.7558 1373.156
Aug 1979 566.6884 1381.653
Sep 1979 552.6500 1377.175
Oct 1979 533.9571 1337.640
Nov 1979 557.9707 1414.101
Dec 1979 475.5049 1038.506</code></pre>
</div>
</div>
<p>This will perform two seasonal adjustments, one for <code>fdeaths</code> and one for <code>mdeaths</code>. X-13 spec-argument combinations can be applied in the usual way, such as <code>x11 = ""</code>. Note that if entered that way, they will apply to both series. The <a href="https://cran.r-project.org/web/packages/seasonal/vignettes/multiple.html">vignette on multiple adjustments</a> describes how to specify options for individual series.</p>
</section><section id="backend" class="level3"><h3 class="anchored" data-anchor-id="backend">Backend</h3>
<p>X-13 ships with a batch mode that allows multiple adjustments in a single call to X-13. This is now the default in seasonal (<code>multimode = "x13"</code>). Alternatively, X-13 can be called for each series (<code>multimode = "R"</code>). The results should be usually the same, but switching to <code>multimode = "R"</code> may be useful for debugging:</p>
<div class="cell">
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, multimode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x13"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$fdeaths

Call:
seas(x = cbind(fdeaths, mdeaths), multimode = "x13")

Coefficients:
      Constant      AO1976.Feb  MA-Seasonal-12  
      -0.01578         0.43345         0.63119  


$mdeaths

Call:
seas(x = cbind(fdeaths, mdeaths), multimode = "x13")

Coefficients:
       AO1976.Feb         LS1976.Apr         AO1977.Apr         AO1978.Feb  
           0.3319            -0.1330             0.1957             0.2305  
       AO1979.Dec  MA-Nonseasonal-01     MA-Seasonal-12  
          -0.3149            -0.3854             0.6120  


$call
seas(x = cbind(fdeaths, mdeaths), multimode = "x13")

attr(,"class")
[1] "seas_multi" "list"      </code></pre>
</div>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, multimode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$fdeaths

Call:
seas(x = cbind(fdeaths, mdeaths), multimode = "R")

Coefficients:
      Constant      AO1976.Feb  MA-Seasonal-12  
      -0.01578         0.43345         0.63119  


$mdeaths

Call:
seas(x = cbind(fdeaths, mdeaths), multimode = "R")

Coefficients:
       AO1976.Feb         LS1976.Apr         AO1977.Apr         AO1978.Feb  
           0.3319            -0.1330             0.1957             0.2305  
       AO1979.Dec  MA-Nonseasonal-01     MA-Seasonal-12  
          -0.3149            -0.3854             0.6120  


$call
seas(x = cbind(fdeaths, mdeaths), multimode = "R")

attr(,"class")
[1] "seas_multi" "list"      </code></pre>
</div>
</div>
<p>In general, <code>multimode = "x13"</code> is faster. The following comparison on a MacBook Pro shows a modest speed gain, but bigger differences have been observed on other systems:</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">many</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">many</span>, multimode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x13"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   user  system elapsed</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  9.415   0.653  10.079</span></span>
<span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">many</span>, multimode <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   user  system elapsed</span></span>
<span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 11.130   1.039  12.324</span></span></code></pre></div>
</section><section id="composite-spec" class="level3"><h3 class="anchored" data-anchor-id="composite-spec">composite spec</h3>
<p>Support for the X-13 batch mode makes it finally possible to use the <em>composite</em> spec – the one feature of X-13 that was missing in seasonal. Sometimes, one has to decide whether seasonal adjustment should be performed on a granular level or on an aggregated level. The <em>composite</em> spec helps you to analyze the problem and to compare the direct and the indirect adjustments.</p>
<p>The <code>composite</code> argument is a list with an X-13 specification that is applied on the aggregated series. Specification works identically for other series in <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code>, including the application of the defaults. If you provide an empty list, the usual defaults of <code><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas()</a></code> are used. A minimal composite call looks like this:</p>
<div class="cell">
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span></span>
<span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">mdeaths</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">fdeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  composite <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span>,</span>
<span>  series.comptype <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"add"</span></span>
<span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$mdeaths

Call:
seas(x = cbind(mdeaths, fdeaths), composite = list(), series.comptype = "add")

Coefficients:
       AO1976.Feb         LS1976.Apr         AO1977.Apr         AO1978.Feb  
           0.3319            -0.1330             0.1957             0.2305  
       AO1979.Dec  MA-Nonseasonal-01     MA-Seasonal-12  
          -0.3149            -0.3854             0.6120  


$fdeaths

Call:
seas(x = cbind(mdeaths, fdeaths), composite = list(), series.comptype = "add")

Coefficients:
      Constant      AO1976.Feb  MA-Seasonal-12  
      -0.01578         0.43345         0.63119  


$composite

Call:
seas(x = cbind(mdeaths, fdeaths), composite = list(), series.comptype = "add")

Coefficients:
         Constant         AO1976.Feb  MA-Nonseasonal-01     MA-Seasonal-12  
         -0.03133            0.31247           -0.43509            0.99937  


$call
seas(x = cbind(mdeaths, fdeaths), composite = list(), series.comptype = "add")

attr(,"class")
[1] "seas_multi" "list"      </code></pre>
</div>
</div>
<p>You can verify that the composite refers to the total of <code>mdeaths</code> and <code>fdeaths</code> by running:</p>
<div class="cell">
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"><a href="https://rdrr.io/pkg/seasonal/man/seas.html">seas</a></span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">(</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ldeaths</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
seas(x = ldeaths)

Coefficients:
         Constant         AO1976.Feb  MA-Nonseasonal-01     MA-Seasonal-12  
         -0.03133            0.31247           -0.43509            0.99937  </code></pre>
</div>
</div>
<p>where <code>ldeaths</code> is the sum of <code>mdeaths</code> and <code>fdeaths</code>.</p>
</section><section id="acknowledgement" class="level3"><h3 class="anchored" data-anchor-id="acknowledgement">Acknowledgement</h3>
<p>Many thanks to <a href="https://mtec.ethz.ch/people/person-detail.MTU3MzEx.TGlzdC8yODk2LC0yMDgyMjgwMDQ4.html">Severin Thöni</a> and <a href="https://kof.ethz.ch/das-institut/personen/person-detail.MTYxMjA1.TGlzdC81NzgsODQ4OTAwOTg=.html">Matthias Bannert</a>, for demonstrating the benefits of the X-13 batch mode. Also to the <a href="https://kof.ethz.ch">ETH KOF</a>, for partially funding this development.</p>


</section> ]]></description>
  <category>R</category>
  <category>time-series</category>
  <guid>https://blog.cynkra.com/posts/2021-03-09-seasonal-1.8/</guid>
  <pubDate>Tue, 09 Mar 2021 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2021-03-09-seasonal-1.8/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Dynamic build matrix in GitHub Actions</title>
  <dc:creator>Kirill Müller</dc:creator>
  <link>https://blog.cynkra.com/posts/2020-12-23-dynamic-gha/</link>
  <description><![CDATA[ 




<p>I wanted to try out the new <code>fromJSON()</code> that allows dynamic build matrices in GitHub Actions for quite some time now. Today was the day.</p>
<p><a href="https://github.com/features/actions">GitHub Actions</a> allows automating build and deployment processes (CI/CD), tightly integrated with GitHub. A <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix">build matrix</a> is a way to define very similar workflows that differ only by configuration parameters. Usually, a build matrix is defined directly in the <code>.yaml</code> files together with the workflows. This blog post shows how to define these build matrices dynamically so that the “source of truth” for the matrix definition is outside the <code>.yaml</code> file.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2020-12-23-dynamic-gha/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by <a href="https://unsplash.com/photos/iar-afB0QQw" target="_blank"> Markus Spiske</a>
</figcaption>
</figure>
<p>The configuration for a workflow is a YAML file that has a context and expression syntax with very few <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/context-and-expression-syntax-for-github-actions">basic functions</a>. Two very powerful functions are <code>toJSON()</code> and <code>fromJSON()</code>:</p>
<ul>
<li><code>toJSON()</code> can capture pieces of the workflow configuration as JSON and pass it to your workflow code</li>
<li><code>fromJSON()</code> allows injecting arbitrary configuration pieces created from JSON code</li>
</ul>
<p>The basic setup comprises of two jobs: one that creates the workflow definition as JSON and stores it as <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idoutputs">output</a>, and another dependent job that injects this output via <code>fromJSON()</code> into its matrix definition. A third job is defined for testing if outputs are passed correctly between jobs.</p>
<p>The <a href="https://github.blog/changelog/2020-04-15-github-actions-new-workflow-features/">original blog post</a> contains a somewhat brief description. This blog post gives a walkthrough of how I converted a static to a dynamic build matrix in the <a href="https://github.com/r-dbi/DBItest">DBItest</a> project.</p>
<section id="original-matrix" class="level2">
<h2 class="anchored" data-anchor-id="original-matrix">Original matrix</h2>
<p>In DBItest, we test the compatibility of new or updated tests with backend packages. Each backend is run in a build matrix, which is defined <a href="https://github.com/r-dbi/DBItest/blob/ccd0fb3ed5ceacd1d3347ef1cade4e450d071832/.github/workflows/backends.yaml#L30-L35">as follows</a>:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">backend</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strategy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fail-fast</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb1-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">package</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> duckdb</span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> RSQLite</span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> RMariaDB</span></span>
<span id="cb1-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> RPostgres</span></span>
<span id="cb1-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> RKazam</span></span></code></pre></div>
<p>The relevant backends are defined in the <a href="https://github.com/r-dbi/DBItest/blob/ccd0fb3ed5ceacd1d3347ef1cade4e450d071832/revdep-dev/Makefile#L5"><code>Makefile</code></a>, we want to get the list from there so that we can use a single source of truth.</p>
<p>This is a very simple build matrix, ideally suited for first experiments. The techniques shown here are applicable to build matrices of any complexity and size.</p>
</section>
<section id="derive-and-verify-json" class="level2">
<h2 class="anchored" data-anchor-id="derive-and-verify-json">Derive and verify JSON</h2>
<p>Our goal is to create the <code>package:</code> section from the above matrix in JSON format. To derive the JSON format, I use the <a href="https://www.gnu.org/software/sed/manual/sed.html"><code>sed</code> stream editor</a>, my beloved hammer that I use whenever I see a text transformation task in the shell:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'{ "package" : ['</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## { "package" : [</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/^REVDEP *:= */ { s///; p }"</span> revdep-dev/Makefile <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/ /, /g'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xargs</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> 1 echo <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/^([^,]*)(,?)$/"\1"\2/'</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## "RMariaDB",</span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## "RSQLite",</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## "RPostgres",</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## "RKazam",</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## "duckdb"</span></span>
<span id="cb2-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"]}"</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## ]}</span></span></code></pre></div>
<p>This is not pretty, but still valid JSON when put together. We can prettify with <a href="https://stedolan.github.io/jq/"><code>jq .</code></a>, later we will use <code>jq -c .</code> to condense to a single line.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">(</span></span>
<span id="cb3-2">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'{ "package" : ['</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/^REVDEP *:= */ { s///; p }"</span> revdep-dev/Makefile <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/ /, /g'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xargs</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-n</span> 1 echo <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/^([^,]*)(,?)$/"\1"\2/'</span></span>
<span id="cb3-4">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"]}"</span></span>
<span id="cb3-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">jq</span> .</span></code></pre></div>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb4-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"package"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb4-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMariaDB"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RSQLite"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RPostgres"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RKazam"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"duckdb"</span></span>
<span id="cb4-8">  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div>
<p>We verify the YAML version by piping to <code>json2yaml</code> which can be installed with <code>npm install json2yaml</code>:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb5-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">package</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb5-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMariaDB"</span></span>
<span id="cb5-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RSQLite"</span></span>
<span id="cb5-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RPostgres"</span></span>
<span id="cb5-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RKazam"</span></span>
<span id="cb5-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"duckdb"</span></span></code></pre></div>
<p>These tools are preinstalled on the workers. This avoids time-consuming installation procedures in this first job that needs to be run before the main jobs can even start.<sup>1</sup></p>
</section>
<section id="define-job" class="level2">
<h2 class="anchored" data-anchor-id="define-job">Define job</h2>
<p>Once we have derived the JSON, we’re ready to define a job that creates the matrix. This must be done in the same workflow file where the matrix is defined, ideally before the main job. The job runs on <code>ubuntu-latest</code>, and also must clone the repository. In the <code>bash</code> snippet, the <code>$matrix</code> variable contains the JSON. It is shown and pretty-printed before it is provided as output via <code>echo ::set-output ...</code>.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb6-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">outputs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ steps.set-matrix.outputs.matrix }}</span></span>
<span id="cb6-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v2</span></span>
<span id="cb6-8"></span>
<span id="cb6-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> set-matrix</span></span>
<span id="cb6-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb6-11">          matrix=$((</span>
<span id="cb6-12">            echo '{ "package" : ['</span>
<span id="cb6-13">            sed -n "/^REVDEP *:= */ { s///; p }" revdep-dev/Makefile | sed 's/ /, /g' | xargs -n 1 echo | sed -r 's/^([^,]*)(,?)$/"\1"\2/'</span>
<span id="cb6-14">            echo " ]}"</span>
<span id="cb6-15">          ) | jq -c .)</span>
<span id="cb6-16">          echo $matrix</span>
<span id="cb6-17">          echo $matrix | jq .</span>
<span id="cb6-18">          echo "::set-output name=matrix::$matrix"</span>
<span id="cb6-19"></span>
<span id="cb6-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">backend</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb6-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # Original workflow</span></span>
<span id="cb6-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # ...</span></span></code></pre></div>
</section>
<section id="verify-output" class="level2">
<h2 class="anchored" data-anchor-id="verify-output">Verify output</h2>
<p>Before plugging in the generated JSON into our build job, we add another check job to verify if the generated JSON is transported correctly across job boundaries. The <code>needs: matrix</code> declares that the job must wait before the first <code>matrix</code> job succeeds. The job’s output is queried via <code>${{ needs.matrix.outputs.matrix }}</code>, the quotes ensure that <code>bash</code> processes this correctly. We install and use <code>json2yaml</code> to double-check what the YAML snippet looks like.</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb7-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # job defined above</span></span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">check-matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb7-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb7-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">needs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> matrix</span></span>
<span id="cb7-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb7-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install json2yaml</span></span>
<span id="cb7-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb7-11">          sudo npm install -g json2yaml</span>
<span id="cb7-12"></span>
<span id="cb7-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Check matrix definition</span></span>
<span id="cb7-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb7-15">          matrix='${{ needs.matrix.outputs.matrix }}'</span>
<span id="cb7-16">          echo $matrix</span>
<span id="cb7-17">          echo $matrix | jq .</span>
<span id="cb7-18">          echo $matrix | json2yaml</span>
<span id="cb7-19"></span>
<span id="cb7-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">backend</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb7-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # Original workflow</span></span>
<span id="cb7-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # ...</span></span></code></pre></div>
</section>
<section id="use-output" class="level2">
<h2 class="anchored" data-anchor-id="use-output">Use output</h2>
<p>Finally, we’re ready to use the generated JSON as a build matrix. The workflow now uses <code>matrix: ${{fromJson(needs.matrix.outputs.matrix)}}</code> instead of the hard-coded matrix:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb8-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # see above</span></span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">check-matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # see above</span></span>
<span id="cb8-7"></span>
<span id="cb8-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">backend</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb8-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">needs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> matrix</span></span>
<span id="cb8-10"></span>
<span id="cb8-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">strategy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb8-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fail-fast</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb8-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{fromJson(needs.matrix.outputs.matrix)}}</span></span>
<span id="cb8-14"></span>
<span id="cb8-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # rest unchanged</span></span></code></pre></div>
<p>This gives a workflow as shown in the image below.</p>
<figure class="figure">
<img alt="GitHub Actions workflow with dependencies" src="https://blog.cynkra.com/posts/2020-12-23-dynamic-gha/workflow.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Final workflow with dynamic build matrix
</figcaption>
</figure>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next steps</h2>
<p>For R packages, I see two use case where dynamic matrices can be useful:</p>
<ul>
<li>Testing if package checks pass if one suggested package is not installed. Ideally, we remove suggested packages one by one and run in parallel.</li>
<li>Testing reverse dependencies. For some packages we may hit the limit of 256 jobs per workflow run. Allocating downstream packages to workers, minimizing the number of packages to be installed on each worker, sounds like an interesting optimization problem.</li>
</ul>
<p>What are your use cases for dynamic build matrices? Drop us a line at <a href="mailto:mail@cynkra.com" class="email">mail@cynkra.com</a>!</p>
</section>
<section id="caveats" class="level2">
<h2 class="anchored" data-anchor-id="caveats">Caveats</h2>
<p>Even with this simple build matrix, it took more time than I would have hoped to get the bits and pieces right. Quoting is hard. Setting up the <code>check-matrix</code> job really saves time, I wish I had done this from the start.</p>
<p>Both <code>fromJson()</code> and <code>fromJSON()</code> appear to work. The internal functions from the expression syntax seem to be case-insensitive throughout.</p>
<p>For older versions, <code>jq</code> needs to be called as <code>jq .</code> to act as a pretty-printer. For newer versions this can be omitted.</p>
<p>Today I also learned that workflows can be <a href="https://docs.github.com/en/free-pro-team@latest/actions/managing-workflow-runs/disabling-and-enabling-a-workflow">temporarily disabled</a>. This is useful in situations where you experiment with a workflow and want to avoid running other workflows for every test.</p>
<hr>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>You can use any tool or ecosystem you are familiar with to come up with the JSON definition. To avoid long installation times, use a specific image for your step via <a href="https://www.petefreitag.com/item/903.cfm"><code>uses: docker://...</code></a> or implement a <a href="https://docs.github.com/en/free-pro-team@latest/actions/creating-actions/creating-a-docker-container-action">container action</a>, also possible <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsuses">in the same repository</a>.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>GitHub</category>
  <guid>https://blog.cynkra.com/posts/2020-12-23-dynamic-gha/</guid>
  <pubDate>Wed, 23 Dec 2020 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2020-12-23-dynamic-gha/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Setting up a load-balanced Jitsi Meet instance</title>
  <dc:creator>Patrick Schratz</dc:creator>
  <link>https://blog.cynkra.com/posts/2020-11-02-jitsi-load-balanced/</link>
  <description><![CDATA[ 




<p>Jitsi Meet is a self-hosted Free and Open-Source Software (FOSS) video conferencing solution. During the recent COVID-19 pandemic, the project became quite popular, and many companies decided to host their own Jitsi instance.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2020-11-02-jitsi-load-balanced/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Chuttersnap
</figcaption>
</figure>
<p>There are many <a href="https://jitsi.github.io/handbook/docs/devops-guide">different ways</a> to install and run <a href="https://github.com/jitsi/jitsi-meet">Jitsi</a> on a machine. A popular choice in the DevOps space is to use <a href="https://github.com/jitsi/docker-jitsi-meet">Docker</a> via <code>docker-compose</code>, which was the method used in our scenario.</p>
<p>At cynkra, while we have been running our own Jitsi instance quite happily for some months, there was a slightly challenging task coming up: hosting a virtual meeting for approximately 100 participants.</p>
<section id="the-challenge" class="level2">
<h2 class="anchored" data-anchor-id="the-challenge">The Challenge</h2>
<p>cynkra actively supports the local <a href="https://www.meetup.com/Zurich-R-User-Group/">Zurich R User Group</a>. For one of their <a href="https://www.meetup.com/Zurich-R-User-Group">recent meetings</a>, about 100 people RSVP’ed.</p>
<p>When browsing the load capabilities of a single Jitsi instance, we found that the stock setup begins to experience some challenges at around 35 people and fails at around 70 people. The limiting factor appears to be the “videobridge”. One solution is to add a second videobridge to the Jitsi instance. Jitsi can then distribute the load and should be able to host more than 100 people in a meeting.</p>
<p>The best approach is to deploy the second videobridge on a new instance to avoid running into CPU limitations on the main machine. While there is a <a href="https://github.com/jitsi/jitsi-meet/wiki/jitsi-meet-load-balancing-installation-Ubuntu-18.04-with-MUC-and-JID">guide</a> in the Jitsi Wiki and a <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-videotutorials#how-to-load-balance-jitsi-meethttpsjitsiorgblogtutorial-video-how-to-load-balance-jitsi-meet">video</a> that explains how to do it, many people still struggle (<a href="https://github.com/jitsi/docker-jitsi-meet/issues/372">1</a>, <a href="https://community.jitsi.org/t/how-can-i-add-extra-jvb-in-docker-meet/30911/36">2</a>) to get this set up successfully.</p>
<p>Hence, we thought it would be valuable to take another, hopefully simple and understandable stab at explaining this task to the community.</p>
</section>
<section id="load-balancing-jitsi-meet" class="level2">
<h2 class="anchored" data-anchor-id="load-balancing-jitsi-meet">Load-balancing Jitsi Meet</h2>
<p>In the following, we will denote the main machine on which Jitsi runs, as MAIN. The second machine, which will only host a standalone videobridge, will be named BRIDGE.</p>
<ol type="1">
<li><p>The first step is to create a working installation on MAIN, following the <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-docker">official docker guide</a> from the Jitsi developers. There is no need to use Docker. An installation on the host system will also work.</p>
<p>At this point, we assume that you already have installed Jitsi with SSL support at a fictitious domain.</p></li>
<li><p>To be able to connect to the XMPP server (managed by <code>prosody</code>) on MAIN from BRIDGE (details in point 4 below), port 5222 needs to be exported to the public. This requires adding</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ports:</span></span>
<span id="cb1-2">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5222:5222"</span></span></code></pre></div>
<p>to the <code>prosody</code> section in <code>docker-compose.yml</code> and ensuring that the port is opened in the firewall (<code>ufw allow 5222</code>).</p></li>
<li><p>On BRIDGE, start with the same <code>.env</code> and <code>docker-compose.yml</code> as MAIN.</p>
<p>In <code>docker-compose.yml</code>, remove all services besides <code>jvb</code>. The videobridge will later connect to all services on MAIN.</p>
<p>Make sure that <code>JVB_AUTH_USER</code> and <code>JVB_AUTH_PASSWORD</code> in <code>.env</code> are the same as on MAIN, otherwise the authentication will fail.</p></li>
<li><p>On BRIDGE in <code>.env</code> change <code>XMPP_SERVER=xmpp.&lt;DOMAIN&gt;</code> to <code>XMPP_SERVER=&lt;DOMAIN&gt;</code>.</p></li>
<li><p>Run <code>docker-compose up</code> and observe what happens. The videobridge should successfully connect to <code>&lt;DOMAIN&gt;</code>. On MAIN, in <code>docker logs jitsi_jicofo_1</code>, an entry should appear denoting that a new videobridge was successfully connected.</p>
<p>It looks like</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Jicofo</span> 2020-10-23 19:01:52.173 INFO: <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">29</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span> org.jitsi.jicofo.bridge.BridgeSelector.log<span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">(</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">)</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Added</span> new videobridge: Bridge[jid=jvbbrewery@internal-muc.<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>DOMAIN<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>/d789de303e9b, relayId=null, region=null, stress=0.00]</span></code></pre></div>
<p>If you have another videobridge running on MAIN, you should see that the identifier of the new videobridge (here <code>d789de303e9b</code>) is different to your main videobridge identifier. On BRIDGE, the logs should show something like</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">INFO:</span> Joined MUC: jvbbrewery@internal-muc.<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>DOMAIN<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">INFO:</span> Performed a successful health check in PT0S. Sticky failure: false</span></code></pre></div></li>
</ol>
<p>To test that the external videobridge is active, one can disable the main videobridge (<code>docker stop jitsi_jvb_1</code>) and try to enable the camera in a new meeting.</p>
</section>
<section id="troubleshooting-and-tips" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-and-tips">Troubleshooting and Tips</h2>
<ul>
<li><p>If you see something like <code>SASLError using SCRAM-SHA-1: not-authorized</code>, this indicates that the <code>JVB_AUTH_PASSWORD</code> and/or <code>JVB_AUTH_USER</code> on BRIDGE are incorrect.</p></li>
<li><p>If you change something in <code>.env</code> of MAIN, you need to delete all config folders before running <code>docker-compose up</code> again. Otherwise changes won’t be picked up even when force destroying the containers.</p></li>
<li><p>Do not run <code>gen-passwords.sh</code> multiple times as <code>JVB_AUTH_PASSWORD</code> and BRIDGE will not be able to connect anymore.</p></li>
<li><p>Unrelated to the content above: if you want to create a user manually for your instance, the following command might be helpful:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">docker</span> exec jitsi_prosody_1 prosodyctl <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--config</span> /config/prosody.cfg.lua register <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>USER<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>DOMAIN<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;PASSWORD&gt;"</span></span></code></pre></div></li>
</ul>


</section>

 ]]></description>
  <category>DevOps</category>
  <guid>https://blog.cynkra.com/posts/2020-11-02-jitsi-load-balanced/</guid>
  <pubDate>Mon, 02 Nov 2020 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Maintaining multiple identities with Git</title>
  <dc:creator>Kirill Müller</dc:creator>
  <link>https://blog.cynkra.com/posts/2020-08-25-git-multiple-identities/</link>
  <description><![CDATA[ 




<p>When committing to a Git repository related to my consulting work, I must use my company e-mail address, kirill@cynkra.com. Not so much for my open-source work – for this, I prefer to use other e-mail addresses, like krlmlr+r@mailbox.org . (For example, Travis CI sends notification e-mails to the committer’s e-mail address, and I have set up filtering for that other address.)</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2020-08-25-git-multiple-identities/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Carson Arias
</figcaption>
</figure>
<p><br></p>
<p>Having to configure the e-mail address for each repository separately eventually gets annoying. Instead, I’d rather have all repos within a specific subdirectory use particular e-mail address.</p>
<p>All my Git repos live in <code>~/git</code>. Subdirectories <code>R</code> and <code>cynkra</code>, contain R packages and repos related to consulting, respectively. To achieve the desired setup, I edit my <code>~/.gitconfig</code> with the following entry:</p>
<pre><code>[includeIf "gitdir:git/**"]
    path = git/.gitconfig</code></pre>
<p>This ensures that all repos in the <code>git</code> directory use the <code>git/.gitconfig</code> file in addition to the main configuration. That file contains the following:</p>
<pre><code>[includeIf "gitdir:R/**"]
    path = R/.gitconfig
[includeIf "gitdir:cynkra/**"]
    path = cynkra/.gitconfig</code></pre>
<p>Finally, in <code>~/git/R/.gitconfig</code> and <code>~/git/cynkra/.gitconfig</code>, I configure the e-mail addresses I want to use for all repos pertaining to <code>R</code> and <code>cynkra</code>, respectively.</p>
<pre><code>[user]
    email = ...</code></pre>
<p>I verify the setup with <code>git config -l | grep user</code>. Indeed, cynkra repos use the cynkra e-mail address. Voilà!</p>
<p>The above approach requires a recent-ish version of <code>git</code>- version 2.14 or later should suffice. Read more about <a href="https://git-scm.com/docs/git-config#_conditional_includes">conditional includes</a>.</p>



 ]]></description>
  <category>Git</category>
  <guid>https://blog.cynkra.com/posts/2020-08-25-git-multiple-identities/</guid>
  <pubDate>Tue, 25 Aug 2020 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2020-08-25-git-multiple-identities/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Relational data models in R</title>
  <dc:creator>Angel D&#39;az, Kirill Müller</dc:creator>
  <link>https://blog.cynkra.com/posts/2020-04-02-dm/</link>
  <description><![CDATA[ 




<p>Relational databases are powerful tools for analyzing and manipulating data. However, many modeling workflows require a great deal of time and effort to wrangle data from databases to place it into a flat data frame or table format. Only then the actual data analysis can start.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2020-04-02-dm/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Jordan McDonald
</figcaption>
</figure>
<p><br></p>
<section id="why-a-relational-model" class="level2">
<h2 class="anchored" data-anchor-id="why-a-relational-model">Why a relational model?</h2>
<p>With the proper tools, analysis can begin using a relational model that works directly with the database. And, if wrangling is still required, R users can leverage this powerful and proven SQL approach to data organization and manipulation.</p>
<p>The <a href="https://krlmlr.github.io/dm">dm package</a> takes the primary advantage of databases – relational modeling – and brings it to R. In relational databases, tables or data frames link through <a href="https://krlmlr.github.io/dm/articles/howto-dm-theory.html#pk">primary keys (PK)</a> and <a href="https://krlmlr.github.io/dm/articles/howto-dm-theory.html#fk">foreign keys (FK)</a>. Instead of having a single, wide table to work with, data is segmented across multiple tables to eliminate or reduce redundancies. This process is called normalization. A classic example is storing unique identifiers in a large table and looking up values for these unique identifiers in a small data frame. This approach lets an analysis run without reading or writing look-up values until necessary because unique identifiers are enough for most of the runtime.</p>
<p>dm 0.1.1 is available on <a href="https://cran.r-project.org/package=dm">CRAN</a>. You can now download and install dm, from CRAN, with the following command:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dm"</span>)</span></code></pre></div>
</section>
<section id="connect-to-a-database" class="level2">
<h2 class="anchored" data-anchor-id="connect-to-a-database">Connect to a database</h2>
<p>We connect to a <a href="https://relational.fit.cvut.cz/">relational dataset repository</a> with a database server that is publicly accessible without registration. There is a <a href="https://relational.fit.cvut.cz/dataset/Financial">financial dataset</a> that contains loan data, along with relevant information and transactions. We chose this loan dataset because the relationships between <code>loan</code>, <code>account</code>, and <code>transcactions</code> tables are good representations of databases that record real-world business transactions.</p>
<p>The dataset page lists the credentials required for connecting to the database:</p>
<ul>
<li>hostname: relational.fit.cvut.cz</li>
<li>port: 3306</li>
<li>username: <code>guest</code></li>
<li>password: <code>relational</code></li>
<li>database: <code>Financial_ijs</code></li>
</ul>
<p>These can be used, for example, in MySQL Workbench to download the CSV data manually. To automate and keep the data in the database for as long as possible, we can connect to the database from R through its <a href="https://www.r-dbi.org/">database interface</a> to access the tables:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RMariaDB)</span>
<span id="cb2-2">my_db <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(</span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">MariaDB</span>(),</span>
<span id="cb2-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">user =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'guest'</span>,</span>
<span id="cb2-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">password =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'relational'</span>,</span>
<span id="cb2-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Financial_ijs'</span>,</span>
<span id="cb2-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">host =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'relational.fit.cvut.cz'</span></span>
<span id="cb2-8">)</span>
<span id="cb2-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbListTables</span>(my_db)</span>
<span id="cb2-10"></span>
<span id="cb2-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## [1] "accounts"  "cards"     "clients"   "disps"     "districts" "loans"</span></span>
<span id="cb2-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## [7] "orders"    "tkeys"     "trans"</span></span></code></pre></div>
<p>By creating a dm object from the connection, we get access to all tables:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dm)</span>
<span id="cb3-2">my_dm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_from_src</span>(my_db)</span>
<span id="cb3-3"></span>
<span id="cb3-4">my_dm</span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ── Table source ────────────────────────────────────────────────────────────────</span></span>
<span id="cb3-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## src:  mysql  [guest@relational.fit.cvut.cz:NA/Financial_ijs]</span></span>
<span id="cb3-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ── Metadata ────────────────────────────────────────────────────────────────────</span></span>
<span id="cb3-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Tables: `accounts`, `cards`, `clients`, `disps`, `districts`, … (9 total)</span></span>
<span id="cb3-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Columns: 57</span></span>
<span id="cb3-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Primary keys: 0</span></span>
<span id="cb3-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Foreign keys: 0</span></span></code></pre></div>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(my_dm)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## [1] "accounts"  "cards"     "clients"   "disps"     "districts" "loans"</span></span>
<span id="cb4-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## [7] "orders"    "tkeys"     "trans"</span></span></code></pre></div>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">my_dm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>accounts</span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # Source:   table&lt;accounts&gt; [?? x 4]</span></span>
<span id="cb5-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # Database: mysql [guest@relational.fit.cvut.cz:NA/Financial_ijs]</span></span>
<span id="cb5-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##      id district_id frequency        date</span></span>
<span id="cb5-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   &lt;int&gt;       &lt;int&gt; &lt;chr&gt;            &lt;date&gt;</span></span>
<span id="cb5-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1     1          18 POPLATEK MESICNE 1995-03-24</span></span>
<span id="cb5-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2     2           1 POPLATEK MESICNE 1993-02-26</span></span>
<span id="cb5-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3     3           5 POPLATEK MESICNE 1997-07-07</span></span>
<span id="cb5-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4     4          12 POPLATEK MESICNE 1996-02-21</span></span>
<span id="cb5-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5     5          15 POPLATEK MESICNE 1997-05-30</span></span>
<span id="cb5-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6     6          51 POPLATEK MESICNE 1994-09-27</span></span>
<span id="cb5-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # … with more rows</span></span></code></pre></div>
<p>The components of this particular dm object are lazy tables powered by <a href="https://dbplyr.tidyverse.org/">dbplyr</a>. This package translates the <a href="https://dplyr.tidyverse.org/">dplyr</a> grammar of data manipulation into queries the database server understands. The advantage to a lazy table is that there is no data download until results are collected for printing or local processing. Below, the summary operation is computed on the database, and only the results are sent back to the R session.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb6-2">my_dm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>accounts <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(district_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>()</span>
<span id="cb6-6"></span>
<span id="cb6-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # Source:   lazy query [?? x 2]</span></span>
<span id="cb6-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # Database: mysql [guest@relational.fit.cvut.cz:NA/Financial_ijs]</span></span>
<span id="cb6-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   district_id n</span></span>
<span id="cb6-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##         &lt;int&gt; &lt;int64&gt;</span></span>
<span id="cb6-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1           1 554</span></span>
<span id="cb6-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2           2  42</span></span>
<span id="cb6-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3           3  50</span></span>
<span id="cb6-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4           4  48</span></span>
<span id="cb6-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5           5  65</span></span>
<span id="cb6-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6           6  48</span></span>
<span id="cb6-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # … with more rows</span></span></code></pre></div>
<p>If the data fits into your RAM, a database connection is not <em>required</em> to use dm. The <code>collect()</code> command downloads all tables for our dm object.</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">my_local_dm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb7-2">  my_dm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">collect</span>()</span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">object.size</span>(my_local_dm)</span>
<span id="cb7-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 77922024 bytes</span></span></code></pre></div>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">my_local_dm<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>accounts <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(district_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>()</span>
<span id="cb8-5"></span>
<span id="cb8-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # A tibble: 77 x 2</span></span>
<span id="cb8-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   district_id     n</span></span>
<span id="cb8-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##         &lt;int&gt; &lt;int&gt;</span></span>
<span id="cb8-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1           1   554</span></span>
<span id="cb8-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2           2    42</span></span>
<span id="cb8-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3           3    50</span></span>
<span id="cb8-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4           4    48</span></span>
<span id="cb8-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5           5    65</span></span>
<span id="cb8-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6           6    48</span></span>
<span id="cb8-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # … with 71 more rows</span></span></code></pre></div>
<p>A dm object can also be created from individual data frames with the <code>dm()</code> function.</p>
</section>
<section id="define-primary-and-foreign-keys" class="level2">
<h2 class="anchored" data-anchor-id="define-primary-and-foreign-keys">Define primary and foreign keys</h2>
<p>Relational database tables link to each other via primary and foreign keys. The <a href="https://relational.fit.cvut.cz/assets/img/datasets-generated/financial.svg">model diagram</a> provided by our test database illustrates the intended relationships.</p>
<p>However, it turns out this is not an accurate representation of the entities and relationships within the database:</p>
<ul>
<li>Table names in our database have the plural form; in the diagram it’s singular.</li>
<li>There is a <code>tkeys</code> table available in the database that is not listed in the model diagram.</li>
<li>The <code>Financial_std</code> database is similar, but different from the one that we work with, <code>Financial_ijs</code>.</li>
</ul>
<p>Bearing these discrepancies in mind, we can define suitable primary and foreign keys for our dm object. The documentation suggests that the <code>loans</code> table is the most important one. We color the target table separately with <code>dm_color()</code>.</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Defining PKs and FKs</span></span>
<span id="cb9-2">my_dm_keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb9-3">  my_local_dm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(districts, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(accounts, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(clients, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(loans, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(orders, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(trans, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(disps, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_pk</span>(cards, id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(loans, account_id, accounts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(orders, account_id, accounts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(trans, account_id, accounts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(disps, account_id, accounts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(disps, client_id, clients) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(accounts, district_id, districts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_add_fk</span>(cards, disp_id, disps) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_set_colors</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">green =</span> loans)</span>
<span id="cb9-20"></span>
<span id="cb9-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Draw the visual model</span></span>
<span id="cb9-22">my_dm_keys <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_draw</span>()</span></code></pre></div>
<p><img alt="Data model" src="https://blog.cynkra.com/posts/2020-04-02-dm/dm_draw.png" style="height: auto; width: 60%;"></p>
<p>The discrepancies highlight the importance of being able to define primary and foreign keys. Most of the challenges in manipulating data are not syntax knowledge gaps. The syntax can always be looked up with search engines. Knowledge gaps regarding how data is organized are much more common as stumbling blocks for R users when working with distributed data.</p>
<p>Insight into the structure of a database using the built-in <code>dm_draw()</code> function provides an instant efficiency boost. Combined with defining unique identifiers (primary keys) and how they are found by other tables (foreign keys), an R user can quickly clarify the structures with which they are working.</p>
<p>To assist with this process of defining the structure, dm comes with a built-in helper to check the referential integrity of the dataset:</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">my_dm_keys <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_examine_constraints</span>()</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ℹ All constraints satisfied.</span></span></code></pre></div>
</section>
<section id="create-a-dataset-ready-for-analysis" class="level2">
<h2 class="anchored" data-anchor-id="create-a-dataset-ready-for-analysis">Create a dataset ready for analysis</h2>
<p>For modeling, a flat table or matrix is required as input. If normalization is the process of splitting up a table to reduce redundancies, joining multiple tables together is called denormalizing.</p>
<p>The <code>dm_squash_to_tbl()</code> function creates a denormalized table by performing a cascading join between <code>cards</code> and all outgoing foreign keys. A <code>join</code> is the SQL term for combining some or all of the unique columns between 2 or more tables into a single table using the appropriate keys. In this case, the <code>cards</code> table has a foreign key to <code>disps</code> table, which has a foreign key to <code>accounts</code>, which also has a foreign key to the <code>districts</code> table. These foreign key relationships are then used in a cascading join within the <code>dm_squash_to_tbl()</code> function, without having to specify the relationships because they are already encoded within the <code>dm</code> object.</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">my_dm_keys <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_squash_to_tbl</span>(cards)</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Renamed columns:</span></span>
<span id="cb11-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## * type -&gt; cards$cards.type, disps$disps.type</span></span>
<span id="cb11-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## * district_id -&gt; accounts$accounts.district_id, clients$clients.district_id</span></span>
<span id="cb11-7"></span>
<span id="cb11-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # A tibble: 892 x 28</span></span>
<span id="cb11-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##      id disp_id cards.type issued     client_id account_id disps.type</span></span>
<span id="cb11-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;date&gt;         &lt;int&gt;      &lt;int&gt; &lt;chr&gt;</span></span>
<span id="cb11-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1     1       9 gold       1998-10-16         9          7 OWNER</span></span>
<span id="cb11-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2     2      19 classic    1998-03-13        19         14 OWNER</span></span>
<span id="cb11-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3     3      41 gold       1995-09-03        41         33 OWNER</span></span>
<span id="cb11-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4     4      42 classic    1998-11-26        42         34 OWNER</span></span>
<span id="cb11-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5     5      51 junior     1995-04-24        51         43 OWNER</span></span>
<span id="cb11-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6     7      56 classic    1998-06-11        56         48 OWNER</span></span>
<span id="cb11-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # … with 886 more rows, and 21 more variables: accounts.district_id &lt;int&gt;,</span></span>
<span id="cb11-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## #   frequency &lt;chr&gt;, date &lt;date&gt;, A2 &lt;chr&gt;, A3 &lt;chr&gt;, A4 &lt;int&gt;, A5 &lt;int&gt;,</span></span>
<span id="cb11-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## #   A6 &lt;int&gt;, A7 &lt;int&gt;, A8 &lt;int&gt;, A9 &lt;int&gt;, A10 &lt;dbl&gt;, A11 &lt;int&gt;, A12 &lt;dbl&gt;,</span></span>
<span id="cb11-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## #   A13 &lt;dbl&gt;, A14 &lt;int&gt;, A15 &lt;int&gt;, A16 &lt;int&gt;, birth_number &lt;chr&gt;,</span></span>
<span id="cb11-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## #   clients.district_id &lt;int&gt;, tkey_id &lt;int&gt;</span></span></code></pre></div>
<p>We have an analysis-ready dataset available to use!</p>
</section>
<section id="transform-data-in-a-dm" class="level2">
<h2 class="anchored" data-anchor-id="transform-data-in-a-dm">Transform data in a dm</h2>
<p>Data transformation in dm is done by zooming on the table with which you would like to work. A zoomed dm supports dplyr operations on the zoomed table: simple transformations, grouped operations, joins, and more.</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">my_dm_keys <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm_zoom_to</span>(accounts) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(district_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(districts)</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # Zoomed table: accounts</span></span>
<span id="cb12-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # A tibble:     77 x 17</span></span>
<span id="cb12-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##   district_id     n A2    A3        A4    A5    A6    A7    A8    A9   A10   A11</span></span>
<span id="cb12-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb12-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1           1   554 Hl.m… Prag… 1.20e6     0     0     0     1     1   100 12541</span></span>
<span id="cb12-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2           2    42 Bene… cent… 8.89e4    80    26     6     2     5    47  8507</span></span>
<span id="cb12-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3           3    50 Bero… cent… 7.52e4    55    26     4     1     5    42  8980</span></span>
<span id="cb12-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4           4    48 Klad… cent… 1.50e5    63    29     6     2     6    67  9753</span></span>
<span id="cb12-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5           5    65 Kolin cent… 9.56e4    65    30     4     1     6    51  9307</span></span>
<span id="cb12-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6           6    48 Kutn… cent… 7.80e4    60    23     4     2     4    52  8546</span></span>
<span id="cb12-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## # … with 71 more rows, and 5 more variables: A12 &lt;dbl&gt;, A13 &lt;dbl&gt;, A14 &lt;int&gt;,</span></span>
<span id="cb12-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## #   A15 &lt;int&gt;, A16 &lt;int&gt;</span></span></code></pre></div>
<p>The columns used by <code>left_join()</code> to consolidate tables are inferred from the primary and foreign keys already encoded within the <code>dm</code> object.</p>
</section>
<section id="reproducible-dataflows-with-dm" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-dataflows-with-dm">Reproducible dataflows with dm</h2>
<p>Walking through dm’s data modeling fundamentals, adding keys, and drawing the structure, will help R users better understand data from external databases or apply best practices from relational data modeling to their local data.</p>
<p>You can immediately start testing on an <a href="https://rstudio.cloud/project/523482">Rstudio cloud</a> instance! For more examples and explanations, check out the <a href="https://krlmlr.github.io/dm">documentation page</a>. Install this package today!</p>


</section>

 ]]></description>
  <category>R</category>
  <category>dm</category>
  <category>databases</category>
  <guid>https://blog.cynkra.com/posts/2020-04-02-dm/</guid>
  <pubDate>Thu, 02 Apr 2020 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2020-04-02-dm/banner.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>tempdisagg: converting quarterly time series to daily</title>
  <dc:creator>Christoph Sax</dc:creator>
  <link>https://blog.cynkra.com/posts/2020-02-09-tempdisagg/</link>
  <description><![CDATA[ 




<p>Not having a time series at the desired frequency is a common problem for researchers and analysts. For example, instead of quarterly sales, they only have annual sales. Instead of a daily stock market index, they only have a weekly index. While there is no way to fully make up for the missing data, there are useful workarounds: with the help of one or more high-frequency indicator series, the low-frequency series may be disaggregated into a high-frequency series.</p>
<figure class="figure">
<img alt="Illustration" src="https://blog.cynkra.com/posts/2020-02-09-tempdisagg/banner.jpg" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Photo by Jordan McDonald
</figcaption>
</figure>
<p><br></p>
<p>The package tempdisagg implements the standard methods for temporal disaggregation: Denton, Denton-Cholette, Chow-Lin, Fernandez and Litterman. Our article on <a href="https://doi.org/10.32614/RJ-2013-028">temporal disaggregation of time series</a> in the R-Journal describes the package and the theory of temporal disaggregation in more detail.</p>
<p>The package has been around for eight years, enabling the standard year or quarter to month or quarter disaggregation. With version 1.0, there are now some major new features: disaggregation can be performed from any frequency to any frequency. Also, tempdisagg now supports time series classes other than <code>ts</code>.</p>
<section id="convert-between-any-frequency" class="level3">
<h3 class="anchored" data-anchor-id="convert-between-any-frequency">Convert between any frequency</h3>
<p>tempdisagg can now convert between most frequencies, for example, it can disaggregate a monthly series to daily. It is no longer restricted to regular conversions, where each low-frequency period had the same number of high-frequency periods. Instead, a low-frequency period (e.g.&nbsp;month) can contain any number of high-frequency periods (e.g.&nbsp;31, 28 or 29 days). Thanks to Roger Kissling and Stella Sim who have suggested this idea.</p>
<p>We can not only convert months to days, but also years to days, weeks to seconds, or academic years to seconds, or lunar years to hours,etc. The downside is that the computation time depends on the number of observations. Thus, for longer high-frequency series, the computation may take a while.</p>
<p>In the following, we try to disaggregate quarterly GDP of Switzerland to a hypothetical daily GDP series. The example series are shipped with the package.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tempdisagg)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(tempdisagg)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(gdp.q)</span>
<span id="cb1-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##         time    value</span></span>
<span id="cb1-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 1 2005-01-01 133101.3</span></span>
<span id="cb1-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 2 2005-04-01 136320.4</span></span>
<span id="cb1-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 3 2005-07-01 137693.7</span></span>
<span id="cb1-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 4 2005-10-01 139475.9</span></span>
<span id="cb1-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 5 2006-01-01 139204.7</span></span>
<span id="cb1-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 6 2006-04-01 141112.5</span></span></code></pre></div>
</section>
<section id="time-series-can-be-stored-in-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="time-series-can-be-stored-in-data-frames">Time series can be stored in data frames</h2>
<p>Because we are dealing with daily data, we keep the data in a <code>data.frame</code>, rather than in a <code>ts</code> object. Other time series objects, such as <code>xts</code> and <code>tsibble</code>, are possible as well. For conversion and visualization, we use the <a href="https://www.tsbox.help">tsbox</a> package.</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tsbox)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_plot</span>(gdp.q, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Swiss GDP"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"real, not seasonally adjusted"</span>)</span></code></pre></div>
<figure class="figure">
<img alt="Graph: Swiss GDP, not seasonally adjusted" src="https://blog.cynkra.com/posts/2020-02-09-tempdisagg/quarterly-1.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Series to disaggregate: quarterly gross domestic product of Switzerland
</figcaption>
</figure>
<p><br></p>
</section>
<section id="disaggregation-to-daily-frequency" class="level2">
<h2 class="anchored" data-anchor-id="disaggregation-to-daily-frequency">Disaggregation to daily frequency</h2>
<p>While disaggregation can also be performed without other series, we use Swiss stock market data as an indicator series to disaggregate GDP. Data of the stock market index, the SMI, is also included in tempdisagg. Weekend and holiday values have been interpolated, because <code>td</code> does not allow the presence of missing values.</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_plot</span>(spi.d, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Swiss Performance Index"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"daily values, interpolated"</span>)</span></code></pre></div>
<figure class="figure">
<img alt="Graph: Swiss Performance Index, daily" src="https://blog.cynkra.com/posts/2020-02-09-tempdisagg/indicator-1.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Daily indicator series: Swiss Performance Index
</figcaption>
</figure>
<p><br></p>
<p>The following uses the Chow-Lin method to disaggregate the series. A high <em>rho</em> parameter takes into account that the two series are unlikely to be co-integrated.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">m.d.stocks <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">td</span>(gdp.q <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> spi.d, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chow-lin-fixed"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixed.rho =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>)</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(m.d.stocks)</span>
<span id="cb4-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##</span></span>
<span id="cb4-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Call:</span></span>
<span id="cb4-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## td(formula = gdp.q ~ spi.d, method = "chow-lin-fixed", fixed.rho = 0.9)</span></span>
<span id="cb4-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##</span></span>
<span id="cb4-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Residuals:</span></span>
<span id="cb4-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##    Min     1Q Median     3Q    Max</span></span>
<span id="cb4-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## -10656  -1760   1076   3796   8891</span></span>
<span id="cb4-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##</span></span>
<span id="cb4-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Coefficients:</span></span>
<span id="cb4-12"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##              Estimate Std. Error t value Pr(&gt;|t|)</span></span>
<span id="cb4-13"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## (Intercept) 1.320e+03  2.856e+01   46.22   &lt;2e-16 ***</span></span>
<span id="cb4-14"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## spi.d       5.512e-02  3.735e-03   14.76   &lt;2e-16 ***</span></span>
<span id="cb4-15"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## ---</span></span>
<span id="cb4-16"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span id="cb4-17"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##</span></span>
<span id="cb4-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 'chow-lin-fixed' disaggregation with 'sum' conversion</span></span>
<span id="cb4-19"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## 59 low-freq. obs. converted to 5493 high-freq. obs.</span></span>
<span id="cb4-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## Adjusted R-squared: 0.7928 AR1-Parameter:   0.9</span></span></code></pre></div>
<p>And here is the result: A daily series of GDP</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">gdp.d.stocks <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">predict</span>(m.d.stocks)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_plot</span>(</span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_scale</span>(</span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_c</span>(gdp.d.stocks, gdp.q)</span>
<span id="cb5-5">  ),</span>
<span id="cb5-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Daily disaggregated GDP"</span>,</span>
<span id="cb5-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"one indicator"</span></span>
<span id="cb5-8">)</span></code></pre></div>
<figure class="figure">
<img alt="Graph: Daily disaggregated Swiss GDP" src="https://blog.cynkra.com/posts/2020-02-09-tempdisagg/daily-1.png" style=" width: 100%; height: auto" class="figure-img">
<figcaption>
Swiss GDP, disaggregated to daily
</figcaption>
</figure>
<p><br></p>
<p>Like with all disaggregation methods in tempdisagg, the resulting series fulfills the aggregation constraint (the resulting series is as long as the indicator, and needs to be shortened for a comparison):</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all.equal</span>(</span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_span</span>(</span>
<span id="cb6-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts_frequency</span>(gdp.d.stocks, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quarter"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aggregate =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sum"</span>),</span>
<span id="cb6-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2019-07-01"</span></span>
<span id="cb6-5">  ),</span>
<span id="cb6-6">  gdp.q</span>
<span id="cb6-7">)</span>
<span id="cb6-8"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## [1] TRUE</span></span></code></pre></div>


</section>

 ]]></description>
  <category>R</category>
  <category>time-series</category>
  <guid>https://blog.cynkra.com/posts/2020-02-09-tempdisagg/</guid>
  <pubDate>Sun, 09 Feb 2020 00:00:00 GMT</pubDate>
  <media:content url="https://blog.cynkra.com/posts/2020-02-09-tempdisagg/banner.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
